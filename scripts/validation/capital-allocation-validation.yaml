# Capital Allocation Documentation Validation
# Phase 1D: Reserve, Pacing, Cohort engines

description: 'Phase 1D Capital Allocation Documentation Validation'

prompts:
  - file: scripts/validation/prompts.py
    function: capital_allocation_prompt

# Note: Ensure ANTHROPIC_API_KEY is set in environment
# Use CLI -o flag for output path (no outputPath in YAML for consistency)

tests:
  - description: 'Validate capital-allocation.md (primary documentation)'
    vars:
      doc_type: capital_allocation
      doc_content: file://docs/notebooklm-sources/capital-allocation.md
      truth_cases: file://docs/capital-allocation.truth-cases.json
      schema: file://docs/schemas/capital-allocation-truth-case.schema.json

  - description: 'Validate ADR-008 (architectural decision record)'
    vars:
      doc_type: architectural_decision
      doc_content: file://docs/adr/ADR-008-capital-allocation-policy.md
      truth_cases: file://docs/capital-allocation.truth-cases.json
      schema: file://docs/schemas/capital-allocation-truth-case.schema.json

scorers:
  - path: scripts/validation/doc_domain_scorer.mjs
