# GitHub Actions Workflows Inventory

## Overview

This directory contains a comprehensive inventory of all GitHub Actions
workflows for the Updog repository.

- **Generated**: 2025-10-16
- **Total Workflows**: 55
- **Total YAML Lines**: 8,621
- **Total Secrets Used**: 108

## Files

- `inventory.generated.json` - Machine-readable inventory of all workflows with
  metadata

## Inventory Format

Each workflow entry contains:

```json
{
  "workflow": "workflow-name.yml",
  "lines": 675,
  "lastModified": "2025-10-16",
  "hasOnTrigger": true,
  "secretsCount": 42,
  "badgeConsumers": 7,
  "workflowCallConsumers": 0,
  "status": "ACTIVE|BROKEN|DEPRECATED"
}
```

### Field Descriptions

- **workflow**: Filename of the workflow
- **lines**: Total line count of the workflow YAML
- **lastModified**: Date of last git commit (YYYY-MM-DD)
- **hasOnTrigger**: Whether the workflow has an `on:` trigger section
- **secretsCount**: Number of secret references (e.g., `secrets.API_KEY`)
- **badgeConsumers**: Number of references in README/docs for badges
- **workflowCallConsumers**: Number of times called from other workflows
- **status**:
  - `ACTIVE` - Working normally
  - `BROKEN` - Contains merge conflicts or errors
  - `DEPRECATED` - Marked as deprecated

## Key Findings

### Status Summary

- Active: 54
- Broken: 1 (ci-optimized.yml)
- Deprecated: 0

### Critical Issues

1. **ci-optimized.yml** - Contains merge conflicts (`<<<<<<< HEAD`)
   - Action: Requires immediate merge resolution

### High-Secret Workflows

1. deploy-production.yml (42 secrets)
2. deploy-ga.yml (13 secrets)
3. deploy-staging.yml (10 secrets)

### Largest Workflows

1. ci-unified.yml (676 lines)
2. deploy-production.yml (543 lines)
3. green-scoreboard-complete.yml (446 lines)

### Documentation Dependencies

- 22 workflows are referenced in documentation/badges
- test.yml is the most referenced (132 times)

## Consolidation Opportunities

Current: 55 workflows Target: ~18 workflows (67% reduction)

### Consolidation Groups

#### CI Workflows (8 → 2-3)

- ci-breaker.yml
- ci-hygiene.yml
- ci-memory.yml
- ci-optimized.yml
- ci-reserves-v11.yml
- ci-unified.yml
- memory-mode.yml
- progressive-strictness.yml

#### Deployment (3 → 1-2)

- deploy-ga.yml
- deploy-production.yml
- deploy-staging.yml

#### Synthetic/Testing (4 → 1-2)

- synthetic.yml
- synthetics-5m.yml
- synthetics-e2e.yml
- synthetics-smart.yml

#### Guardian/Scoreboard (5 → 1-2)

- guardian.yml
- guardian-complete.yml
- guardian-ttl-mute.yml
- green-scoreboard.yml
- green-scoreboard-complete.yml

#### Performance (4 → 1)

- perf-baseline.yml
- perf-budget.yml
- performance-gates.yml
- perf-smoke.yml

## Recommendations

### Priority 1 (Urgent)

- [ ] Fix ci-optimized.yml merge conflicts
- [ ] Audit deploy-production.yml for secret over-allocation (42 secrets)

### Priority 2 (High)

- [ ] Consolidate CI workflows into 2-3 main pipelines
- [ ] Combine deployment workflows
- [ ] Unify synthetic test workflows

### Priority 3 (Medium)

- [ ] Consolidate Guardian/Scoreboard workflows
- [ ] Merge performance monitoring workflows
- [ ] Remove duplicate trigger definitions

### Priority 4 (Low)

- [ ] Document workflow purposes in README
- [ ] Create workflow decision matrix
- [ ] Add workflow architecture ADR

## Trigger Coverage

All 55 workflows have `on:` trigger definitions (100% coverage)

Common triggers:

- `pull_request` - Most workflows
- `push` - Main branch deployments
- `schedule` - Periodic jobs (maintenance, monitoring)
- `workflow_dispatch` - Manual triggers
- `workflow_call` - Reusable workflows

## Secrets Management

- **Total references**: 108
- **Highest usage**: deploy-production.yml (42)
- **Recommended audit**: Review if all secrets are necessary or if they can be
  consolidated

## Workflow Calls (Reusability)

Only 1 workflow is called by others:

- codeql.yml (called 7 times)

_Note: This suggests most workflows are independent, which may indicate
consolidation opportunities._

## Recently Modified (Last 5 Days)

- ci-unified.yml (2025-10-16)
- linux-build-validation.yml (2025-10-16)
- progressive-strictness.yml (2025-10-14)
- slack-regression-guard.yml (2025-10-14)

## Quick Stats

| Metric                   | Count |
| ------------------------ | ----- |
| Total workflows          | 55    |
| Active                   | 54    |
| Broken                   | 1     |
| Deprecated               | 0     |
| With triggers            | 55    |
| With secrets             | 34    |
| Referenced in docs       | 22    |
| Total YAML lines         | 8,621 |
| Total secrets used       | 108   |
| Avg lines per workflow   | 157   |
| Avg secrets per workflow | 2.0   |

---

**Generated by**: Workflow Inventory Analysis Tool **Last Updated**: 2025-10-16
**Data Source**: `.github/workflows/` directory
