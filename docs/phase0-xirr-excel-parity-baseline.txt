
> rest-express@1.3.2 pretest
> node scripts/ensure-sidecar.mjs

[ensure-sidecar] âœ… Sidecar junctions ready

> rest-express@1.3.2 test
> npm run test:unit && npm run test:integration --run tests/unit/truth-cases/xirr.test.ts


> rest-express@1.3.2 test:unit
> cross-env TZ=UTC vitest run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mC:/dev/Updog_restore[39m

 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/forbidden-tokens.test.ts [2m([22m[2m4 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 282[2mms[22m[39m
[31m   [31mÃ—[31m Forbidden Features Protection[2m > [22mruntime: no forbidden tokens in TypeScript codebase[39m[32m 270[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'split')[39m
   [32mâœ“[39m Forbidden Features Protection[2m > [22mruntime: no forbidden keys in schema definitions[32m 2[2mms[22m[39m
   [32mâœ“[39m Forbidden Features Protection[2m > [22mruntime: validateNoForbiddenKeys detects violations[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m Forbidden Features Protection[2m > [22mcompile-time: type guard prevents usage[39m[32m 2[2mms[22m[39m
[31m     â†’ expected undefined to be defined[39m
[90mstdout[2m | tests/unit/services/monte-carlo-engine.test.ts
[22m[39m[Monte Carlo] Mode: PRODUCTION, Default runs: 10000, Max runs: 50000

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/database/variance-tracking-schema.test.ts [2m([22m[2m31 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 648[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould create baseline with all required fields[32m 5[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould enforce baseline_type enum constraint[32m 4[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould enforce period_end > period_start constraint[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould enforce unique default baseline per fund[39m[32m 24[2mms[22m[39m
[31m     â†’ promise resolved "[ { â€¦(3) }, â€¦(2) ]" instead of rejecting[39m
[31m   [31mÃ—[31m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould validate confidence bounds (0.00 to 1.00)[39m[32m 14[2mms[22m[39m
[31m     â†’ promise resolved "[ { â€¦(3) }, â€¦(2) ]" instead of rejecting[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould support JSONB fields for complex data[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould support tags array field[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould create variance report with all required fields[32m 20[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce valid report_type enum[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce valid status enum[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce valid risk_level enum[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce analysis_end >= analysis_start constraint[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould validate data_quality_score bounds (0.00 to 1.00)[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould create performance alert with all required fields[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce valid severity enum[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce valid category enum[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce valid status enum[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce occurrence_count >= 1 constraint[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce escalation_level >= 0 constraint[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould create alert rule with all required fields[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce valid rule_type enum[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce valid operator enum[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce secondary_threshold requirement for between operator[32m 3[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce valid check_frequency enum[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce suppression_period_minutes >= 1 constraint[32m 4[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce trigger_count >= 0 constraint[32m 1[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mDatabase indexes[2m > [22mshould have proper indexes for performance[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Variance Tracking Database Schema[2m > [22mDatabase views[2m > [22mshould query active_baselines view[39m[32m 14[2mms[22m[39m
[31m     â†’ expected [] to have a length of 1 but got +0[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mDatabase views[2m > [22mshould query critical_alerts view[32m 2[2mms[22m[39m
   [32mâœ“[39m Variance Tracking Database Schema[2m > [22mDatabase views[2m > [22mshould query variance_summary view[32m 2[2mms[22m[39m
   [33m[2mâœ“[22m[39m Variance Tracking Database Schema[2m > [22mDatabase triggers[2m > [22mshould auto-update updated_at on record modification [33m 512[2mms[22m[39m
[90mstdout[2m | tests/unit/services/monte-carlo-engine.test.ts[2m > [22m[2mMonteCarloEngine[2m > [22m[2mPortfolio Simulation[2m > [22m[2mrunPortfolioSimulation[2m > [22m[2mshould validate configuration parameters
[22m[39m[Monte Carlo] Capped runs from 100000 to 50000 (mode: prod)

[90mstdout[2m | tests/unit/api/portfolio-intelligence.test.ts
[22m[39m[breaker-registry] Registered breaker: redis

[10:17:20.848] [32mINFO[39m (7924): [36mCreating Redis client[39m
    [35mconnection[39m: "localhost:6379/0"
 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/flags-hardened.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[33m 1032[2mms[22m[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mClient Flags API[2m > [22mshould return flags with ETag and Cache-Control headers[39m[32m 10[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mClient Flags API[2m > [22mshould handle conditional GET with ETag (304 Not Modified)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'headers')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mClient Flags API[2m > [22mshould support user context for targeting[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mAdmin Authentication[2m > [22mshould reject requests without token[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mAdmin Authentication[2m > [22mshould reject invalid tokens[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mAdmin Authentication[2m > [22mshould accept valid admin token[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mAdmin Authentication[2m > [22mshould enforce RBAC - read-only access[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mAdmin Authentication[2m > [22mshould reject insufficient privileges for admin operations[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mConcurrency Control[2m > [22mshould require If-Match header for updates[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mConcurrency Control[2m > [22mshould detect version conflicts (409)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mConcurrency Control[2m > [22mshould support dry-run mode[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mSecurity Headers[2m > [22mshould include security headers on flag endpoints[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'headers')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mError Handling[2m > [22mshould gracefully handle malformed JSON[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Hardened Flag System[2m > [22mError Handling[2m > [22mshould validate required fields[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/flags-routes.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[33m 1034[2mms[22m[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mClient Flags Endpoint[2m > [22mshould return 200 with proper headers[39m[32m 11[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mClient Flags Endpoint[2m > [22mshould only expose client-safe flags[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'json')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mClient Flags Endpoint[2m > [22mshould handle user context targeting[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mFlag Status Endpoint[2m > [22mshould return system status[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Authentication[2m > [22mshould deny access without token[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Authentication[2m > [22mshould deny access with invalid token[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Authentication[2m > [22mshould allow access with valid dev token (dev mode)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Security[2m > [22mshould have no-cache headers on admin endpoints[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'headers')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Security[2m > [22mshould enforce rate limiting on admin routes[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Authorization[2m > [22mshould require flag_read role for GET operations[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mAdmin Routes Authorization[2m > [22mshould require flag_admin role for write operations[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mConcurrency Control[2m > [22mshould require If-Match header for updates[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mConcurrency Control[2m > [22mshould detect version conflicts[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mError Handling[2m > [22mshould validate request payload[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mError Handling[2m > [22mshould handle malformed JSON gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mKill Switch[2m > [22mshould require admin auth for kill switch operations[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
[31m   [31mÃ—[31m Flag Routes Integration[2m > [22mKill Switch[2m > [22mshould accept authenticated kill switch request[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading 'status')[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/services/performance-prediction.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 131[2mms[22m[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould generate predictions for all fund metrics[39m[32m 29[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould handle different model types[39m[32m 11[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould respect prediction horizon[39m[32m 4[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould handle different confidence levels[39m[32m 4[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould fail with insufficient historical data[32m 3[2mms[22m[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould store predictions in database[39m[32m 2[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mLinear Regression Model[2m > [22mshould produce reasonable predictions for trending data[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mLinear Regression Model[2m > [22mshould calculate proper confidence intervals[39m[32m 2[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mExponential Smoothing Model[2m > [22mshould handle volatile time series data[39m[32m 6[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mPolynomial Regression Model[2m > [22mshould handle non-linear patterns[39m[32m 5[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mPolynomial Regression Model[2m > [22mshould fall back to linear for ill-conditioned data[39m[32m 3[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mEnsemble Model[2m > [22mshould combine multiple models effectively[39m[32m 4[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mEnsemble Model[2m > [22mshould weight models based on accuracy[39m[32m 4[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould identify upward trends correctly[32m 3[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould identify downward trends[32m 2[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould identify stable trends[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould detect seasonality when present[39m[32m 16[2mms[22m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould fail with insufficient data[32m 1[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mAnomaly Detection[2m > [22mdetectAnomalies[2m > [22mshould identify statistical outliers[32m 2[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mAnomaly Detection[2m > [22mdetectAnomalies[2m > [22mshould handle different sensitivity levels[32m 1[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mAnomaly Detection[2m > [22mdetectAnomalies[2m > [22mshould return no anomalies for normal data[32m 0[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould analyze fund cohort performance[32m 2[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould determine fund stage correctly based on age[32m 1[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould handle missing fund[32m 1[2mms[22m[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould calculate J-curve correctly[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mScenario Generation[2m > [22mgenerateScenarios[2m > [22mshould generate multiple what-if scenarios[39m[32m 4[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle large datasets efficiently[39m[32m 2[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle missing data points gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould validate prediction accuracy calculations[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle edge cases in time series[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould query historical data with correct parameters[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould store predictions with correct metadata[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
   [32mâœ“[39m PerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould handle database query errors gracefully[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mModel Validation and Benchmarking[2m > [22mshould maintain prediction quality across different data patterns[39m[32m 2[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31mÃ—[31m PerformancePredictionEngine[2m > [22mModel Validation and Benchmarking[2m > [22mshould provide consistent predictions for stable time series[39m[32m 1[2mms[22m[39m
[31m     â†’ Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/services/variance-tracking.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m16 failed[39m[2m)[22m[32m 147[2mms[22m[39m
   [32mâœ“[39m BaselineService[2m > [22mcreateBaseline[2m > [22mshould create a baseline with all required fields[32m 8[2mms[22m[39m
   [32mâœ“[39m BaselineService[2m > [22mcreateBaseline[2m > [22mshould throw error when no fund metrics available[32m 4[2mms[22m[39m
[31m   [31mÃ—[31m BaselineService[2m > [22mcreateBaseline[2m > [22mshould set first baseline as default[39m[32m 21[2mms[22m[39m
[31m     â†’ expected undefined to be true // Object.is equality[39m
[31m   [31mÃ—[31m BaselineService[2m > [22mcreateBaseline[2m > [22mshould not set as default when other defaults exist[39m[32m 4[2mms[22m[39m
[31m     â†’ expected undefined to be false // Object.is equality[39m
   [32mâœ“[39m BaselineService[2m > [22mgetBaselines[2m > [22mshould retrieve baselines with filters[32m 4[2mms[22m[39m
   [32mâœ“[39m BaselineService[2m > [22mgetBaselines[2m > [22mshould return all active baselines when no filters provided[32m 1[2mms[22m[39m
   [32mâœ“[39m BaselineService[2m > [22msetDefaultBaseline[2m > [22mshould update default baseline correctly[32m 3[2mms[22m[39m
   [32mâœ“[39m BaselineService[2m > [22mdeactivateBaseline[2m > [22mshould deactivate baseline[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould generate comprehensive variance report[39m[32m 12[2mms[22m[39m
[31m     â†’ expected { id: 'baseline-id' } to deeply equal { id: 'test-id' }[39m
   [32mâœ“[39m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould throw error when baseline not found[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould calculate variance correctly[39m[32m 2[2mms[22m[39m
[31m     â†’ expected undefined to be defined[39m
[31m   [31mÃ—[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould identify significant variances[39m[32m 3[2mms[22m[39m
[31m     â†’ expected undefined to be 'high' // Object.is equality[39m
[31m   [31mÃ—[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould trigger alerts when thresholds are breached[39m[32m 5[2mms[22m[39m
[31m     â†’ expected undefined to be defined[39m
[31m   [31mÃ—[31m AlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould create alert rule with all parameters[39m[32m 6[2mms[22m[39m
[31m     â†’ expected { id: 'baseline-id' } to deeply equal { id: 'test-id' }[39m
[31m   [31mÃ—[31m AlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould use default values for optional parameters[39m[32m 3[2mms[22m[39m
[31m     â†’ expected undefined to be 'warning' // Object.is equality[39m
[31m   [31mÃ—[31m AlertManagementService[2m > [22mcreateAlert[2m > [22mshould create performance alert[39m[32m 3[2mms[22m[39m
[31m     â†’ expected { id: 'baseline-id' } to deeply equal { id: 'test-id' }[39m
[31m   [31mÃ—[31m AlertManagementService[2m > [22macknowledgeAlert[2m > [22mshould acknowledge alert with notes[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading '0')[39m
[31m   [31mÃ—[31m AlertManagementService[2m > [22mresolveAlert[2m > [22mshould resolve alert with resolution notes[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot read properties of undefined (reading '0')[39m
   [32mâœ“[39m AlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould retrieve active alerts with filters[32m 2[2mms[22m[39m
   [32mâœ“[39m AlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould return all active alerts when no filters provided[32m 1[2mms[22m[39m
   [32mâœ“[39m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould perform complete analysis workflow[32m 2[2mms[22m[39m
   [32mâœ“[39m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould use provided baseline ID[32m 1[2mms[22m[39m
   [32mâœ“[39m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould throw error when no default baseline exists[32m 1[2mms[22m[39m
   [32mâœ“[39m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould generate alerts when variance thresholds are exceeded[32m 6[2mms[22m[39m
   [32mâœ“[39m VarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould provide access to all sub-services[32m 1[2mms[22m[39m
   [32mâœ“[39m VarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould coordinate between services in complete analysis[32m 4[2mms[22m[39m
[31m   [31mÃ—[31m Edge Cases and Error Handling[2m > [22mshould handle missing portfolio data gracefully[39m[32m 9[2mms[22m[39m
[31m     â†’ expected { id: 'operation-id', â€¦(1) } to deeply equal { id: 'test-id' }[39m
   [32mâœ“[39m Edge Cases and Error Handling[2m > [22mshould handle database transaction failures[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Edge Cases and Error Handling[2m > [22mshould handle invalid variance calculations[39m[32m 5[2mms[22m[39m
[31m     â†’ expected { id: 'operation-id', â€¦(1) } to deeply equal { id: 'test-id' }[39m
[31m   [31mÃ—[31m Edge Cases and Error Handling[2m > [22mshould handle alert rule evaluation edge cases[39m[32m 2[2mms[22m[39m
[31m     â†’ expected true to be false // Object.is equality[39m
[31m   [31mÃ—[31m Performance and Scalability[2m > [22mshould handle large portfolio datasets efficiently[39m[32m 12[2mms[22m[39m
[31m     â†’ expected { id: 'operation-id', â€¦(1) } to deeply equal { id: 'test-id' }[39m
[31m   [31mÃ—[31m Performance and Scalability[2m > [22mshould handle multiple concurrent variance calculations[39m[32m 9[2mms[22m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/api/reserves-api.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 1513[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould handle portfolio with more than 3 companies (fix for truncation bug)[32m 176[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould apply pagination with limit parameter[32m 131[2mms[22m[39m
[31m   [31mÃ—[31m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould apply pagination with offset parameter[39m[32m 132[2mms[22m[39m
[31m     â†’ expected '00000000-0000-0000-0000-000000000003' to be '3' // Object.is equality[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould enforce maximum limit of 500[32m 15[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould use default limit of 100 when not specified[32m 135[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould accept date strings and convert to ISO format (fix for date schema)[32m 129[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould parse boolean query params from strings (fix for query param parsing)[32m 116[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould handle case-insensitive priority values[32m 122[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould ignore unknown query parameters (default Zod behavior)[32m 127[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould handle string "1" and "0" as boolean values[32m 122[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould validate minimum offset of 0[32m 23[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould handle empty portfolio[32m 120[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mPOST /api/reserves/calculate[2m > [22mshould include pagination metadata in response[32m 118[2mms[22m[39m
[31m   [31mÃ—[31m Reserves API[2m > [22mPOST /api/reserves/calculate-protected[2m > [22mshould support pagination in protected endpoint[39m[32m 19[2mms[22m[39m
[31m     â†’ expected 200 "OK", got 500 "Internal Server Error"[39m
   [32mâœ“[39m Reserves API[2m > [22mGET /api/reserves/health[2m > [22mshould return health status[32m 11[2mms[22m[39m
   [32mâœ“[39m Reserves API[2m > [22mGET /api/reserves/config[2m > [22mshould return API configuration[32m 7[2mms[22m[39m
   [32mâœ“[39m Zod Schema Coercion Tests[2m > [22mshould coerce date strings to Date objects and transform to ISO strings[32m 1[2mms[22m[39m
   [32mâœ“[39m Zod Schema Coercion Tests[2m > [22mshould coerce boolean strings to boolean values[32m 1[2mms[22m[39m
   [32mâœ“[39m Zod Schema Coercion Tests[2m > [22mshould handle enum with case transformation[32m 0[2mms[22m[39m
   [32mâœ“[39m Zod Schema Coercion Tests[2m > [22mshould coerce numeric strings to numbers[32m 0[2mms[22m[39m
   [32mâœ“[39m Zod Schema Coercion Tests[2m > [22mshould reject invalid values with coercion[32m 1[2mms[22m[39m
[90mstdout[2m | tests/unit/truth-cases/runner.test.ts[2m > [22m[2mTruth Cases: Coverage Summary[2m > [22m[2mreports total scenario counts across all modules
[22m[39mTruth-Case Scenario Counts: {
  xirr: [33m50[39m,
  [32m'waterfall-tier'[39m: [33m15[39m,
  [32m'waterfall-ledger'[39m: [33m14[39m,
  fees: [33m10[39m,
  capitalAllocation: [33m20[39m,
  exitRecycling: [33m20[39m,
  total: [33m129[39m
}

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/truth-cases/runner.test.ts [2m([22m[2m64 tests[22m[2m | [22m[31m31 failed[39m[2m | [22m[33m5 skipped[39m[2m)[22m[32m 118[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m01-simple-positive-return: Canonical 2-cashflow case: 2.5x return over 5 years yields ~20.10% IRR. Excel validated.[32m 4[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m02-negative-return-loss: 90% loss over 5 years yields -36.89% annualized IRR. Tests negative rate handling.[32m 2[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m03-multi-round-partial-distributions: Seed + Series A + partial exit + final NAV. Tests multi-round VC fund pattern.[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m04-quarterly-flows: Quarterly follow-on rounds + large exit spike. Tests frequent cashflow spacing.[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m05-zero-return-breakeven: Exact 1x return (breakeven) yields 0% IRR. Tests numerical stability near zero.[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m06-newton-success-smooth: Verify Newton converges in <10 iterations for typical case.[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22m07-newton-failure-bisection-fallback: Multiple sign changes within 3 months stress Newton-Raphson. Brent or bisection should succeed.[39m[32m 12[2mms[22m[39m
[31m     â†’ expected null not to be null[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m08-bisection-only-mode: Verify bisection produces correct result (slower convergence expected).[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22m09-convergence-tolerance-boundary: Higher precision should yield same result but with more iterations.[39m[32m 3[2mms[22m[39m
[31m     â†’ expected null not to be null[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m10-maximum-iterations-reached: Insufficient iterations should fail gracefully with null (not throw).[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m11-excel-actual365-date-convention: Golden set test: Excel XIRR = 0.201034... (8 decimal precision).[32m 0[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m12-same-day-cashflow-aggregation: Same-day flows aggregate to single -$10M on 2020-01-01. Result matches scenario 01.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22m13-leap-year-handling: 2-day period in leap year. Actual/365 uses 365 denominator always (not 366). Excel parity.[39m[32m 4[2mms[22m[39m
[31m     â†’ expected 5.154473231008948 to be close to 4.284325690000001, received difference is 0.8701475410089472, but expected 5e-7[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m14-date-ordering-unsorted: Reverse-sorted input should yield same result as scenario 01 (order-invariant).[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m15-timezone-independent: PST and IST timestamps normalize to UTC midnight. Should match scenario 01.[32m 0[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m16-no-sign-change-all-positive: All-positive cashflows violate IRR definition. Should return null.[32m 0[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m17-no-sign-change-all-negative: All-negative cashflows violate IRR definition. Should return null.[32m 0[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m18-insufficient-cashflows-single: IRR requires at least 2 cashflows. Excel would return #NUM! error.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22m19-out-of-bounds-extreme-rate: Extreme short-term returns yield rates >1000%. Implementation clamps IRR at 900% to avoid unusable values.[39m[32m 2[2mms[22m[39m
[31m     â†’ expected null not to be null[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m20-floating-point-precision-tiny-amounts: Tiny amounts (cents) should yield same IRR as scenario 01 (scale-invariant).[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22m21-typical-vc-fund-10year: Typical VC pattern: early calls, mid-life exits, terminal NAV. IRR ~18-22% expected.[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.16424381107596514 to be close to 0.1845777397, received difference is 0.020333928624034853, but expected 5e-7[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m22-early-exit-high-irr: 10x in 3 years â†’ 115.4% IRR. Excel validated.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22m23-late-exit-lower-irr: 5x over 10 years â†’ ~17.5% IRR. Time value of money effect.[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.17459306770563215 to be close to 0.1746172846, received difference is 0.000024216894367851127, but expected 5e-7[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m24-quarterly-recycling: Recycling scenario: early exits fund follow-on investments. Tests sign-change robustness.[32m 0[2mms[22m[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22m25-nav-heavy-terminal-value: Terminal-value-heavy scenario. IRR driven primarily by final NAV, not distributions.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 15: Biannual Distributions: Consistent semiannual returns over 3 years[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.11045943270411557 to be close to 0.1103798003, received difference is 0.00007963240411557049, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 16: Waterfall Exit: Multiple tranches of returns simulating preferred returns[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.061580524719819035 to be close to 0.0615371041, received difference is 0.00004342061981903872, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 17: Bridge Financing: Short-term bridge loan scenario[39m[32m 3[2mms[22m[39m
[31m     â†’ expected 0.18497309664368303 to be close to 0.1848354498, received difference is 0.00013764684368303137, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 18: Down Round: Investment with down round (partial loss)[39m[32m 2[2mms[22m[39m
[31m     â†’ expected -0.06157541431760786 to be close to -0.0615345924, received difference is 0.000040821917607861136, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 19: Dividend Recapitalization: Large dividend followed by eventual exit[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.18818738207496633 to be close to 0.1880471591, received difference is 0.0001402229749663253, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 20: Penny Stock Volatility: Small amounts with high percentage swings[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 2.724684878066269 to be close to 2.7213339602, received difference is 0.0033509178662689543, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 21: Leap Year Edge: Cashflows spanning leap year boundary[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.14967069012266612 to be close to 0.1495609411, received difference is 0.0001097490226661113, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 22: Long Hold Moderate Return: 10-year hold with modest 8% IRR[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.07998837344209463 to be close to 0.0799314924, received difference is 0.000056881042094628076, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 23: Turnaround Story: Multiple injections before profitable exit[39m[32m 13[2mms[22m[39m
[31m     â†’ expected 0.22226281463491065 to be close to 0.2220949186, received difference is 0.0001678960349106584, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 24: Quarterly Dividends + Exit: Regular quarterly dividends plus final exit[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.05324276187103312 to be close to 0.0532053665, received difference is 0.00003739537103312346, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 25: Shallow Negative: Small loss over long period (-2%)[39m[32m 2[2mms[22m[39m
[31m     â†’ expected -0.01999204514362336 to be close to -0.0199784989, received difference is 0.000013546243623360765, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 1: Standard 2-flow: Simple 5-year doubling, ~14.87%[39m[32m 7[2mms[22m[39m
[31m     â†’ expected 0.1486329860010818 to be close to 0.148698355, received difference is 0.00006536899891820824, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 2: Rapid 3x: 3-year triple yields ~29.88%[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.44212910141096357 to be close to 0.2987638262, received difference is 0.14336527521096354, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 3: Multi-stage exit: Two-stage exit with interim distribution[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.14196360967140828 to be close to 0.2086834181, received difference is 0.06671980842859171, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 4: Explosive growth: Unicorn-style 10x in 4 years (>170% IRR)[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.7782794100389228 to be close to 0.7788007831, received difference is 0.000521373061077246, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 5: Modest hold: 10-year 8% annualized return[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.07998837344209463 to be close to 0.08, received difference is 0.000011626557905375368, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 6: Partial loss: 50% loss over 5 years yields -13.86% IRR[39m[32m 1[2mms[22m[39m
[31m     â†’ expected -0.1293998934494666 to be close to -0.1385627483, received difference is 0.00916285485053342, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 7: Near-zero: Small gain yields ~0.20% IRR[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.001991229099348247 to be close to 0.0019950331, received difference is 0.000003804000651753004, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 8: Multiple follow-ons: Multi-stage investment with tiered exits[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.16866554793868008 to be close to 0.1606838612, received difference is 0.007981686738680077, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 9: Extreme unicorn: 100x return in 6 years (explosive growth >100% IRR)[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 1.1540575356087264 to be close to 1.0307919095, received difference is 0.12326562610872638, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 10: Alternating signs: Follow-on investment before exit[39m[32m 0[2mms[22m[39m
[31m     â†’ expected 0.07166876837792775 to be close to 0.1189625766, received difference is 0.04729380822207224, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 11: Leap year precision: Cashflow dates span Feb 29, 2024[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.16985124753370812 to be close to 0.1313377761, received difference is 0.03851347143370812, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 12: Annual dividends: Regular annual distributions before exit[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.04516329526152403 to be close to 0.0793655649, received difference is 0.034202269638475974, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 13: Shallow loss spread: 10% loss over 10 years yields -1.05% annualized[39m[32m 1[2mms[22m[39m
[31m     â†’ expected -0.010479314797693777 to be close to -0.0105360516, received difference is 0.00005673680230622313, but expected 5e-7[39m
[31m   [31mÃ—[31m Truth Cases: XIRR (Phase 0)[2m > [22mGolden Case 14: Quick flip: 1-year 50% gain yields ~50% IRR[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.49875421093199146 to be close to 0.5, received difference is 0.0012457890680085404, but expected 5e-7[39m
   [32mâœ“[39m Truth Cases: XIRR (Phase 0)[2m > [22mXIRR truth table summary[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: Waterfall-Tier (Phase 1A - Structural)[2m > [22mloads waterfall-tier truth cases[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: Waterfall-Tier (Phase 1A - Structural)[2m > [22mwaterfall-tier scenarios have required structure[32m 4[2mms[22m[39m
   [2m[90mâ†“[39m[22m Truth Cases: Waterfall-Tier (Phase 1A - Structural)[2m > [22m[GATE] Waterfall-Tier execution requires XIRR >= 80% pass rate
   [32mâœ“[39m Truth Cases: Waterfall-Ledger (Phase 1A - Structural)[2m > [22mloads waterfall-ledger truth cases[32m 1[2mms[22m[39m
   [32mâœ“[39m Truth Cases: Waterfall-Ledger (Phase 1A - Structural)[2m > [22mwaterfall-ledger scenarios have required structure[32m 2[2mms[22m[39m
   [2m[90mâ†“[39m[22m Truth Cases: Waterfall-Ledger (Phase 1A - Structural)[2m > [22m[GATE] Waterfall-Ledger execution requires XIRR >= 80% pass rate
   [32mâœ“[39m Truth Cases: Fees (Phase 1B+ - Load Only)[2m > [22mloads fees truth cases[32m 1[2mms[22m[39m
   [2m[90mâ†“[39m[22m Truth Cases: Fees (Phase 1B+ - Load Only)[2m > [22m[GATE] Fees execution requires Waterfall-Tier + Ledger completion
   [32mâœ“[39m Truth Cases: Capital Allocation (Phase 1B+ - Load Only)[2m > [22mloads capital allocation truth cases[32m 0[2mms[22m[39m
   [2m[90mâ†“[39m[22m Truth Cases: Capital Allocation (Phase 1B+ - Load Only)[2m > [22m[GATE] Capital Allocation execution requires Waterfall-Tier + Ledger completion
   [32mâœ“[39m Truth Cases: Exit Recycling (Phase 1B+ - Load Only)[2m > [22mloads exit recycling truth cases[32m 0[2mms[22m[39m
   [2m[90mâ†“[39m[22m Truth Cases: Exit Recycling (Phase 1B+ - Load Only)[2m > [22m[GATE] Exit Recycling execution requires Waterfall-Tier + Ledger completion
   [32mâœ“[39m Truth Cases: Coverage Summary[2m > [22mreports total scenario counts across all modules[32m 7[2mms[22m[39m
[90mstdout[2m | tests/unit/engines/monte-carlo.test.ts
[22m[39m[Monte Carlo] Mode: PRODUCTION, Default runs: 10000, Max runs: 50000

[90mstdout[2m | tests/unit/engines/monte-carlo.test.ts[2m > [22m[2mMonteCarloEngine - Configuration Validation[2m > [22m[2mshould reject too many runs
[22m[39m[Monte Carlo] Capped runs from 100000 to 50000 (mode: prod)

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/database/time-travel-schema.test.ts [2m([22m[2m23 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[32m 83[2mms[22m[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould create snapshot with all required fields[39m[32m 23[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
   [32mâœ“[39m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould enforce valid snapshot_type enum[32m 6[2mms[22m[39m
   [32mâœ“[39m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould enforce valid trigger_event enum[32m 2[2mms[22m[39m
   [32mâœ“[39m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould enforce valid status enum[32m 3[2mms[22m[39m
   [32mâœ“[39m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould validate data_integrity_score bounds (0.00 to 1.00)[32m 10[2mms[22m[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould support complex JSONB fields[39m[32m 3[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould support metadata and tags[39m[32m 2[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould create snapshot comparison with all required fields[39m[32m 2[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould enforce valid comparison_type enum[39m[32m 5[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould prevent comparison of snapshot with itself[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould validate confidence_score bounds (0.00 to 1.00)[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould create timeline event with all required fields[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould enforce valid event_type enum[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould enforce valid severity enum[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould support complex event data structures[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould create restoration log with all required fields[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould enforce valid restoration_type enum[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould enforce valid status enum[39m[32m 0[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould enforce restoration_duration_ms >= 0 constraint[39m[32m 1[2mms[22m[39m
[31m     â†’ Check constraint 'data_integrity_score' failed[39m
   [32mâœ“[39m Time-Travel Analytics Database Schema[2m > [22mDatabase indexes[2m > [22mshould have proper indexes for time-travel performance[32m 4[2mms[22m[39m
   [32mâœ“[39m Time-Travel Analytics Database Schema[2m > [22mDatabase constraints and foreign keys[2m > [22mshould enforce foreign key relationships[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mJSON data validation[2m > [22mshould handle malformed JSON gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Invalid enum value 'manual' for column 'snapshot_type'. Expected one of: quarterly, annual, milestone, adhoc, checkpoint[39m
[31m   [31mÃ—[31m Time-Travel Analytics Database Schema[2m > [22mJSON data validation[2m > [22mshould handle deeply nested JSON structures[39m[32m 1[2mms[22m[39m
[31m     â†’ Invalid enum value 'manual' for column 'snapshot_type'. Expected one of: quarterly, annual, milestone, adhoc, checkpoint[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/engines/monte-carlo.test.ts [2m([22m[2m56 tests[22m[2m | [22m[31m50 failed[39m[2m)[22m[32m 128[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine - Initialization[2m > [22mshould initialize without seed[32m 1[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine - Initialization[2m > [22mshould initialize with deterministic seed[32m 0[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine - Initialization[2m > [22mshould produce deterministic results with same seed[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m MonteCarloEngine - Configuration Validation[2m > [22mshould reject too few runs[39m[32m 28[2mms[22m[39m
[31m     â†’ expected [Function] to throw error including 'Simulation runs must be between 100 aâ€¦' but got 'Portfolio simulation failed: Simulatiâ€¦'[39m
[31m   [31mÃ—[31m MonteCarloEngine - Configuration Validation[2m > [22mshould reject too many runs[39m[32m 24[2mms[22m[39m
[31m     â†’ expected [Function] to throw error including 'Simulation runs must be between 100 aâ€¦' but got 'Portfolio simulation failed: No suitaâ€¦'[39m
   [32mâœ“[39m MonteCarloEngine - Configuration Validation[2m > [22mshould reject invalid time horizon (too short)[32m 1[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine - Configuration Validation[2m > [22mshould reject invalid time horizon (too long)[32m 1[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine - Configuration Validation[2m > [22mshould accept valid configuration[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m MonteCarloEngine - Simulation Runs[2m > [22mshould complete simulation successfully[39m[32m 6[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Simulation Runs[2m > [22mshould generate correct number of scenarios[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Simulation Runs[2m > [22mshould track execution time[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Simulation Runs[2m > [22mshould use deterministic seed for reproducibility[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Percentile Calculations[2m > [22mshould calculate P5 percentile[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Percentile Calculations[2m > [22mshould calculate P25 percentile[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Percentile Calculations[2m > [22mshould calculate P50 (median) percentile[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Percentile Calculations[2m > [22mshould calculate P75 percentile[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Percentile Calculations[2m > [22mshould calculate P95 percentile[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Percentile Calculations[2m > [22mshould maintain percentile ordering[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate Value at Risk (VaR)[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate Conditional Value at Risk (CVaR)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate probability of loss[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate Sharpe ratio[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate Sortino ratio[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate maximum drawdown[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould calculate downside risk[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Risk Metrics[2m > [22mshould ensure CVaR is worse than VaR[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Reserve Optimization[2m > [22mshould provide reserve optimization recommendations[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Reserve Optimization[2m > [22mshould calculate current reserve ratio[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Reserve Optimization[2m > [22mshould calculate optimal reserve ratio[39m[32m 11[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Reserve Optimization[2m > [22mshould calculate improvement potential[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Reserve Optimization[2m > [22mshould provide coverage scenarios[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Reserve Optimization[2m > [22mshould provide allocation recommendations[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Scenario Analysis[2m > [22mshould generate bull market scenario[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Scenario Analysis[2m > [22mshould generate bear market scenario[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Scenario Analysis[2m > [22mshould generate stress test scenario[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Scenario Analysis[2m > [22mshould generate base case scenario[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Scenario Analysis[2m > [22mshould maintain scenario ordering[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Actionable Insights[2m > [22mshould provide primary recommendations[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Actionable Insights[2m > [22mshould provide risk warnings[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Actionable Insights[2m > [22mshould identify opportunity areas[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Actionable Insights[2m > [22mshould provide key metrics comparison[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Actionable Insights[2m > [22mshould validate key metrics structure[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Performance Distributions[2m > [22mshould calculate IRR distribution[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Performance Distributions[2m > [22mshould calculate Multiple distribution[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Performance Distributions[2m > [22mshould calculate DPI distribution[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Performance Distributions[2m > [22mshould calculate TVPI distribution[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Performance Distributions[2m > [22mshould calculate Total Value distribution[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Performance Distributions[2m > [22mshould calculate confidence intervals[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Output Structure[2m > [22mshould return complete simulation results structure[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Output Structure[2m > [22mshould include original config in results[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Edge Cases[2m > [22mshould handle minimum number of runs[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Edge Cases[2m > [22mshould handle large number of runs[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Edge Cases[2m > [22mshould handle short time horizon[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Edge Cases[2m > [22mshould handle long time horizon[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Edge Cases[2m > [22mshould handle missing baseline gracefully[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
[31m   [31mÃ—[31m MonteCarloEngine - Edge Cases[2m > [22mshould handle missing fund gracefully[39m[32m 0[2mms[22m[39m
[31m     â†’ Cannot find module '@/server/db'
Require stack:
- C:\dev\Updog_restore\tests\unit\engines\monte-carlo.test.ts[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/interleaved-thinking.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[33m 2247[2mms[22m[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/query[2m > [22mshould execute a simple query without tools[39m[33m 2224[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/query[2m > [22mshould execute calculator tool[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/query[2m > [22mshould validate query request schema[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/query[2m > [22mshould validate options schema[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/query[2m > [22mshould handle API errors gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/query[2m > [22mshould handle missing API key[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/analyze[2m > [22mshould perform quick analysis[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/analyze[2m > [22mshould perform deep analysis with context[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/analyze[2m > [22mshould validate analyze request schema[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mPOST /api/interleaved-thinking/analyze[2m > [22mshould default to quick depth[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mGET /api/interleaved-thinking/usage[2m > [22mshould return available tools and pricing[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mGET /api/interleaved-thinking/health[2m > [22mshould return healthy status when API key and DB are configured[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mGET /api/interleaved-thinking/health[2m > [22mshould return degraded status when API key is missing[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mDatabase Query Tool[2m > [22mshould execute valid SELECT query[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mDatabase Query Tool[2m > [22mshould reject non-SELECT queries[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mCalculator Tool[2m > [22mshould handle complex mathematical expressions[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[31m   [31mÃ—[31m Interleaved Thinking API[2m > [22mCalculator Tool[2m > [22mshould handle calculator errors gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find package 'mathjs' imported from 'C:/dev/Updog_restore/server/routes/interleaved-thinking.ts'[39m
[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mðŸš€ Starting VC Fund Tool Evaluation

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mðŸ“‹ Loaded 21 evaluation tasks
Processing task 1/21: Calculate carry for $100M fund with 20% carry and 8% hurdle (AMERICAN)

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 2/21: Calculate carry for $250M fund with 25% carry and 10% hurdle

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 3/21: Calculate carry for $75M fund with 15% carry and 6% hurdle (AMERICAN)

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 4/21: Calculate carry for $500M fund with 20% carry and 8% hurdle with catch-up

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 5/21: Calculate carry for small $30M fund with 20% carry and 7% hurdle

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 6/21: Calculate reserves for 60% deployed capital

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 7/21: Calculate reserves for 40% deployed capital

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 8/21: Calculate reserves for aggressive deployment

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 9/21: Calculate pacing for on-track fund

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 10/21: Calculate pacing for slow deployment

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 11/21: Calculate pacing for fast deployment

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 12/21: Multi-hurdle waterfall calculation

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 13/21: Vested carry calculation

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 14/21: Expected returns simulation

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 15/21: Portfolio outcome distribution

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 16/21: Vintage year performance

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 17/21: Sector cohort analysis

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 18/21: Zero hurdle waterfall

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 19/21: Maximum carry scenario

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 20/21: Invalid waterfall parameters

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39mProcessing task 21/21: Invalid fund size

[90mstdout[2m | tests/unit/tool-evaluation/waterfall-evaluator.test.ts[2m > [22m[2mTool Evaluation Framework[2m > [22m[2mFull Evaluation Suite[2m > [22m[2mshould run complete evaluation suite from XML
[22m[39m
ðŸ“Š Evaluation Summary:
âœ… Passed: 7/21 (33.3%)
â±ï¸ Avg Duration: 0ms

By Category:
  waterfall: 7/11 (63.6%)
  reserves: 0/3 (0.0%)
  pacing: 0/3 (0.0%)
  monte-carlo: 0/2 (0.0%)
  cohort: 0/2 (0.0%)

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/fund-setup-utils.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[32m 79[2mms[22m[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 1 to fund-basics[32m 4[2mms[22m[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 2 to capital-structure[39m[32m 14[2mms[22m[39m
[31m     â†’ expected 'investment-rounds' to be 'capital-structure' // Object.is equality[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 3 to investment-strategy[39m[32m 7[2mms[22m[39m
[31m     â†’ expected 'capital-structure' to be 'investment-strategy' // Object.is equality[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 4 to distributions[39m[32m 4[2mms[22m[39m
[31m     â†’ expected 'investment-strategy' to be 'distributions' // Object.is equality[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mdefaults to step 1 when no step param[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 5 to cashflow-management[39m[32m 3[2mms[22m[39m
[31m     â†’ expected 'distributions' to be 'cashflow-management' // Object.is equality[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mreturns not-found for invalid steps[39m[32m 4[2mms[22m[39m
[31m     â†’ expected 'cashflow-management' to be 'not-found' // Object.is equality[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles complex URLs correctly[39m[32m 3[2mms[22m[39m
[31m     â†’ expected 'capital-structure' to be 'investment-strategy' // Object.is equality[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles malformed URLs gracefully[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles whitespace correctly[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 'investment-rounds' to be 'capital-structure' // Object.is equality[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns 1 for null (missing param)[32m 0[2mms[22m[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns null for empty strings[32m 0[2mms[22m[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns the step for valid values[32m 1[2mms[22m[39m
   [32mâœ“[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mtrims whitespace[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns null for invalid values[39m[32m 3[2mms[22m[39m
[31m     â†’ expected '6' to be null // Object.is equality[39m
   [32mâœ“[39m fund-setup-utils[2m > [22misValidStep[2m > [22mreturns true for valid steps[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22misValidStep[2m > [22mreturns false for invalid steps[39m[32m 10[2mms[22m[39m
[31m     â†’ expected true to be false // Object.is equality[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mgetStepNumber[2m > [22mreturns correct step number for valid keys[39m[32m 2[2mms[22m[39m
[31m     â†’ expected '3' to be '2' // Object.is equality[39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mtype safety[2m > [22mVALID_STEPS contains exactly 1, 2, 3, 4, 5[39m[32m 9[2mms[22m[39m
[31m     â†’ expected [ '1', '2', '3', '4', '5', '6' ] to deeply equal [ '1', '2', '3', '4', '5' ][39m
[31m   [31mÃ—[31m fund-setup-utils[2m > [22mtype safety[2m > [22mNUM_TO_KEY maps all valid steps[39m[32m 4[2mms[22m[39m
[31m     â†’ expected [ '1', '2', '3', '4', '5', '6' ] to deeply equal [ '1', '2', '3', '4', '5' ][39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/tool-evaluation/waterfall-evaluator.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 73[2mms[22m[39m
   [32mâœ“[39m Tool Evaluation Framework[2m > [22mWaterfall Calculations[2m > [22mshould calculate AMERICAN waterfall correctly[32m 4[2mms[22m[39m
   [32mâœ“[39m Tool Evaluation Framework[2m > [22mWaterfall Calculations[2m > [22mshould calculate waterfall with higher carry percentage[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Tool Evaluation Framework[2m > [22mReserve Calculations[2m > [22mshould calculate reserve allocations correctly[39m[32m 11[2mms[22m[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [31mÃ—[31m Tool Evaluation Framework[2m > [22mPacing Analysis[2m > [22mshould calculate investment pacing metrics[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0 to be greater than 0[39m
   [32mâœ“[39m Tool Evaluation Framework[2m > [22mFull Evaluation Suite[2m > [22mshould run complete evaluation suite from XML[32m 31[2mms[22m[39m
   [32mâœ“[39m Tool Evaluation Framework[2m > [22mFull Evaluation Suite[2m > [22mshould parse XML evaluation files correctly[32m 5[2mms[22m[39m
[31m   [31mÃ—[31m Tool Evaluation Framework[2m > [22mTool Implementations[2m > [22mshould handle invalid waterfall parameters gracefully[39m[32m 10[2mms[22m[39m
[31m     â†’ expected true to be false // Object.is equality[39m
   [32mâœ“[39m Tool Evaluation Framework[2m > [22mTool Implementations[2m > [22mshould calculate reserves with correct ratios[32m 2[2mms[22m[39m
   [32mâœ“[39m Tool Evaluation Framework[2m > [22mTool Implementations[2m > [22mshould assess pacing correctly[32m 1[2mms[22m[39m
   [32mâœ“[39m Tool Accuracy Benchmarks[2m > [22mshould meet minimum accuracy threshold for waterfall calculations[32m 1[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/truth-cases/xirr.test.ts [2m([22m[2m51 tests[22m[2m | [22m[31m31 failed[39m[2m)[22m[32m 78[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m01-simple-positive-return: Canonical 2-cashflow case: 2.5x return over 5 years yields ~20.10% IRR. Excel validated.[32m 3[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m02-negative-return-loss: 90% loss over 5 years yields -36.89% annualized IRR. Tests negative rate handling.[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m03-multi-round-partial-distributions: Seed + Series A + partial exit + final NAV. Tests multi-round VC fund pattern.[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m04-quarterly-flows: Quarterly follow-on rounds + large exit spike. Tests frequent cashflow spacing.[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m05-zero-return-breakeven: Exact 1x return (breakeven) yields 0% IRR. Tests numerical stability near zero.[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m06-newton-success-smooth: Verify Newton converges in <10 iterations for typical case.[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22m07-newton-failure-bisection-fallback: Multiple sign changes within 3 months stress Newton-Raphson. Brent or bisection should succeed.[39m[32m 10[2mms[22m[39m
[31m     â†’ expected null not to be null[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m08-bisection-only-mode: Verify bisection produces correct result (slower convergence expected).[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22m09-convergence-tolerance-boundary: Higher precision should yield same result but with more iterations.[39m[32m 2[2mms[22m[39m
[31m     â†’ expected null not to be null[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m10-maximum-iterations-reached: Insufficient iterations should fail gracefully with null (not throw).[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m11-excel-actual365-date-convention: Golden set test: Excel XIRR = 0.201034... (8 decimal precision).[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m12-same-day-cashflow-aggregation: Same-day flows aggregate to single -$10M on 2020-01-01. Result matches scenario 01.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22m13-leap-year-handling: 2-day period in leap year. Actual/365 uses 365 denominator always (not 366). Excel parity.[39m[32m 4[2mms[22m[39m
[31m     â†’ expected 5.154473231008948 to be close to 4.284325690000001, received difference is 0.8701475410089472, but expected 5e-7[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m14-date-ordering-unsorted: Reverse-sorted input should yield same result as scenario 01 (order-invariant).[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m15-timezone-independent: PST and IST timestamps normalize to UTC midnight. Should match scenario 01.[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m16-no-sign-change-all-positive: All-positive cashflows violate IRR definition. Should return null.[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m17-no-sign-change-all-negative: All-negative cashflows violate IRR definition. Should return null.[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m18-insufficient-cashflows-single: IRR requires at least 2 cashflows. Excel would return #NUM! error.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22m19-out-of-bounds-extreme-rate: Extreme short-term returns yield rates >1000%. Implementation clamps IRR at 900% to avoid unusable values.[39m[32m 2[2mms[22m[39m
[31m     â†’ expected null not to be null[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m20-floating-point-precision-tiny-amounts: Tiny amounts (cents) should yield same IRR as scenario 01 (scale-invariant).[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22m21-typical-vc-fund-10year: Typical VC pattern: early calls, mid-life exits, terminal NAV. IRR ~18-22% expected.[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.16424381107596514 to be close to 0.1845777397, received difference is 0.020333928624034853, but expected 5e-7[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m22-early-exit-high-irr: 10x in 3 years â†’ 115.4% IRR. Excel validated.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22m23-late-exit-lower-irr: 5x over 10 years â†’ ~17.5% IRR. Time value of money effect.[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.17459306770563215 to be close to 0.1746172846, received difference is 0.000024216894367851127, but expected 5e-7[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m24-quarterly-recycling: Recycling scenario: early exits fund follow-on investments. Tests sign-change robustness.[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22m25-nav-heavy-terminal-value: Terminal-value-heavy scenario. IRR driven primarily by final NAV, not distributions.[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 15: Biannual Distributions: Consistent semiannual returns over 3 years[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.11045943270411557 to be close to 0.1103798003, received difference is 0.00007963240411557049, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 16: Waterfall Exit: Multiple tranches of returns simulating preferred returns[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.061580524719819035 to be close to 0.0615371041, received difference is 0.00004342061981903872, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 17: Bridge Financing: Short-term bridge loan scenario[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.18497309664368303 to be close to 0.1848354498, received difference is 0.00013764684368303137, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 18: Down Round: Investment with down round (partial loss)[39m[32m 1[2mms[22m[39m
[31m     â†’ expected -0.06157541431760786 to be close to -0.0615345924, received difference is 0.000040821917607861136, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 19: Dividend Recapitalization: Large dividend followed by eventual exit[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.18818738207496633 to be close to 0.1880471591, received difference is 0.0001402229749663253, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 20: Penny Stock Volatility: Small amounts with high percentage swings[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 2.724684878066269 to be close to 2.7213339602, received difference is 0.0033509178662689543, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 21: Leap Year Edge: Cashflows spanning leap year boundary[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.14967069012266612 to be close to 0.1495609411, received difference is 0.0001097490226661113, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 22: Long Hold Moderate Return: 10-year hold with modest 8% IRR[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.07998837344209463 to be close to 0.0799314924, received difference is 0.000056881042094628076, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 23: Turnaround Story: Multiple injections before profitable exit[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.22226281463491065 to be close to 0.2220949186, received difference is 0.0001678960349106584, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 24: Quarterly Dividends + Exit: Regular quarterly dividends plus final exit[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.05324276187103312 to be close to 0.0532053665, received difference is 0.00003739537103312346, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 25: Shallow Negative: Small loss over long period (-2%)[39m[32m 1[2mms[22m[39m
[31m     â†’ expected -0.01999204514362336 to be close to -0.0199784989, received difference is 0.000013546243623360765, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 1: Standard 2-flow: Simple 5-year doubling, ~14.87%[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.1486329860010818 to be close to 0.148698355, received difference is 0.00006536899891820824, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 2: Rapid 3x: 3-year triple yields ~29.88%[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.44212910141096357 to be close to 0.2987638262, received difference is 0.14336527521096354, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 3: Multi-stage exit: Two-stage exit with interim distribution[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.14196360967140828 to be close to 0.2086834181, received difference is 0.06671980842859171, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 4: Explosive growth: Unicorn-style 10x in 4 years (>170% IRR)[39m[32m 0[2mms[22m[39m
[31m     â†’ expected 0.7782794100389228 to be close to 0.7788007831, received difference is 0.000521373061077246, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 5: Modest hold: 10-year 8% annualized return[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.07998837344209463 to be close to 0.08, received difference is 0.000011626557905375368, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 6: Partial loss: 50% loss over 5 years yields -13.86% IRR[39m[32m 13[2mms[22m[39m
[31m     â†’ expected -0.1293998934494666 to be close to -0.1385627483, received difference is 0.00916285485053342, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 7: Near-zero: Small gain yields ~0.20% IRR[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.001991229099348247 to be close to 0.0019950331, received difference is 0.000003804000651753004, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 8: Multiple follow-ons: Multi-stage investment with tiered exits[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.16866554793868008 to be close to 0.1606838612, received difference is 0.007981686738680077, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 9: Extreme unicorn: 100x return in 6 years (explosive growth >100% IRR)[39m[32m 0[2mms[22m[39m
[31m     â†’ expected 1.1540575356087264 to be close to 1.0307919095, received difference is 0.12326562610872638, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 10: Alternating signs: Follow-on investment before exit[39m[32m 0[2mms[22m[39m
[31m     â†’ expected 0.07166876837792775 to be close to 0.1189625766, received difference is 0.04729380822207224, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 11: Leap year precision: Cashflow dates span Feb 29, 2024[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.16985124753370812 to be close to 0.1313377761, received difference is 0.03851347143370812, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 12: Annual dividends: Regular annual distributions before exit[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.04516329526152403 to be close to 0.0793655649, received difference is 0.034202269638475974, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 13: Shallow loss spread: 10% loss over 10 years yields -1.05% annualized[39m[32m 1[2mms[22m[39m
[31m     â†’ expected -0.010479314797693777 to be close to -0.0105360516, received difference is 0.00005673680230622313, but expected 5e-7[39m
[31m   [31mÃ—[31m XIRR Truth Cases (50 scenarios)[2m > [22mGolden Case 14: Quick flip: 1-year 50% gain yields ~50% IRR[39m[32m 0[2mms[22m[39m
[31m     â†’ expected 0.49875421093199146 to be close to 0.5, received difference is 0.0012457890680085404, but expected 5e-7[39m
   [32mâœ“[39m XIRR Truth Cases (50 scenarios)[2m > [22mtruth table covers all required categories[32m 1[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/stage-validation-mode.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[32m 55[2mms[22m[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22mreturns cached value within TTL (5s)[39m[32m 15[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22mfetches from Redis after TTL expires (>5s)[39m[32m 5[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22mfalls back to default on Redis timeout (100ms)[39m[32m 4[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22mvalidates Redis value is valid mode[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22mfalls back to cached value on Redis error[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22muses environment variable as default[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mgetStageValidationMode[2m > [22mignores invalid environment variable[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22msetStageValidationMode[2m > [22mupdates Redis and cache[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22msetStageValidationMode[2m > [22mvalidates input mode[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22msetStageValidationMode[2m > [22memits structured audit log[39m[32m 5[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22msetStageValidationMode[2m > [22muses default actor and reason if not provided[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mRedis connection failure[2m > [22mlogs error on connect failure but continues[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mTiming constants[2m > [22mrespects TTL_MS constant (5000ms)[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
[31m   [31mÃ—[31m Stage Validation Mode Store[2m > [22mTiming constants[2m > [22mrespects TIMEOUT_MS constant (100ms)[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/lib/stage-validation-mode'
Require stack:
- C:\dev\Updog_restore\tests\unit\stage-validation-mode.test.ts[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/xirr-golden-set.test.ts [2m([22m[2m18 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[32m 54[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 1: Simple 2-flow, 20.11% return (Excel validated)[39m[32m 14[2mms[22m[39m
[31m     â†’ expected 0.00006536899891820824 to be less than 1e-7[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 2: Multi-round with partial distributions (Excel validated)[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.17847275499836018 to be less than 1e-7[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 3: Monthly flows, irregular spacing[39m[32m 3[2mms[22m[39m
[31m     â†’ expected 0.0018677569282734008 to be less than 1e-7[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 4: Quarterly flows, large exit spike[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.07915059636807031 to be less than 1e-7[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 5: Negative IRR (loss scenario)[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 0.003828318782535464 to be less than 1e-7[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 6: Near-zero IRR (tiny gain)[39m[32m 1[2mms[22m[39m
[31m     â†’ expected 4.0391567300676785e-7 to be less than 1e-7[39m
   [32mâœ“[39m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 7: Exact zero return[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Very High Returns[2m > [22mCase 8: 10x return in 6 months (extreme)[39m[32m 6[2mms[22m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Very High Returns[2m > [22mCase 9: Very high multi-year return[39m[32m 3[2mms[22m[39m
[31m     â†’ expected 14.861411142538325 to be less than 1e-7[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mPathological Cases - Early Distribution + Follow-on[2m > [22mCase 10: Early dist then follow-on calls (complex)[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.2421878137487528 to be less than 1e-7[39m
   [32mâœ“[39m XIRR Golden Set - Excel Validated[2m > [22mInvalid Inputs - Should Return null[2m > [22mCase 11: All-positive flows (invalid)[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Golden Set - Excel Validated[2m > [22mInvalid Inputs - Should Return null[2m > [22mCase 12: All-negative flows (invalid)[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Golden Set - Excel Validated[2m > [22mTimezone & Date Normalization[2m > [22mCase 13: Mixed same-day flows (order invariant)[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Golden Set - Excel Validated[2m > [22mTimezone & Date Normalization[2m > [22mCase 14: UTC normalization sanity check[39m[32m 2[2mms[22m[39m
[31m     â†’ expected 0.00006536899891820824 to be less than 1e-7[39m
   [32mâœ“[39m XIRR Golden Set - Excel Validated[2m > [22mPerformance Benchmarks[2m > [22mShould compute standard case in < 10ms[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Golden Set - Excel Validated[2m > [22mPerformance Benchmarks[2m > [22mShould handle 100 flows in < 50ms[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Method Fallbacks[2m > [22mNewton should succeed for well-behaved case[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Method Fallbacks[2m > [22mShould fall back to Brent for Newton failure[39m[32m 5[2mms[22m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/request-id.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[32m 51[2mms[22m[39m
[31m   [31mÃ—[31m Request ID Middleware[2m > [22mshould use incoming X-Request-ID when provided[39m[32m 20[2mms[22m[39m
[31m     â†’ expected 'req_188862f1-6fa5-449c-b609-2a0a64587â€¦' to be 'client-provided-123' // Object.is equality[39m
   [32mâœ“[39m Request ID Middleware[2m > [22mshould generate new request ID when not provided[32m 5[2mms[22m[39m
   [32mâœ“[39m Request ID Middleware[2m > [22mshould generate new ID for empty string header[32m 2[2mms[22m[39m
   [32mâœ“[39m Request ID Middleware[2m > [22mshould generate new ID for whitespace-only header[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Request ID Middleware[2m > [22mshould always set response header[39m[32m 7[2mms[22m[39m
[31m     â†’ expected '  ' to match /^req_[a-f0-9-]+$/[39m
[31m   [31mÃ—[31m Request ID Middleware[2m > [22mshould add child logger when global logger exists[39m[32m 11[2mms[22m[39m
[31m     â†’ expected "spy" to be called with arguments: [ { requestId: 'test-123', â€¦(2) } ][90m

Received: 

[1m  1st spy call:

[22m[2m  [[22m
[2m    {[22m
[2m      "method": "GET",[22m
[2m      "path": "/api/test",[22m
[32m-     "requestId": "test-123",[90m
[31m+     "requestId": "req_30ff3299-316d-4e26-8de5-e7c95468f475",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
   [32mâœ“[39m Request ID Middleware[2m > [22mshould track start time for duration calculation[32m 1[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/reference-formulas.test.ts [2m([22m[2m24 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 51[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mDPI (Distributions to Paid-In)[2m > [22mshould calculate DPI correctly[32m 3[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mDPI (Distributions to Paid-In)[2m > [22mshould return 0 when called capital is 0[32m 2[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mDPI (Distributions to Paid-In)[2m > [22mshould handle decimal precision[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mTVPI (Total Value to Paid-In)[2m > [22mshould calculate TVPI correctly[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mTVPI (Total Value to Paid-In)[2m > [22mshould return 0 when called capital is 0[32m 0[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mTVPI (Total Value to Paid-In)[2m > [22mshould satisfy TVPI â‰¥ DPI invariant[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mGross MOIC (Money-on-Invested-Capital before fees)[2m > [22mshould calculate Gross MOIC correctly[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mGross MOIC (Money-on-Invested-Capital before fees)[2m > [22mshould return 0 when invested capital is 0[32m 0[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mNet MOIC (Money-on-Invested-Capital after fees)[2m > [22mshould calculate Net MOIC correctly[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mNet MOIC (Money-on-Invested-Capital after fees)[2m > [22mshould return 0 when invested capital is 0[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mNet MOIC (Money-on-Invested-Capital after fees)[2m > [22mshould satisfy Net MOIC â‰¤ Gross MOIC invariant[32m 1[2mms[22m[39m
[31m   [31mÃ—[31m Reference Formulas[2m > [22mcomputeReferenceMetrics[2m > [22mshould compute all metrics from fund outputs[39m[32m 14[2mms[22m[39m
[31m     â†’ [DecimalError] Invalid argument: undefined[39m
   [32mâœ“[39m Reference Formulas[2m > [22mcomputeReferenceMetrics[2m > [22mshould throw error if no periods[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mvalidateInvariants[2m > [22mshould pass when all invariants hold[32m 2[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mvalidateInvariants[2m > [22mshould detect TVPI < DPI violation[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mvalidateInvariants[2m > [22mshould detect Gross MOIC < Net MOIC violation[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mvalidateInvariants[2m > [22mshould detect negative NAV violation[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mvalidateInvariants[2m > [22mshould detect multiple violations[32m 7[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mProperty tests - Mathematical invariants[2m > [22mshould satisfy TVPI = DPI when NAV = 0[32m 0[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mProperty tests - Mathematical invariants[2m > [22mshould satisfy TVPI > DPI when NAV > 0[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mProperty tests - Mathematical invariants[2m > [22mshould satisfy Net MOIC = Gross MOIC when fees = 0[32m 3[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mEdge cases and precision[2m > [22mshould handle very small numbers without rounding errors[32m 1[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mEdge cases and precision[2m > [22mshould handle very large numbers[32m 0[2mms[22m[39m
   [32mâœ“[39m Reference Formulas[2m > [22mEdge cases and precision[2m > [22mshould handle zero distributions (fund still deploying)[32m 0[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/__tests__/vite-build-regression.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 53[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mManual chunking should not cause TDZ errors[2m > [22mshould not have manual chunking that splits providers (causes TDZ errors)[32m 3[2mms[22m[39m
[31m   [31mÃ—[31m Vite Build Regression - Fix #3[2m > [22mManual chunking should not cause TDZ errors[2m > [22mshould use Vite default chunking strategy (not custom manual chunks)[39m[32m 15[2mms[22m[39m
[31m     â†’ expected 'rollupOptions: {\n        input: pathâ€¦' to match /manualChunks:\s*undefined/[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mManual chunking should not cause TDZ errors[2m > [22mshould not have circular dependency patterns in manual chunks[32m 2[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mBuild configuration validation[2m > [22mshould have treeshaking enabled[32m 3[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mBuild configuration validation[2m > [22mshould have proper module preload configuration[32m 1[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mBuild configuration validation[2m > [22mshould not have aggressive code splitting that breaks initialization order[32m 2[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mTDZ prevention: Provider initialization order[2m > [22mshould verify FeatureFlagProvider exports are not split[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m Vite Build Regression - Fix #3[2m > [22mTDZ prevention: Provider initialization order[2m > [22mshould ensure proper export/import patterns[39m[32m 4[2mms[22m[39m
[31m     â†’ expected '/// <reference types="vite/client" />â€¦' to match /format.*['"]es['"]/i[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mRegression: Specific TDZ error patterns[2m > [22mshould not create scenarios that trigger "Cannot access before initialization"[32m 2[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mRegression: Specific TDZ error patterns[2m > [22mshould allow Vite automatic chunking (the safe default)[32m 3[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mBuild output validation[2m > [22mshould have proper chunk size warnings configured[32m 5[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mBuild output validation[2m > [22mshould generate manifest for bundle analysis[32m 1[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mBuild output validation[2m > [22mshould have sourcemaps enabled for debugging TDZ issues[32m 1[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mConfiguration safety checks[2m > [22mshould not use esbuild splitting that could cause TDZ[32m 2[2mms[22m[39m
   [32mâœ“[39m Vite Build Regression - Fix #3[2m > [22mConfiguration safety checks[2m > [22mshould have proper resolve conditions for ESM[32m 2[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/engines/liquidity-engine.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 44[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Initialization[2m > [22mshould initialize with fund ID and size[32m 2[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Initialization[2m > [22mshould initialize with different fund sizes[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould analyze cash transactions[32m 2[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate total inflows correctly[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate total outflows correctly[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate net cash flow[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould group transactions by type[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould group transactions by quarter[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate running balances[32m 2[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould generate liquidity forecast[32m 2[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould project cash for specified months[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould include multiple scenarios[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate minimum cash buffer[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate liquidity ratio[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate burn rate[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate runway months[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould run stress test scenarios[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould include delayed distributions scenario[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould include accelerated investment scenario[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould include LP funding delay scenario[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould include market downturn scenario[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould identify worst case scenario[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould assess overall risk level[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Stress Testing[2m > [22mshould provide risk recommendations[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould optimize capital call schedule[32m 2[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould calculate optimal call amounts[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould respect notice and payment periods[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould calculate utilization rate[32m 2[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould calculate schedule efficiency[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Edge Cases[2m > [22mshould handle empty transaction list[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m LiquidityEngine - Edge Cases[2m > [22mshould handle zero cash position[39m[32m 12[2mms[22m[39m
[31m     â†’ expected -9.6 to be greater than or equal to 0[39m
   [32mâœ“[39m LiquidityEngine - Edge Cases[2m > [22mshould handle very large fund size[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Edge Cases[2m > [22mshould handle very small fund size[32m 1[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Edge Cases[2m > [22mshould handle recurring expenses correctly[32m 0[2mms[22m[39m
   [32mâœ“[39m LiquidityEngine - Edge Cases[2m > [22mshould handle inactive recurring expenses[32m 1[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/ops-webhook.test.ts [2m([22m[2m17 tests[22m[2m | [22m[31m17 failed[39m[2m)[22m[32m 42[2mms[22m[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mHMAC Authentication[2m > [22maccepts valid HMAC signature[39m[32m 13[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mHMAC Authentication[2m > [22mrejects invalid HMAC signature[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mHMAC Authentication[2m > [22mrejects missing signature header[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mHMAC Authentication[2m > [22muses timing-safe comparison (constant-time)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mHMAC Authentication[2m > [22mrejects signature with wrong length[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mReplay Protection[2m > [22maccepts recent timestamp (within 5 minutes)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mReplay Protection[2m > [22mrejects old timestamp (>5 minutes)[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mReplay Protection[2m > [22mrejects missing timestamp[39m[32m 4[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mReplay Protection[2m > [22mrejects invalid timestamp format[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mReplay Protection[2m > [22maccepts timestamp exactly at 5-minute boundary[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mAudit Logging[2m > [22memits structured JSON audit log on success[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mAudit Logging[2m > [22mincludes alert labels in audit log[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mAudit Logging[2m > [22mhandles missing alertname gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mError Handling[2m > [22mreturns 401 for malformed JSON body[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mError Handling[2m > [22mhandles mode store errors gracefully[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mStartup Validation[2m > [22mthrows on startup if webhook secret is missing[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[31m   [31mÃ—[31m Ops Webhook: Auto-Downgrade[2m > [22mStartup Validation[2m > [22mthrows on startup if webhook secret is too short[39m[32m 1[2mms[22m[39m
[31m     â†’ Cannot find module '../../server/routes/_ops-stage-validation'
Require stack:
- C:\dev\Updog_restore\tests\integration\ops-webhook.test.ts[39m
[90mstdout[2m | tests/integration/reserves-integration.test.ts[2m > [22m[2mReserves v1.1 Integration Tests[2m > [22m[2mProduction-Scale Scenarios[2m > [22m[2mshould handle edge cases gracefully
[22m[39mâœ“ micro fund: 2 allocations
âœ“ mega fund: 58 allocations
âœ“ zero reserves: 3 allocations
âœ“ max reserves: 10 allocations

 [31mâ¯[39m [30m[42m server [49m[39m tests/integration/reserves-integration.test.ts [2m([22m[2m5 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 36[2mms[22m[39m
   [32mâœ“[39m Reserves v1.1 Integration Tests[2m > [22mProduction-Scale Scenarios[2m > [22mshould handle large fund with 150+ companies within performance budget[32m 4[2mms[22m[39m
   [32mâœ“[39m Reserves v1.1 Integration Tests[2m > [22mProduction-Scale Scenarios[2m > [22mshould maintain consistency across multiple calculation runs[32m 5[2mms[22m[39m
   [32mâœ“[39m Reserves v1.1 Integration Tests[2m > [22mProduction-Scale Scenarios[2m > [22mshould handle edge cases gracefully[32m 5[2mms[22m[39m
[31m   [31mÃ—[31m Reserves v1.1 Integration Tests[2m > [22mShadow Intelligence Integration[2m > [22mshould detect and categorize divergences correctly[39m[32m 12[2mms[22m[39m
[31m     â†’ metrics.recordDuration is not a function[39m
[31m   [31mÃ—[31m Reserves v1.1 Integration Tests[2m > [22mCache Performance Integration[2m > [22mshould demonstrate cache effectiveness with repeated calculations[39m[32m 5[2mms[22m[39m
[31m     â†’ metrics.recordError is not a function[39m
[90mstdout[2m | tests/unit/services/power-law-distribution.test.ts[2m > [22m[2mUtility Functions[2m > [22m[2mgeneratePowerLawReturns[2m > [22m[2mshould generate returns for Monte Carlo integration
[22m[39m{"type":"metric","name":"mc_trials_total","value":25000,"timestamp":"2025-12-11T10:17:21.308Z","labels":{"stage_count":"2","unknown_count":"0"}}

[90mstdout[2m | tests/unit/services/power-law-distribution.test.ts[2m > [22m[2mUtility Functions[2m > [22m[2mgeneratePowerLawReturns[2m > [22m[2mshould handle string stage names from existing system
[22m[39m{"type":"metric","name":"mc_trials_total","value":1000,"timestamp":"2025-12-11T10:17:24.128Z","labels":{"stage_count":"3","unknown_count":"0"}}

[90mstdout[2m | tests/unit/services/power-law-distribution.test.ts[2m > [22m[2mUtility Functions[2m > [22m[2mgeneratePowerLawReturns[2m > [22m[2mshould default to seed stage for invalid distributions
[22m[39m{"type":"metric","name":"stage_normalization_unknown_total","value":1,"timestamp":"2025-12-11T10:17:24.132Z","labels":{"original_stage":"invalid-stage","caller":"generatePowerLawReturns"}}
{"type":"metric","name":"mc_trials_failed_total","value":1,"timestamp":"2025-12-11T10:17:24.133Z","labels":{"reason":"all_stages_unknown"}}

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/analytics-xirr.test.ts [2m([22m[2m11 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[32m 34[2mms[22m[39m
   [32mâœ“[39m XIRR Calculation[2m > [22mshould calculate exact IRR for simple two-point case[32m 4[2mms[22m[39m
   [32mâœ“[39m XIRR Calculation[2m > [22mshould handle irregular cash flow spacing[32m 2[2mms[22m[39m
   [32mâœ“[39m XIRR Calculation[2m > [22mshould return null for all negative flows[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Calculation[2m > [22mshould return null for all positive flows[32m 0[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Calculation[2m > [22mshould fallback to bisection when Newton fails[39m[32m 17[2mms[22m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
   [32mâœ“[39m XIRR Calculation[2m > [22mshould handle zero return correctly[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m XIRR Calculation[2m > [22mshould handle very high returns[39m[32m 3[2mms[22m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
   [32mâœ“[39m XIRR Calculation[2m > [22mshould respect tolerance parameter[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Edge Cases[2m > [22mshould handle empty flows[32m 0[2mms[22m[39m
   [32mâœ“[39m XIRR Edge Cases[2m > [22mshould handle single flow[32m 1[2mms[22m[39m
   [32mâœ“[39m XIRR Edge Cases[2m > [22mshould sort flows by date automatically[32m 0[2mms[22m[39m
[90mstdout[2m | tests/unit/services/power-law-distribution.test.ts[2m > [22m[2mUtility Functions[2m > [22m[2mgeneratePowerLawReturns[2m > [22m[2mshould be reproducible with same seed
[22m[39m{"type":"metric","name":"mc_trials_total","value":2500,"timestamp":"2025-12-11T10:17:24.135Z","labels":{"stage_count":"1","unknown_count":"0"}}
{"type":"metric","name":"mc_trials_total","value":2500,"timestamp":"2025-12-11T10:17:24.139Z","labels":{"stage_count":"1","unknown_count":"0"}}

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/services/power-law-distribution.test.ts [2m([22m[2m47 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 4372[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mConstruction and Configuration[2m > [22mshould create distribution with default VC parameters[32m 2[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mConstruction and Configuration[2m > [22mshould accept custom configuration parameters[32m 1[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mConstruction and Configuration[2m > [22mshould produce reproducible results with same seed[32m 1[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mConstruction and Configuration[2m > [22mshould produce different results with different seeds[32m 1[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mStage-Specific Return Sampling[2m > [22msampleReturn[2m > [22mshould sample returns for all investment stages[32m 4[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mStage-Specific Return Sampling[2m > [22msampleReturn[2m > [22mshould respect stage-specific failure rates[32m 43[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mStage-Specific Return Sampling[2m > [22msampleReturn[2m > [22mshould generate appropriate return multiples by category[32m 54[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mStage-Specific Return Sampling[2m > [22msampleReturn[2m > [22mshould throw error for invalid investment stage[32m 3[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mStage-Specific Return Sampling[2m > [22mStage Progression Effects[2m > [22mshould show decreasing failure rates from pre-seed to series-c+[32m 23[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mStage-Specific Return Sampling[2m > [22mStage Progression Effects[2m > [22mshould show increasing unicorn rates in later stages[32m 19[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateInvestmentScenario[2m > [22mshould generate complete investment scenarios[32m 2[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateInvestmentScenario[2m > [22mshould calculate IRR correctly from multiples[32m 4[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateInvestmentScenario[2m > [22mshould generate appropriate exit timing by stage[32m 2[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateInvestmentScenario[2m > [22mshould handle time horizon constraints[32m 11[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateBatchScenarios[2m > [22mshould generate specified number of scenarios[32m 45[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateBatchScenarios[2m > [22mshould respect stage distribution weights[32m 13[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mInvestment Scenario Generation[2m > [22mgenerateBatchScenarios[2m > [22mshould handle normalized stage distributions[32m 3[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mPortfolio Return Distribution[2m > [22mgeneratePortfolioReturns[2m > [22mshould generate portfolio distributions with correct structure[32m 97[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mPortfolio Return Distribution[2m > [22mgeneratePortfolioReturns[2m > [22mshould show power law characteristics[32m 277[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mPortfolio Return Distribution[2m > [22mgeneratePortfolioReturns[2m > [22mshould estimate power law alpha correctly[32m 234[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mPower Law Mathematical Properties[2m > [22mshould produce samples following power law in tail[32m 18[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mPower Law Mathematical Properties[2m > [22mshould show correct variance scaling[32m 265[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mPower Law Mathematical Properties[2m > [22mshould maintain return category proportions[32m 9[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mNo Time Decay Verification[2m > [22mshould not apply time decay to returns[32m 13[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mNo Time Decay Verification[2m > [22mshould show time horizon only affects IRR calculation[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m PowerLawDistribution[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle zero portfolio size[39m[32m 17[2mms[22m[39m
[31m     â†’ portfolioSize must be a positive finite number, got: 0[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle empty stage distribution[32m 2[2mms[22m[39m
   [32mâœ“[39m PowerLawDistribution[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle extreme time horizons[32m 0[2mms[22m[39m
   [32mâœ“[39m Utility Functions[2m > [22mcreateVCPowerLawDistribution[2m > [22mshould create distribution with default VC parameters[32m 0[2mms[22m[39m
   [32mâœ“[39m Utility Functions[2m > [22mcreateVCPowerLawDistribution[2m > [22mshould create reproducible distribution with seed[32m 0[2mms[22m[39m
   [33m[2mâœ“[22m[39m Utility Functions[2m > [22mgeneratePowerLawReturns[2m > [22mshould generate returns for Monte Carlo integration [33m 2819[2mms[22m[39m
   [32mâœ“[39m Utility Functions[2m > [22mgeneratePowerLawReturns[2m > [22mshould handle string stage names from existing system[32m 5[2mms[22m[39m
[31m   [31mÃ—[31m Utility Functions[2m > [22mgeneratePowerLawReturns[2m > [22mshould default to seed stage for invalid distributions[39m[32m 3[2mms[22m[39m
[31m     â†’ No valid investment stages found in distribution. Invalid stages: invalid-stage. Valid stages: pre-seed, seed, series-a, series-b, series-c, series-c+[39m
   [32mâœ“[39m Utility Functions[2m > [22mgeneratePowerLawReturns[2m > [22mshould be reproducible with same seed[32m 114[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid portfolioSize (negative)[32m 1[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid portfolioSize (zero)[32m 0[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid portfolioSize (NaN)[32m 0[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid portfolioSize (Infinity)[32m 0[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid scenarios (negative)[32m 0[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid scenarios (zero)[32m 0[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for invalid stageDistribution (null)[32m 0[2mms[22m[39m
   [32mâœ“[39m Input Validation[2m > [22mshould throw error for object parameter misuse (catches API signature bug)[32m 0[2mms[22m[39m
   [32mâœ“[39m Integration with Monte Carlo Engine[2m > [22mshould produce realistic VC portfolio distributions[32m 77[2mms[22m[39m
   [32mâœ“[39m Integration with Monte Carlo Engine[2m > [22mshould handle typical portfolio construction parameters[32m 29[2mms[22m[39m
   [32mâœ“[39m Integration with Monte Carlo Engine[2m > [22mshould show Series A Chasm effect clearly[32m 9[2mms[22m[39m
   [32mâœ“[39m Performance and Memory Tests[2m > [22mshould generate large simulations efficiently[32m 108[2mms[22m[39m
   [32mâœ“[39m Performance and Memory Tests[2m > [22mshould handle concurrent generation[32m 20[2mms[22m[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/database/time-travel-simple.test.ts [2m([22m[2m12 tests[22m[2m | [22m[33m12 skipped[39m[2m)[22m[32m 41[2mms[22m[39m
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mTable Creation[2m > [22mfund_state_snapshots table exists with correct structure
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mTable Creation[2m > [22msnapshot_comparisons table exists with constraint
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mTable Creation[2m > [22mtimeline_events table exists
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mTable Creation[2m > [22mstate_restoration_logs table exists
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mIndex Creation[2m > [22mfund_state_snapshots has required indexes
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mView Creation[2m > [22mactive_snapshots view exists
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mView Creation[2m > [22mrecent_timeline_events view exists
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mView Creation[2m > [22mrestoration_history view exists
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mFunctional Tests[2m > [22mcan insert snapshot with valid data
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mFunctional Tests[2m > [22msnapshot_comparisons constraint prevents same snapshot comparison
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mFunctional Tests[2m > [22mtimeline_events references snapshot with ON DELETE SET NULL
   [2m[90mâ†“[39m[22m Time-Travel Analytics Migration (Real DB)[2m > [22mTrigger Tests[2m > [22mupdated_at timestamp updates automatically
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/reallocation-api.test.ts [2m([22m[2m14 tests[22m[2m | [22m[33m14 skipped[39m[2m)[22m[32m 14[2mms[22m[39m
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould preview reallocation with no changes
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould preview reallocation with increases and decreases
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould detect cap exceeded warning
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould detect high concentration warning
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould return 409 on version conflict
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould validate request body schema
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/preview[2m > [22mshould detect unrealistic MOIC warning
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/commit[2m > [22mshould commit successful reallocation
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/commit[2m > [22mshould rollback on version conflict
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/commit[2m > [22mshould rollback on cap exceeded error
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/commit[2m > [22mshould handle concurrent reallocation attempts
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/commit[2m > [22mshould create audit log with correct change details
   [2m[90mâ†“[39m[22m POST /api/funds/:fundId/reallocation/commit[2m > [22mshould increment version atomically
   [2m[90mâ†“[39m[22m Reallocation API Integration[2m > [22mshould complete full preview-commit workflow
[90mstdout[2m | tests/integration/dev-memory-mode.test.ts
[22m[39m[dotenv@17.2.3] injecting env (38) from .env -- tip: âš™ï¸  enable debug logging with { debug: true }
[config] NODE_ENV detected: development (from process.env: development)
[config] Environment: development
[config] Development configuration loaded: {
  NODE_ENV: [32m'development'[39m,
  PORT: [33m5000[39m,
  DATABASE_URL: [32m'postgresql://***:***@ep-curly-cake-adotp4hy-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require'[39m,
  REDIS_URL: [32m'memory://'[39m,
  ENABLE_QUEUES: [32m'0'[39m,
  CORS_ORIGIN: [32m'http://localhost:5173,http://localhost:5000'[39m,
  BODY_LIMIT: [32m'10mb'[39m,
  SESSION_SECRET: [32m'change-me-in-production-to-random-string'[39m,
  JWT_SECRET: [32m'dev-secret-only-for-local-development-change-me-32chars-minimum'[39m,
  METRICS_KEY: [32m'dev-metrics-key-local-only'[39m,
  CIRCUIT_BREAKER_THRESHOLD: [33m3[39m,
  CIRCUIT_BREAKER_RESET_TIMEOUT: [33m3600000[39m,
  SLO_ERROR_BUDGET: [33m0.001[39m,
  SLO_SHORT_WINDOW: [33m3600000[39m,
  SLO_MEDIUM_WINDOW: [33m21600000[39m,
  SLO_LONG_WINDOW: [33m86400000[39m,
  DEPLOY_ERROR_THRESHOLD: [33m0.01[39m,
  DEPLOY_P99_THRESHOLD: [33m1000[39m,
  DEPLOY_MEMORY_THRESHOLD: [33m0.8[39m,
  DEPLOY_CPU_THRESHOLD: [33m0.7[39m,
  HEALTH_KEY: [32m'***'[39m,
  SHUTDOWN_RETRY_AFTER_SECONDS: [33m30[39m,
  REDIS_HOST: [32m'localhost'[39m,
  REDIS_PORT: [33m6379[39m,
  npm_package_version: [32m'1.3.2'[39m,
  APP_VERSION: [32m'dev'[39m,
  ERROR_TRACKING_DSN: [90mundefined[39m
}

 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/services/monte-carlo-engine.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 7565[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould run complete portfolio simulation with all components[32m 42[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould handle different simulation run counts[32m 138[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould use reproducible results with random seed[32m 33[2mms[22m[39m
[31m   [31mÃ—[31m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould validate configuration parameters[39m[33m 5749[2mms[22m[39m
[31m     â†’ promise resolved "{ â€¦(12) }" instead of rejecting[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould handle insufficient historical data[32m 46[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould handle missing baseline data[32m 2[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mrunPortfolioSimulation[2m > [22mshould handle missing fund data[32m 1[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mPerformance Distributions[2m > [22mshould generate correct percentile distributions[32m 13[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mPerformance Distributions[2m > [22mshould calculate confidence intervals correctly[32m 13[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPortfolio Simulation[2m > [22mPerformance Distributions[2m > [22mshould maintain statistical consistency[32m 61[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mRisk Metrics Calculation[2m > [22mcalculateRiskMetrics[2m > [22mshould calculate Value at Risk (VaR) correctly[32m 10[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mRisk Metrics Calculation[2m > [22mcalculateRiskMetrics[2m > [22mshould calculate Conditional Value at Risk (CVaR)[32m 9[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mRisk Metrics Calculation[2m > [22mcalculateRiskMetrics[2m > [22mshould calculate probability of loss[32m 7[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mRisk Metrics Calculation[2m > [22mcalculateRiskMetrics[2m > [22mshould calculate downside risk[32m 8[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mRisk Metrics Calculation[2m > [22mcalculateRiskMetrics[2m > [22mshould calculate Sharpe and Sortino ratios[32m 6[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mRisk Metrics Calculation[2m > [22mcalculateRiskMetrics[2m > [22mshould calculate maximum drawdown[32m 5[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mReserve Optimization[2m > [22moptimizeReserveAllocation[2m > [22mshould find optimal reserve allocation[32m 5[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mReserve Optimization[2m > [22moptimizeReserveAllocation[2m > [22mshould test multiple reserve ratios[32m 2[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mReserve Optimization[2m > [22moptimizeReserveAllocation[2m > [22mshould calculate improvement potential[32m 1[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mScenario Analysis[2m > [22mshould generate comprehensive scenario analysis[32m 15[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mActionable Insights[2m > [22mshould generate relevant recommendations[32m 32[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mActionable Insights[2m > [22mshould identify risk warnings when appropriate[32m 17[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mActionable Insights[2m > [22mshould suggest reserve optimization when beneficial[32m 14[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPerformance and Edge Cases[2m > [22mshould complete simulation within reasonable time[32m 40[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPerformance and Edge Cases[2m > [22mshould handle concurrent simulations[32m 17[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPerformance and Edge Cases[2m > [22mshould store simulation results[32m 14[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPerformance and Edge Cases[2m > [22mshould handle extreme market scenarios[32m 7[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mPerformance and Edge Cases[2m > [22mshould handle zero or negative scenarios gracefully[32m 3[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mData Integration[2m > [22mshould correctly extract portfolio inputs from baseline[32m 15[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mData Integration[2m > [22mshould calibrate distributions from historical variance[32m 12[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mData Integration[2m > [22mshould handle empty variance reports[32m 18[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mUtility Functions[2m > [22mshould generate normal distribution samples[32m 13[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine[2m > [22mUtility Functions[2m > [22mshould handle portfolio inputs calculation[32m 12[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine Integration Scenarios[2m > [22mshould support complete portfolio construction workflow[32m 20[2mms[22m[39m
   [32mâœ“[39m MonteCarloEngine Integration Scenarios[2m > [22mshould handle different fund sizes and strategies[32m 34[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/integration/__tests__/ci-workflow-regression.test.ts [2m([22m[2m20 tests[22m[2m)[22m[32m 240[2mms[22m[39m
[90mstdout[2m | tests/unit/security/security-fixes.test.ts[2m > [22m[2mSecurity Vulnerability Fixes - Integration Test[2m > [22m[2mPath Traversal Prevention[2m > [22m[2mshould prevent path traversal in file paths
[22m[39m10:17:29.563 [[31merror[39m]: [31mString sanitization failed[39m {"service":"updog-vc-platform","category":"security","originalValue":"../../../etc/passwd","error":"Input contains potentially dangerous content: (\\.\\.[\\/\\\\]|[\\/\\\\]\\.\\.|%2e%2e%2f|%2e%2e%5c|\\.\\.\\/|\\.\\.\\\\)"}
10:17:29.575 [[31merror[39m]: [31mString sanitization failed[39m {"service":"updog-vc-platform","category":"security","originalValue":"..\\..\\..\\windows\\system32","error":"Input contains potentially dangerous content: (\\.\\.[\\/\\\\]|[\\/\\\\]\\.\\.|%2e%2e%2f|%2e%2e%5c|\\.\\.\\/|\\.\\.\\\\)"}

 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/security/security-fixes.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 715[2mms[22m[39m
   [33m[2mâœ“[22m[39m Security Vulnerability Fixes - Integration Test[2m > [22mPath Traversal Prevention[2m > [22mshould prevent path traversal in file paths [33m 450[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/reserves/ConstrainedReserveEngine.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 451[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/health-cache.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 214[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/integration/idempotency.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 231[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/integration/middleware.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 1017[2mms[22m[39m
   [33m[2mâœ“[22m[39m Critical Middleware Tests[2m > [22mA. Rate Limiter[2m > [22mshould use deterministic fallback for unknown IPs [33m 321[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/api/time-travel-api.test.ts [2m([22m[2m31 tests[22m[2m | [22m[33m13 skipped[39m[2m)[22m[33m 403[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/legacy/async-iteration.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 123[2mms[22m[39m
[90mstdout[2m | tests/unit/services/monte-carlo-statistical-assertions.test.ts[2m > [22m[2mMonte Carlo Power Law Validation - Statistical[2m > [22m[2mTEST 3: Should correctly allocate series-c+ stage (REGRESSION FIX)
[22m[39m{"type":"metric","name":"mc_trials_total","value":25000,"timestamp":"2025-12-11T10:17:29.323Z","labels":{"stage_count":"4","unknown_count":"0"}}

 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/units.test.ts [2m([22m[2m50 tests[22m[2m)[22m[32m 100[2mms[22m[39m
[90mstdout[2m | tests/unit/services/monte-carlo-statistical-assertions.test.ts[2m > [22m[2mMonte Carlo Power Law Validation - Statistical[2m > [22m[2mTEST 4: Should have realistic portfolio failure rate (Clopper-Pearson CI)
[22m[39m{"type":"metric","name":"mc_trials_total","value":60000,"timestamp":"2025-12-11T10:17:30.407Z","labels":{"stage_count":"2","unknown_count":"0"}}

 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/services/monte-carlo-statistical-assertions.test.ts [2m([22m[2m7 tests[22m[2m)[22m[33m 1837[2mms[22m[39m
   [33m[2mâœ“[22m[39m Monte Carlo Power Law Validation - Statistical[2m > [22mTEST 2: Should show higher variance in later stages (bootstrap CI) [33m 483[2mms[22m[39m
   [33m[2mâœ“[22m[39m Monte Carlo Power Law Validation - Statistical[2m > [22mTEST 3: Should correctly allocate series-c+ stage (REGRESSION FIX) [33m 1085[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/error-handler.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 133[2mms[22m[39m
[90mstdout[2m | tests/unit/fund-calc-fee-horizon.test.ts[2m > [22m[2mManagement Fee Horizon Fix (PR #112)[2m > [22m[2mshould charge fees for full 10-year horizon even with early exits
[22m[39mTotal periods simulated: 11
Total management fees: $20.00M
Expected fees: $20.00M

 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/reserves-engine.test.ts [2m([22m[2m32 tests[22m[2m)[22m[32m 138[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/fund-calc-fee-horizon.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 115[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/redis-factory.test.ts [2m([22m[2m26 tests[22m[2m)[22m[32m 112[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/health-guards.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 86[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/inflight-simple.quarantine.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 69[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/engines/cohort-engine.test.ts [2m([22m[2m37 tests[22m[2m)[22m[32m 67[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/services/time-travel-analytics.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 78[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/waterfall-invariants.test.ts [2m([22m[2m6 tests[22m[2m)[22m[32m 45[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/integration/__tests__/phase0-integration.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 65[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/engines/reserve-engine.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 52[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/truth-cases/helpers.test.ts [2m([22m[2m22 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/waterfall-truth-table.test.ts [2m([22m[2m17 tests[22m[2m)[22m[32m 48[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/unit-schemas.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 44[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/engines/pacing-engine.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/fee-calculations.test.ts [2m([22m[2m40 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/utils/stage-utils.test.ts [2m([22m[2m48 tests[22m[2m)[22m[32m 25[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/stores/fund-store-stability.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/circuit-breaker.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 26[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/excelRound.test.ts [2m([22m[2m30 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/bug-fixes/prng.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 21[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/analytics-waterfall.test.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/scripts/init-memory-manager.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 28[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/reserves-v11.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 24[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/waterfall-bug-test.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 13[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/integration/enforce-gate.test.ts [2m([22m[2m15 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/security/sanitization.test.ts [2m([22m[2m13 tests[22m[2m)[22m[32m 30[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/nan-equality.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/strategy-signature.test.ts [2m([22m[2m3 tests[22m[2m)[22m[32m 8[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/fees.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/bug-fixes/conservation.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 9[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/stores/useFundStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 12[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/database/simple-test.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 5[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/database/test-with-imports.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/stores/useFundStore.idempotency.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 6[2mms[22m[39m
 [2m[90mâ†“[39m[22m [30m[42m server [49m[39m tests/unit/monte-carlo-2025-validation-core.test.ts [2m([22m[2m14 tests[22m[2m | [22m[33m14 skipped[39m[2m)[22m
 [2m[90mâ†“[39m[22m [30m[42m server [49m[39m tests/unit/services/monte-carlo-power-law-validation.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m13 skipped[39m[2m)[22m
 [2m[90mâ†“[39m[22m [30m[42m server [49m[39m tests/unit/services/monte-carlo-power-law-integration.test.ts [2m([22m[2m14 tests[22m[2m | [22m[33m14 skipped[39m[2m)[22m
 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/capital-allocation-step.test.tsx [2m([22m[2m28 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[32m 121[2mms[22m[39m
   [32mâœ“[39m CapitalAllocationStep - Schema Validation[2m > [22mvalidates complete capital allocation data structure[32m 4[2mms[22m[39m
   [32mâœ“[39m CapitalAllocationStep - Schema Validation[2m > [22mvalidates entry strategy enum values[32m 3[2mms[22m[39m
   [32mâœ“[39m CapitalAllocationStep - Schema Validation[2m > [22mvalidates reserve ratio is within bounds[32m 2[2mms[22m[39m
   [32mâœ“[39m CapitalAllocationStep - Schema Validation[2m > [22mvalidates pacing periods sum to 100%[32m 1[2mms[22m[39m
   [32mâœ“[39m CapitalAllocationStep - Schema Validation[2m > [22mvalidates stage allocations have required fields[32m 2[2mms[22m[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Integration[2m > [22mintegrates with useCapitalAllocationCalculations hook[39m[32m 19[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Integration[2m > [22mcalculates correct metrics from form values[39m[32m 7[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Integration[2m > [22mvalidates capital allocation correctly[39m[32m 4[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
   [32mâœ“[39m CapitalAllocationStep - Calculation Integration[2m > [22mcalculates reserves based on reserve ratio[32m 3[2mms[22m[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Validation Logic[2m > [22mvalidates check size bounds[39m[32m 4[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Validation Logic[2m > [22mvalidates pacing allocations sum to 100%[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Validation Logic[2m > [22mdetects when total capital exceeds fund size[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Validation Logic[2m > [22mwarns about very high implied ownership[39m[32m 7[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Validation Logic[2m > [22mwarns about very low implied ownership[39m[32m 9[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Validation Logic[2m > [22mvalidates reserve ratio bounds in schema[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Wizard Context Integration[2m > [22muses fundFinancials from previous step for calculations[39m[32m 4[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Wizard Context Integration[2m > [22muses sectorProfiles from previous step for calculations[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Wizard Context Integration[2m > [22mvalidates auto-save behavior with valid data[39m[32m 4[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Wizard Context Integration[2m > [22mprevents auto-save with invalid data[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Wizard Context Integration[2m > [22mgenerates default pacing periods when not provided[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Wizard Context Integration[2m > [22muses correct vintage year for pacing schedule dates[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mhandles zero fund size gracefully[39m[32m 7[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mhandles empty sector profiles[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mhandles empty stage allocations[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mhandles very large numbers without overflow[39m[32m 3[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mhandles decimal precision in calculations[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/lib/capital-allocation-calculations'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mhandles missing optional fields[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Edge Cases[2m > [22mvalidates pacing period date ordering[39m[32m 2[2mms[22m[39m
[31m     â†’ Cannot find module '@/schemas/modeling-wizard.schemas'
Require stack:
- C:\dev\Updog_restore\tests\unit\capital-allocation-step.test.tsx[39m
 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/components/ui/NumericInput.test.tsx [2m([22m[2m45 tests[22m[2m | [22m[31m45 failed[39m[2m)[22m[32m 82[2mms[22m[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mBasic Rendering[2m > [22mrenders with label and input[39m[32m 17[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mBasic Rendering[2m > [22mdisplays required asterisk when required=true[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mBasic Rendering[2m > [22mshows help text when provided[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mBasic Rendering[2m > [22mshows error text and hides help text when error is present[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mBasic Rendering[2m > [22mrenders placeholder when provided[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mBasic Rendering[2m > [22mis disabled when disabled=true[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mdisplays $ prefix in currency mode[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mdisplays % suffix in percentage mode[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22muses custom prefix when provided[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22muses custom suffix when provided[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mpercentage mode overrides custom suffix[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mcurrency mode uses default $ prefix[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mcurrency mode can use custom prefix[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mNumber Formatting[2m > [22mformats numbers with commas when not focused[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mNumber Formatting[2m > [22mremoves commas when focused[39m[32m 4[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mNumber Formatting[2m > [22mre-formats with commas on blur[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mNumber Formatting[2m > [22mhandles decimal values correctly[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mNumber Formatting[2m > [22mpreserves decimal places when formatting[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mNumber Formatting[2m > [22mhandles negative numbers[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mUser Input Validation[2m > [22mallows only numeric characters and decimal point[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mUser Input Validation[2m > [22mhandles empty string as undefined[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mUser Input Validation[2m > [22mallows typing minus sign for negative numbers[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMin/Max Clamping[2m > [22mclamps value to min on blur[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMin/Max Clamping[2m > [22mclamps value to max on blur[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mMin/Max Clamping[2m > [22mallows values within min/max range[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mincrements value with ArrowUp[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mdecrements value with ArrowDown[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mrespects custom step value[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mhandles ArrowUp/Down with decimal steps[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mclamps when incrementing beyond max[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mclamps when decrementing below min[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22muses 0 as base when value is undefined and arrow key pressed[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22mgenerates unique IDs for input and label[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22msets aria-required when required=true[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22msets aria-invalid when error is present[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22mlinks input to help text with aria-describedby[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22mlinks input to error text with aria-describedby[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22merror message has role="alert"[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mAccessibility[2m > [22muses inputMode="decimal" for mobile keyboards[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles very large numbers[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles very small decimal numbers[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles zero correctly[39m[32m 1[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles undefined to number transition[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles number to undefined transition[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m NumericInput[2m > [22mCustom Class Names[2m > [22mapplies custom className to container[39m[32m 0[2mms[22m[39m
[31m     â†’ React is not defined[39m
 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/general-info-step.test.tsx [2m([22m[2m5 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[32m 31[2mms[22m[39m
[31m   [31mÃ—[31m GeneralInfoStep - Preservation Pattern[2m > [22mshould preserve fundLife and investmentPeriod when toggling evergreen[39m[32m 16[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m GeneralInfoStep - Preservation Pattern[2m > [22mshould handle rapid toggle cycles without data corruption[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m GeneralInfoStep - Preservation Pattern[2m > [22mshould validate restored values and fallback to defaults on corruption[39m[32m 5[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m GeneralInfoStep - Preservation Pattern[2m > [22mshould not crash when onSave callback throws error[39m[32m 3[2mms[22m[39m
[31m     â†’ React is not defined[39m
[31m   [31mÃ—[31m GeneralInfoStep - Preservation Pattern[2m > [22mshould use numeric values for all number inputs[39m[32m 2[2mms[22m[39m
[31m     â†’ React is not defined[39m
[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should persist data BEFORE navigating to next step
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should persist data BEFORE navigating to next step
[22m[39m[EXPECTED FAILURE] Navigation happened before persistence completed
Current step: sectorProfiles
Action order: [
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m, [32m'persistToStorage'[39m,
  ... 1982 more items
]

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should NOT navigate when persistence fails (QuotaExceededError)
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should support retry after persistence failure
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should support retry after persistence failure
[22m[39m[EXPECTED FAILURE] No retry state exists in current implementation
Current state: { active: [32m'editing'[39m }

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should allow navigation even if auto-save persistence fails
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should allow navigation even if auto-save persistence fails
[22m[39m[EXPECTED FAILURE] No intent tracking in current implementation
Context keys: [
  [32m'steps'[39m,                [32m'currentStep'[39m,
  [32m'currentStepIndex'[39m,     [32m'totalSteps'[39m,
  [32m'completedSteps'[39m,       [32m'visitedSteps'[39m,
  [32m'validationErrors'[39m,     [32m'isStepValid'[39m,
  [32m'lastSaved'[39m,            [32m'isDirty'[39m,
  [32m'persistenceError'[39m,     [32m'retryCount'[39m,
  [32m'lastPersistAttempt'[39m,   [32m'navigationIntent'[39m,
  [32m'targetStep'[39m,           [32m'submissionError'[39m,
  [32m'submissionRetryCount'[39m, [32m'skipOptionalSteps'[39m,
  [32m'autoSaveInterval'[39m
]

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should NOT navigate backward when persistence fails
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }
[ModelingWizard] Progress saved to localStorage { timestamp: [33m1765448258943[39m }

 [32mâœ“[39m [30m[42m client [49m[39m tests/unit/fund-setup-basic.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/components/ai-enhanced-components.test.tsx [2m([22m[2m19 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 937[2mms[22m[39m
[31m   [31mÃ—[31m AIInsightCard[2m > [22mrenders without crashing[39m[32m 123[2mms[22m[39m
[31m     â†’ Unable to find an element with the text: /Series A Chasm/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-4"[31m
    [36m>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"AI Insight: High Concentration Risk"[31m
        [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins ai-insight-enhanced transition-all duration-300 ease-professional hover:shadow-ai-insight hover:-translate-y-1 reduced-motion-safe focus-visible-ring high-contrast-border bg-semantic-info-50 border-semantic-info-200 medium"[31m
        [33mrole[31m=[32m"article"[31m
        [33mtabindex[31m=[32m"0"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-start justify-between"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"p-2 rounded-lg"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-trending-up h-5 w-5 text-semantic-info-800"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M16 7h6v6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"m22 7-8.5 8.5-5-5L2 17"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</div>[31m
              [36m<div>[31m
                [36m<h3[31m
                  [33mclass[31m=[32m"font-semibold font-inter text-semantic-info-800 text-base"[31m
                [36m>[31m
                  [0mHigh Concentration Risk[0m
                [36m</h3>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-2 mt-1"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary text-primary-foreground hover:bg-primary/80 text-xs"[31m
                  [36m>[31m
                    [0mRisk Analysis[0m
                  [36m</div>[31m
                  [36m<span[31m
                    [33mclass[31m=[32m"text-xs text-gray-500"[31m
                  [36m>[31m
                    [0m78[0m
                    [0m% confidence[0m
                  [36m</span>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"ai-confidence-progress w-12"[31m
              [36m>[31m
                [36m<div[31m
                  [33maria-label[31m=[32m"Confidence: 78%"[31m
                  [33maria-valuemax[31m=[32m"100"[31m
                  [33maria-valuemin[31m=[32m"0"[31m
                  [33maria-valuenow[31m=[32m"78"[31m
                  [33mclass[31m=[32m"progress-fill medium"[31m
                  [33mrole[31m=[32m"progressbar"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-6 pt-0 pt-0"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"space-y-3"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-lightbulb h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M9 18h6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M10 22h4"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins leading-relaxed text-semantic-info-800 text-base"[31m
                  [33mid[31m=[32m"insight-text-0"[31m
                [36m>[31m
                  [0mTop 33% of investments drive 83% of total returns.[0m
                [36m</p>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"10"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"6"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins font-medium leading-relaxed text-semantic-info-800 text-base"[31m
                  [33mid[31m=[32m"recommendation-text-0"[31m
                [36m>[31m
                  [0mDiversify portfolio construction and consider increasing check sizes for high-conviction opportunities to reduce concentration risk.[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
   [32mâœ“[39m AIInsightCard[2m > [22mgenerates insights from Monte Carlo results[32m 83[2mms[22m[39m
   [32mâœ“[39m AIInsightCard[2m > [22mshows empty state when no results provided[32m 13[2mms[22m[39m
   [32mâœ“[39m AIInsightCard[2m > [22mrenders custom insights[32m 21[2mms[22m[39m
   [32mâœ“[39m ProgressiveDisclosureContainer[2m > [22mrenders with default executive view[32m 43[2mms[22m[39m
[31m   [31mÃ—[31m ProgressiveDisclosureContainer[2m > [22mallows switching between view levels[39m[32m 215[2mms[22m[39m
[31m     â†’ Found multiple elements with the role "button" and name `/strategic/i`

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<button[31m
  [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-beige disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 font-poppins font-medium bg-transparent text-charcoal hover:bg-lightGray font-medium h-9 px-3 py-1.5 text-sm transition-all duration-200 text-slate-500 hover:text-slate-700"[31m
[36m>[31m
  [36m<svg[31m
    [33maria-hidden[31m=[32m"true"[31m
    [33mclass[31m=[32m"lucide lucide-target w-4 h-4 mr-2"[31m
    [33mfill[31m=[32m"none"[31m
    [33mheight[31m=[32m"24"[31m
    [33mstroke[31m=[32m"currentColor"[31m
    [33mstroke-linecap[31m=[32m"round"[31m
    [33mstroke-linejoin[31m=[32m"round"[31m
    [33mstroke-width[31m=[32m"2"[31m
    [33mviewBox[31m=[32m"0 0 24 24"[31m
    [33mwidth[31m=[32m"24"[31m
    [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
  [36m>[31m
    [36m<circle[31m
      [33mcx[31m=[32m"12"[31m
      [33mcy[31m=[32m"12"[31m
      [33mr[31m=[32m"10"[31m
    [36m/>[31m
    [36m<circle[31m
      [33mcx[31m=[32m"12"[31m
      [33mcy[31m=[32m"12"[31m
      [33mr[31m=[32m"6"[31m
    [36m/>[31m
    [36m<circle[31m
      [33mcx[31m=[32m"12"[31m
      [33mcy[31m=[32m"12"[31m
      [33mr[31m=[32m"2"[31m
    [36m/>[31m
  [36m</svg>[31m
  [0mStrategic[0m
[36m</button>[31m

Ignored nodes: comments, script, style
[36m<button[31m
  [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-beige disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 font-poppins font-medium text-charcoal underline-offset-4 hover:underline font-medium h-10 px-4 py-2 p-0 h-auto text-blue-600 font-semibold"[31m
[36m>[31m
  [0mStrategic[0m
  [0m view[0m
[36m</button>[31m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-6"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-2"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex items-center justify-between"[31m
        [36m>[31m
          [36m<div>[31m
            [36m<h2[31m
              [33mclass[31m=[32m"text-2xl font-bold font-inter text-slate-900"[31m
            [36m>[31m
              [0mTest Dashboard[0m
            [36m</h2>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground text-sm"[31m
            [36m>[31m
              [0mExecutive Overview[0m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"text-xs text-slate-500"[31m
            [36m>[31m
              [0mfor [0m
              [0mLP, Limited Partner, Board Member, Executive[0m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex items-center justify-between p-4 bg-slate-50 rounded-lg border"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center gap-4"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"text-sm font-medium text-slate-600"[31m
              [36m>[31m
                [0mComplexity Level:[0m
              [36m</div>[31m
              [36m<div[31m
                [33maria-valuemax[31m=[32m"100"[31m
                [33maria-valuemin[31m=[32m"0"[31m
                [33mclass[31m=[32m"relative h-4 w-full overflow-hidden rounded-full bg-secondary w-20 h-2"[31m
                [33mdata-max[31m=[32m"100"[31m
                [33mdata-state[31m=[32m"indeterminate"[31m
                [33mrole[31m=[32m"progressbar"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"h-full w-full flex-1 bg-primary transition-all"[31m
                  [33mdata-max[31m=[32m"100"[31m
                  [33mdata-state[31m=[32m"indeterminate"[31m
                  [33mstyle[31m=[32m"transform: translateX(-75%);"[31m
                [36m/>[31m
              [36m</div>[31m
              [36m<span[31m
                [33mclass[31m=[32m"text-sm font-semibold text-slate-700"[31m
              [36m>[31m
                [0m1[0m
                [0m/4[0m
              [36m</span>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center gap-1"[31m
          [36m>[31m
            [36m<button[31m
              [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-beige disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 font-poppins font-medium bg-charcoal text-white hover:bg-charcoal/90 shadow-card hover:shadow-elevated h-9 px-3 py-1.5 text-sm transition-all duration-200 bg-blue-600 text-white"[31m
            [36m>[31m
              [36m<svg[31m
                [33maria-hidden[31m=[32m"true"[31m
                [33mclass[31m=[32m"lucide lucide-eye w-4 h-4 mr-2"[31m
                [33mfill[31m=[32m"none"[31m
                [33mheight[31m=[32m"24"[31m
                [33mstroke[31m=[32m"currentColor"[31m
                [33mstroke-linecap[31m=[32m"round"[31m
                [33mstroke-linejoin[31m=[32m"round"[31m
                [33mstroke-width[31m=[32m"2"[31m
                [33mviewBox[31m=[32m"0 0 24 24"[31m
                [33mwidth[31m=[32m"24"[31m
                [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
              [36m>[31m
                [36m<path[31m
                  [33md[31m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[31m
                [36m/>[31m
                [36m<circle[31m
                  [33mcx[31m=[32m"12"[31m
                  [33mcy[31m=[32m"12"[31m
                  [33mr[31m=[32m"3"[31m
                [36m/>[31m
              [36m</svg>[31m
              [0mExecutive[0m
            [36m</button>[31m
            [36m<svg[31m
              [33maria-hidden[31m=[32m"true"[31m
              [33mclass[31m=[32m"lucide lucide-chevron-right w-4 h-4 text-slate-400"[31m
              [33mfill[31m=[32m"none"[31m
              [33mheight[31m=[32m"24"[31m
              [33mstroke[31m=[32m"currentColor"[31m
              [33mstroke-linecap[31m=[32m"round"[31m
              [33mstroke-linejoin[31m=[32m"round"[31m
              [33mstroke-width[31m=[32m"2"[31m
              [33mviewBox[31m=[32m"0 0 24 24"[31m
              [33mwidth[31m=[32m"24"[31m
              [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
            [36m>[31m
              [36m<path[31m
                [33md[31m=[32m"m9 18 6-6-6-6"[31m
              [36m/>[31m
            [36m</svg>[31m
            [36m<button[31m
              [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-beige disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 font-poppins font-medium bg-transparent text-charcoal hover:bg-lightGray font-medium h-9 px-3 py-1.5 text-sm transition-all duration-200 text-slate-500 hover:text-slate-700"[31m
            [36m>[31m
              [36m<svg[31m
                [33maria-hidden[31m=[32m"true"[31m
                [33mclass[31m=[32m"lucide lucide-target w-4 h-4 mr-2"[31m
                [33mfill[31m=[32m"none"[31m
                [33mheight[31m=[32m"24"[31m
                [33mstroke[31m=[32m"currentColor"[31m
                [33mstroke-linecap[31m=[32m"round"[31m
                [33mstroke-linejoin[31m=[32m"round"[31m
                [33mstroke-width[31m=[32m"2"[31m
                [33mviewBox[31m=[32m"0 0 24 24"[31m
                [33mwidth[31m=[32m"24"[31m
                [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
...[39m
   [32mâœ“[39m ProgressiveDisclosureContainer[2m > [22mfilters sections based on complexity[32m 21[2mms[22m[39m
   [32mâœ“[39m ContextualTooltip[2m > [22mrenders basic tooltip content[32m 33[2mms[22m[39m
   [32mâœ“[39m ContextualTooltip[2m > [22mrenders inline variant correctly[32m 23[2mms[22m[39m
   [32mâœ“[39m ContextualTooltip[2m > [22mrenders convenience components[32m 27[2mms[22m[39m
   [32mâœ“[39m ContextualTooltip[2m > [22mhandles unknown concepts gracefully[32m 10[2mms[22m[39m
[31m   [31mÃ—[31m IntelligentSkeleton[2m > [22mrenders dashboard skeleton[39m[32m 66[2mms[22m[39m
[31m     â†’ Unable to find an element with the text: Loading Dashboard. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-4"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"text-center p-4 bg-slate-50 rounded-lg border border-dashed"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex items-center justify-center gap-2 text-slate-600"[31m
        [36m>[31m
          [36m<svg[31m
            [33maria-hidden[31m=[32m"true"[31m
            [33mclass[31m=[32m"lucide lucide-calculator h-5 w-5"[31m
            [33mfill[31m=[32m"none"[31m
            [33mheight[31m=[32m"24"[31m
            [33mstroke[31m=[32m"currentColor"[31m
            [33mstroke-linecap[31m=[32m"round"[31m
            [33mstroke-linejoin[31m=[32m"round"[31m
            [33mstroke-width[31m=[32m"2"[31m
            [33mviewBox[31m=[32m"0 0 24 24"[31m
            [33mwidth[31m=[32m"24"[31m
            [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
          [36m>[31m
            [36m<rect[31m
              [33mheight[31m=[32m"20"[31m
              [33mrx[31m=[32m"2"[31m
              [33mwidth[31m=[32m"16"[31m
              [33mx[31m=[32m"4"[31m
              [33my[31m=[32m"2"[31m
            [36m/>[31m
            [36m<line[31m
              [33mx1[31m=[32m"8"[31m
              [33mx2[31m=[32m"16"[31m
              [33my1[31m=[32m"6"[31m
              [33my2[31m=[32m"6"[31m
            [36m/>[31m
            [36m<line[31m
              [33mx1[31m=[32m"16"[31m
              [33mx2[31m=[32m"16"[31m
              [33my1[31m=[32m"14"[31m
              [33my2[31m=[32m"18"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M16 10h.01"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M12 10h.01"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M8 10h.01"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M12 14h.01"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M8 14h.01"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M12 18h.01"[31m
            [36m/>[31m
            [36m<path[31m
              [33md[31m=[32m"M8 18h.01"[31m
            [36m/>[31m
          [36m</svg>[31m
          [36m<span[31m
            [33mclass[31m=[32m"text-sm font-medium"[31m
          [36m>[31m
            [0mLoading Loading Dashboard[0m
            [0m â€¢ Portfolio Data[0m
          [36m</span>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-6"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"space-y-3"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-64 animate-pulse"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-96 animate-pulse"[31m
              [36m/>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-32 animate-pulse"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-10 animate-pulse"[31m
              [36m/>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-6 w-16 animate-pulse"[31m
            [36m/>[31m
            [36m<span[31m
              [33mclass[31m=[32m"text-gray-300"[31m
            [36m>[31m
              [0m/[0m
            [36m</span>[31m
            [36m<div[31m
              [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-6 w-24 animate-pulse"[31m
            [36m/>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"grid grid-cols-1 md:grid-cols-4 gap-6"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0 p-6"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center justify-between mb-4"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-dollar-sign h-5 w-5 text-gray-300"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<line[31m
                    [33mx1[31m=[32m"12"[31m
                    [33mx2[31m=[32m"12"[31m
                    [33my1[31m=[32m"2"[31m
                    [33my2[31m=[32m"22"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-8 animate-pulse"[31m
                [36m/>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"space-y-2"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-20 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-16 animate-pulse"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
    ...[39m
   [32mâœ“[39m IntelligentSkeleton[2m > [22mrenders chart skeleton with correct type[32m 17[2mms[22m[39m
[31m   [31mÃ—[31m IntelligentSkeleton[2m > [22mrenders table skeleton with custom dimensions[39m[32m 44[2mms[22m[39m
[31m     â†’ Unable to find an element by: [data-testid="/skeleton/"]

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-4"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-6 pt-0 p-6"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"space-y-4"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center justify-between"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-6 w-32 animate-pulse"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-2"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-24 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-8 animate-pulse"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"grid gap-4"[31m
              [33mstyle[31m=[32m"grid-template-columns: repeat(4, 1fr);"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [33mstyle[31m=[32m"animation-delay: 0s;"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [33mstyle[31m=[32m"animation-delay: 0.1s;"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [33mstyle[31m=[32m"animation-delay: 0.2s;"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [33mstyle[31m=[32m"animation-delay: 0.30000000000000004s;"[31m
              [36m/>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"grid gap-4"[31m
                [33mstyle[31m=[32m"grid-template-columns: repeat(4, 1fr);"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-3/4 animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.05s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.1s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-1/2 animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.15000000000000002s;"[31m
                [36m/>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"grid gap-4"[31m
                [33mstyle[31m=[32m"grid-template-columns: repeat(4, 1fr);"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-3/4 animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.2s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.25s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.30000000000000004s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-1/2 animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.35000000000000003s;"[31m
                [36m/>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"grid gap-4"[31m
                [33mstyle[31m=[32m"grid-template-columns: repeat(4, 1fr);"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-3/4 animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.4s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.45s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.5s;"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-1/2 animate-pulse"[31m
                  [33mstyle[31m=[32m"animation-delay: 0.55s;"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31mÃ—[31m IntelligentSkeleton[2m > [22mcan disable animations[39m[32m 27[2mms[22m[39m
[31m     â†’ Unable to find an element with the text: /Loading content/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-4"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-6"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"space-y-3"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-64"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-96"[31m
              [36m/>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-32"[31m
              [36m/>[31m
              [36m<div[31m
                [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-10"[31m
              [36m/>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center gap-2"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-6 w-16"[31m
            [36m/>[31m
            [36m<span[31m
              [33mclass[31m=[32m"text-gray-300"[31m
            [36m>[31m
              [0m/[0m
            [36m</span>[31m
            [36m<div[31m
              [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-6 w-24"[31m
            [36m/>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"grid grid-cols-1 md:grid-cols-4 gap-6"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0 p-6"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center justify-between mb-4"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-dollar-sign h-5 w-5 text-gray-300"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<line[31m
                    [33mx1[31m=[32m"12"[31m
                    [33mx2[31m=[32m"12"[31m
                    [33my1[31m=[32m"2"[31m
                    [33my2[31m=[32m"22"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-8"[31m
                [36m/>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"space-y-2"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-20"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-16"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0 p-6"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center justify-between mb-4"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-trending-up h-5 w-5 text-gray-300"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M16 7h6v6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"m22 7-8.5 8.5-5-5L2 17"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-8"[31m
                [36m/>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"space-y-2"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-20"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-16"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0 p-6"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center justify-between mb-4"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target h-5 w-5 text-gray-300"[31m
      ...[39m
[31m   [31mÃ—[31m Integration Tests[2m > [22mcomponents work together in typical usage[39m[32m 91[2mms[22m[39m
[31m     â†’ Unable to find an element with the text: /Series A Chasm/. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-6"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"space-y-2"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between"[31m
          [36m>[31m
            [36m<div>[31m
              [36m<h2[31m
                [33mclass[31m=[32m"text-2xl font-bold font-inter text-slate-900"[31m
              [36m>[31m
                [0mPortfolio Analysis[0m
              [36m</h2>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground text-sm"[31m
              [36m>[31m
                [0mExecutive Overview[0m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"text-xs text-slate-500"[31m
              [36m>[31m
                [0mfor [0m
                [0mLP, Limited Partner, Board Member, Executive[0m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-between p-4 bg-slate-50 rounded-lg border"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-4"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-center gap-2"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"text-sm font-medium text-slate-600"[31m
                [36m>[31m
                  [0mComplexity Level:[0m
                [36m</div>[31m
                [36m<div[31m
                  [33maria-valuemax[31m=[32m"100"[31m
                  [33maria-valuemin[31m=[32m"0"[31m
                  [33mclass[31m=[32m"relative h-4 w-full overflow-hidden rounded-full bg-secondary w-20 h-2"[31m
                  [33mdata-max[31m=[32m"100"[31m
                  [33mdata-state[31m=[32m"indeterminate"[31m
                  [33mrole[31m=[32m"progressbar"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"h-full w-full flex-1 bg-primary transition-all"[31m
                    [33mdata-max[31m=[32m"100"[31m
                    [33mdata-state[31m=[32m"indeterminate"[31m
                    [33mstyle[31m=[32m"transform: translateX(-75%);"[31m
                  [36m/>[31m
                [36m</div>[31m
                [36m<span[31m
                  [33mclass[31m=[32m"text-sm font-semibold text-slate-700"[31m
                [36m>[31m
                  [0m1[0m
                  [0m/4[0m
                [36m</span>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-1"[31m
            [36m>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-beige disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 font-poppins font-medium bg-charcoal text-white hover:bg-charcoal/90 shadow-card hover:shadow-elevated h-9 px-3 py-1.5 text-sm transition-all duration-200 bg-blue-600 text-white"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-eye w-4 h-4 mr-2"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"3"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [0mExecutive[0m
              [36m</button>[31m
              [36m<svg[31m
                [33maria-hidden[31m=[32m"true"[31m
                [33mclass[31m=[32m"lucide lucide-chevron-right w-4 h-4 text-slate-400"[31m
                [33mfill[31m=[32m"none"[31m
                [33mheight[31m=[32m"24"[31m
                [33mstroke[31m=[32m"currentColor"[31m
                [33mstroke-linecap[31m=[32m"round"[31m
                [33mstroke-linejoin[31m=[32m"round"[31m
                [33mstroke-width[31m=[32m"2"[31m
                [33mviewBox[31m=[32m"0 0 24 24"[31m
                [33mwidth[31m=[32m"24"[31m
                [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
              [36m>[31m
                [36m<path[31m
                  [33md[31m=[32m"m9 18 6-6-6-6"[31m
                [36m/>[31m
              [36m</svg>[31m
              [36m<button[31m
                [33mclass[31m=[32m"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-beige disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 font-poppins font-medium bg-transparent text-charcoal hover:bg-lightGray font-medium h-9 px-3 py-1.5 text-sm transition-all duration-200 text-slate-500 hover:text-slate-700"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target w-4 h-4 mr-2"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
           ...[39m
[31m   [31mÃ—[31m Integration Tests[2m > [22mhandles loading states correctly[39m[32m 26[2mms[22m[39m
[31m     â†’ Unable to find an element with the text: Loading Insights. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"space-y-4"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center p-4 bg-slate-50 rounded-lg border border-dashed"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-center justify-center gap-2 text-slate-600"[31m
          [36m>[31m
            [36m<svg[31m
              [33maria-hidden[31m=[32m"true"[31m
              [33mclass[31m=[32m"lucide lucide-calculator h-5 w-5"[31m
              [33mfill[31m=[32m"none"[31m
              [33mheight[31m=[32m"24"[31m
              [33mstroke[31m=[32m"currentColor"[31m
              [33mstroke-linecap[31m=[32m"round"[31m
              [33mstroke-linejoin[31m=[32m"round"[31m
              [33mstroke-width[31m=[32m"2"[31m
              [33mviewBox[31m=[32m"0 0 24 24"[31m
              [33mwidth[31m=[32m"24"[31m
              [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
            [36m>[31m
              [36m<rect[31m
                [33mheight[31m=[32m"20"[31m
                [33mrx[31m=[32m"2"[31m
                [33mwidth[31m=[32m"16"[31m
                [33mx[31m=[32m"4"[31m
                [33my[31m=[32m"2"[31m
              [36m/>[31m
              [36m<line[31m
                [33mx1[31m=[32m"8"[31m
                [33mx2[31m=[32m"16"[31m
                [33my1[31m=[32m"6"[31m
                [33my2[31m=[32m"6"[31m
              [36m/>[31m
              [36m<line[31m
                [33mx1[31m=[32m"16"[31m
                [33mx2[31m=[32m"16"[31m
                [33my1[31m=[32m"14"[31m
                [33my2[31m=[32m"18"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M16 10h.01"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M12 10h.01"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M8 10h.01"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M12 14h.01"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M8 14h.01"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M12 18h.01"[31m
              [36m/>[31m
              [36m<path[31m
                [33md[31m=[32m"M8 18h.01"[31m
              [36m/>[31m
            [36m</svg>[31m
            [36m<span[31m
              [33mclass[31m=[32m"text-sm font-medium"[31m
            [36m>[31m
              [0mLoading Loading Insights[0m
            [36m</span>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"space-y-4"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start justify-between"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-3"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-10 rounded-lg animate-pulse"[31m
                  [36m/>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"space-y-2"[31m
                  [36m>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-5 w-40 animate-pulse"[31m
                    [36m/>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"flex items-center gap-2"[31m
                    [36m>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-16 animate-pulse"[31m
                      [36m/>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-20 animate-pulse"[31m
                      [36m/>[31m
                    [36m</div>[31m
                  [36m</div>[31m
                [36m</div>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-16 animate-pulse"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"space-y-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-5/6 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-4/6 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center justify-between pt-2 border-t"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-20 animate-pulse"[31m
                  [36m/>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-12 animate-pulse"[31m
                  [36m/>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"[31m
              [33mstyle[31m=[32m"animation-delay: 0.3s;"[31m
            [36m/>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start justify-between"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-3"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-10 rounded-lg animate-pulse"[31m
                  [36m/>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"space-y-2"[31m
                  [36m>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-5 w-40 animate-pulse"[31m
                    [36m/>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"flex items-center gap-2"[31m
                    [36m>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-16 animate-pulse"[31m
                      [36m/>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-20 animate-pulse"[31m
                      [36m/>[31m
                    [36m</div>[31m
                  [36m</div>[31m
                [36m</div>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-16 animate-pulse"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"space-y-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-5/6 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-4/6 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center justify-between pt-2 border-t"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-20 animate-pulse"[31m
                  [36m/>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-12 animate-pulse"[31m
                  [36m/>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"[31m
              [33mstyle[31m=[32m"animation-delay: 0.6s;"[31m
            [36m/>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins relative overflow-hidden"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start justify-between"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-3"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-10 w-10 rounded-lg animate-pulse"[31m
                  [36m/>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"space-y-2"[31m
                  [36m>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-5 w-40 animate-pulse"[31m
                    [36m/>[31m
                    [36m<div[31m
                      [33mclass[31m=[32m"flex items-center gap-2"[31m
                    [36m>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-16 animate-pulse"[31m
                      [36m/>[31m
                      [36m<div[31m
                        [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-20 animate-pulse"[31m
                      [36m/>[31m
                    [36m</div>[31m
                  [36m</div>[31m
                [36m</div>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-8 w-16 animate-pulse"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-6 pt-0"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"space-y-3"[31m
              [36m>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-full animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-5/6 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-4 w-4/6 animate-pulse"[31m
                [36m/>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center justify-between pt-2 border-t"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-20 animate-pulse"[31m
                  [36m/>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"animate-pulse rounded-md bg-muted h-3 w-12 animate-pulse"[31m
                  [36m/>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full animate-[shimmer_2s_infinite]"[31m
              [33mstyle[31m=[32m"animation-delay: 0.8999999999999999s;"[31m
            [36m/>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31mÃ—[31m Data Processing[2m > [22mhandles edge cases in Monte Carlo data[39m[32m 33[2mms[22m[39m
[31m     â†’ Unable to find an element with the text: /power law/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-4"[31m
    [36m>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"AI Insight: High Concentration Risk"[31m
        [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins ai-insight-enhanced transition-all duration-300 ease-professional hover:shadow-ai-insight hover:-translate-y-1 reduced-motion-safe focus-visible-ring high-contrast-border bg-semantic-info-50 border-semantic-info-200 medium"[31m
        [33mrole[31m=[32m"article"[31m
        [33mtabindex[31m=[32m"0"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-start justify-between"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"p-2 rounded-lg"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-trending-up h-5 w-5 text-semantic-info-800"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M16 7h6v6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"m22 7-8.5 8.5-5-5L2 17"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</div>[31m
              [36m<div>[31m
                [36m<h3[31m
                  [33mclass[31m=[32m"font-semibold font-inter text-semantic-info-800 text-base"[31m
                [36m>[31m
                  [0mHigh Concentration Risk[0m
                [36m</h3>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-2 mt-1"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-primary text-primary-foreground hover:bg-primary/80 text-xs"[31m
                  [36m>[31m
                    [0mRisk Analysis[0m
                  [36m</div>[31m
                  [36m<span[31m
                    [33mclass[31m=[32m"text-xs text-gray-500"[31m
                  [36m>[31m
                    [0m78[0m
                    [0m% confidence[0m
                  [36m</span>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"ai-confidence-progress w-12"[31m
              [36m>[31m
                [36m<div[31m
                  [33maria-label[31m=[32m"Confidence: 78%"[31m
                  [33maria-valuemax[31m=[32m"100"[31m
                  [33maria-valuemin[31m=[32m"0"[31m
                  [33maria-valuenow[31m=[32m"78"[31m
                  [33mclass[31m=[32m"progress-fill medium"[31m
                  [33mrole[31m=[32m"progressbar"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-6 pt-0 pt-0"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"space-y-3"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-lightbulb h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M9 18h6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M10 22h4"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins leading-relaxed text-semantic-info-800 text-base"[31m
                  [33mid[31m=[32m"insight-text-0"[31m
                [36m>[31m
                  [0mTop 50% of investments drive 100% of total returns.[0m
                [36m</p>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"10"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"6"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins font-medium leading-relaxed text-semantic-info-800 text-base"[31m
                  [33mid[31m=[32m"recommendation-text-0"[31m
                [36m>[31m
                  [0mDiversify portfolio construction and consider increasing check sizes for high-conviction opportunities to reduce concentration risk.[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"AI Insight: Strong IRR Performance"[31m
        [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins ai-insight-enhanced transition-all duration-300 ease-professional hover:shadow-ai-insight hover:-translate-y-1 reduced-motion-safe focus-visible-ring high-contrast-border bg-semantic-success-50 border-semantic-success-200 high"[31m
        [33mrole[31m=[32m"article"[31m
        [33mtabindex[31m=[32m"0"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-start justify-between"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"p-2 rounded-lg"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target h-5 w-5 text-semantic-success-800"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"10"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"6"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</div>[31m
              [36m<div>[31m
                [36m<h3[31m
                  [33mclass[31m=[32m"font-semibold font-inter text-semantic-success-800 text-base"[31m
                [36m>[31m
                  [0mStrong IRR Performance[0m
                [36m</h3>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-2 mt-1"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80 text-xs"[31m
                  [36m>[31m
                    [0mOpportunity[0m
                  [36m</div>[31m
                  [36m<span[31m
                    [33mclass[31m=[32m"text-xs text-gray-500"[31m
                  [36m>[31m
                    [0m88[0m
                    [0m% confidence[0m
                  [36m</span>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"ai-confidence-progress w-12"[31m
              [36m>[31m
                [36m<div[31m
                  [33maria-label[31m=[32m"Confidence: 88%"[31m
                  [33maria-valuemax[31m=[32m"100"[31m
                  [33maria-valuemin[31m=[32m"0"[31m
                  [33maria-valuenow[31m=[32m"88"[31m
                  [33mclass[31m=[32m"progress-fill high"[31m
                  [33mrole[31m=[32m"progressbar"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-6 pt-0 pt-0"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"space-y-3"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-lightbulb h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M9 18h6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M10 22h4"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins leading-relaxed text-semantic-success-800 text-base"[31m
                  [33mid[31m=[32m"insight-text-1"[31m
                [36m>[31m
                  [0mPortfolio IRR of 50% exceeds venture benchmarks, indicating strong investment selection and timing.[0m
                [36m</p>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"10"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"6"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins font-medium leading-relaxed text-semantic-success-800 text-base"[31m
                  [33mid[31m=[32m"recommendation-text-1"[31m
                [36m>[31m
                  [0mMaintain current investment thesis and consider raising fund size to capitalize on deal flow quality.[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[31m   [31mÃ—[31m Data Processing[2m > [22mgenerates appropriate insights for different failure rates[39m[32m 17[2mms[22m[39m
[31m     â†’ Found multiple elements with the text: /Series A Chasm/i

Here are the matching elements:

Ignored nodes: comments, script, style
[36m<h3[31m
  [33mclass[31m=[32m"font-semibold font-inter text-semantic-warning-800 text-base"[31m
[36m>[31m
  [0mSeries A Chasm Detected[0m
[36m</h3>[31m

Ignored nodes: comments, script, style
[36m<p[31m
  [33mclass[31m=[32m"font-poppins leading-relaxed text-semantic-warning-800 text-base"[31m
  [33mid[31m=[32m"insight-text-0"[31m
[36m>[31m
  [0mYour 80% failure rate reflects the harsh reality of the Series A Chasm, where most startups fail to secure subsequent funding rounds.[0m
[36m</p>[31m

(If this is intentional, then use the `*AllBy*` variant of the query (like `queryAllByText`, `getAllByText`, or `findAllByText`)).

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"space-y-4"[31m
    [36m>[31m
      [36m<div[31m
        [33maria-label[31m=[32m"AI Insight: Series A Chasm Detected"[31m
        [33mclass[31m=[32m"rounded-lg bg-white border border-lightGray shadow-card font-poppins ai-insight-enhanced transition-all duration-300 ease-professional hover:shadow-ai-insight hover:-translate-y-1 reduced-motion-safe focus-visible-ring high-contrast-border bg-semantic-warning-50 border-semantic-warning-200 low"[31m
        [33mrole[31m=[32m"article"[31m
        [33mtabindex[31m=[32m"0"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"flex flex-col space-y-1.5 p-6 pb-3"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-start justify-between"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-3"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"p-2 rounded-lg"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-triangle-alert h-5 w-5 text-semantic-warning-800"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M12 9v4"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M12 17h.01"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</div>[31m
              [36m<div>[31m
                [36m<h3[31m
                  [33mclass[31m=[32m"font-semibold font-inter text-semantic-warning-800 text-base"[31m
                [36m>[31m
                  [0mSeries A Chasm Detected[0m
                [36m</h3>[31m
                [36m<div[31m
                  [33mclass[31m=[32m"flex items-center gap-2 mt-1"[31m
                [36m>[31m
                  [36m<div[31m
                    [33mclass[31m=[32m"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 text-foreground text-xs"[31m
                  [36m>[31m
                    [0mRisk Analysis[0m
                  [36m</div>[31m
                  [36m<span[31m
                    [33mclass[31m=[32m"text-xs text-gray-500"[31m
                  [36m>[31m
                    [0m85[0m
                    [0m% confidence[0m
                  [36m</span>[31m
                [36m</div>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-center gap-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"ai-confidence-progress w-12"[31m
              [36m>[31m
                [36m<div[31m
                  [33maria-label[31m=[32m"Confidence: 85%"[31m
                  [33maria-valuemax[31m=[32m"100"[31m
                  [33maria-valuemin[31m=[32m"0"[31m
                  [33maria-valuenow[31m=[32m"85"[31m
                  [33mclass[31m=[32m"progress-fill low"[31m
                  [33mrole[31m=[32m"progressbar"[31m
                [36m/>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
        [36m<div[31m
          [33mclass[31m=[32m"p-6 pt-0 pt-0"[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"space-y-3"[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"space-y-2"[31m
            [36m>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-lightbulb h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M9 18h6"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M10 22h4"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins leading-relaxed text-semantic-warning-800 text-base"[31m
                  [33mid[31m=[32m"insight-text-0"[31m
                [36m>[31m
                  [0mYour 80% failure rate reflects the harsh reality of the Series A Chasm, where most startups fail to secure subsequent funding rounds.[0m
                [36m</p>[31m
              [36m</div>[31m
              [36m<div[31m
                [33mclass[31m=[32m"flex items-start gap-2"[31m
              [36m>[31m
                [36m<svg[31m
                  [33maria-hidden[31m=[32m"true"[31m
                  [33mclass[31m=[32m"lucide lucide-target h-4 w-4 text-gray-500 mt-0.5 flex-shrink-0"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mheight[31m=[32m"24"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mstroke-linecap[31m=[32m"round"[31m
                  [33mstroke-linejoin[31m=[32m"round"[31m
                  [33mstroke-width[31m=[32m"2"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [33mwidth[31m=[32m"24"[31m
                  [33mxmlns[31m=[32m"http://www.w3.org/2000/svg"[31m
                [36m>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"10"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"6"[31m
                  [36m/>[31m
                  [36m<circle[31m
                    [33mcx[31m=[32m"12"[31m
                    [33mcy[31m=[32m"12"[31m
                    [33mr[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
                [36m<p[31m
                  [33mclass[31m=[32m"font-poppins font-medium leading-relaxed text-semantic-warning-800 text-base"[31m
                  [33mid[31m=[32m"recommendation-text-0"[31m
                [36m>[31m
                  [0mConsider increasing reserve allocation to 36% to support portfolio companies through this critical transition.[0m
                [36m</p>[31m
              [36m</div>[31m
            [36m</div>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m[39m
[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should NOT navigate backward when persistence fails
[22m[39m[EXPECTED FAILURE] BACK navigation happened despite persistence failure
Current step: generalInfo
Expected: sectorProfiles

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should cleanup gracefully when component unmounts during persistence
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }
[ModelingWizard] Progress saved to localStorage { timestamp: [33m1765448259177[39m }

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should implement exponential backoff for retries
[22m[39m[ModelingWizard] Step validation check { step: [32m'generalInfo'[39m, isValid: [33mtrue[39m }

[90mstdout[2m | tests/unit/jsdom-smoke.test.ts[2m > [22m[2mjsdom smoke test[2m > [22m[2mhas a window object
[22m[39m[jsdom-smoke] typeof window: object

[90mstdout[2m | tests/unit/jsdom-smoke.test.ts[2m > [22m[2mjsdom smoke test[2m > [22m[2mhas a document object
[22m[39m[jsdom-smoke] typeof document: object

[90mstdout[2m | tests/unit/jsdom-smoke.test.ts[2m > [22m[2mjsdom smoke test[2m > [22m[2mhas a document.body element
[22m[39m[jsdom-smoke] body exists? [33mtrue[39m
[jsdom-smoke] body tagName: BODY

 [32mâœ“[39m [30m[42m server [49m[39m tests/unit/jsdom-smoke.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 18[2mms[22m[39m
 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/performance/watch-debounce.test.tsx [2m([22m[2m9 tests[22m[2m | [22m[31m9 failed[39m[2m)[22m[33m 1159[2mms[22m[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Performance[2m > [22mshould trigger <5 calculations per value change during rapid typing[39m[33m 427[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Performance[2m > [22mshould trigger exactly 1 calculation for single field change after debounce[39m[32m 160[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Performance[2m > [22mshould debounce calculations by at least 200ms[39m[32m 97[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Calculation Performance[2m > [22mshould batch multiple rapid changes into single calculation[39m[32m 90[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Auto-Save Performance[2m > [22mshould debounce auto-save to max 1 call per 500ms[39m[32m 99[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Auto-Save Performance[2m > [22mshould not spam auto-save during continuous typing[39m[32m 70[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Memoization[2m > [22mshould not recalculate when value has not changed[39m[32m 70[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Memoization[2m > [22mshould maintain memoization when changing unrelated fields[39m[32m 85[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
[31m   [31mÃ—[31m CapitalAllocationStep - Performance Benchmarks[2m > [22mshould complete 10 rapid keystrokes in <2 seconds total calculation time[39m[32m 57[2mms[22m[39m
[31m     â†’ sector.stages is not iterable[39m
 [32mâœ“[39m [30m[42m client [49m[39m tests/unit/legacy/fund-setup.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 15[2mms[22m[39m
 [32mâœ“[39m [30m[42m client [49m[39m tests/unit/investment-strategy-step.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 11[2mms[22m[39m
 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/pages/portfolio-constructor.test.tsx [2m([22m[2m44 tests[22m[2m | [22m[31m44 failed[39m[2m)[22m[33m 2419[2mms[22m[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould render the main layout with header and navigation tabs[39m[33m 502[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould display key metrics overview cards[39m[32m 103[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould show loading state when funds are loading[39m[32m 89[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display fund configuration form[39m[32m 97[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display check size configuration[39m[32m 70[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould update fund size when input changes[39m[32m 79[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould update reserve percentage using slider[39m[32m 81[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display allocation charts[39m[32m 54[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould show calculated metrics[39m[32m 69[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould validate form inputs[39m[32m 104[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario selection buttons[39m[32m 74[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould allow switching between scenarios[39m[32m 73[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario configuration controls[39m[32m 47[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould update scenario parameters with sliders[39m[32m 42[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario results[39m[32m 57[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould update market environment selection[39m[32m 40[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display projected fund metrics[39m[32m 31[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display risk analysis section[39m[32m 37[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould show key risk factors[39m[32m 41[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display metrics in proper format[39m[32m 41[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould display capital deployment schedule chart[39m[32m 32[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould show deployment metrics[39m[32m 29[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould display timeline information correctly[39m[32m 28[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould save strategy when save button is clicked[39m[32m 27[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould run simulation when run button is clicked[39m[32m 35[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould update calculated metrics when inputs change[39m[32m 33[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould handle form validation errors[39m[32m 28[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould maintain state when switching tabs[39m[32m 27[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould format currency values correctly[39m[32m 24[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould format percentage values correctly[39m[32m 33[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould display proper metric values[39m[32m 27[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have proper ARIA labels[39m[32m 35[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have proper heading hierarchy[39m[32m 25[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have keyboard navigation support[39m[32m 34[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould handle different viewport sizes gracefully[39m[32m 26[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing fund data gracefully[39m[32m 26[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle extreme input values[39m[32m 30[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle simulation errors gracefully[39m[32m 22[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle concurrent operations[39m[32m 30[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould render within reasonable time[39m[32m 26[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould not cause memory leaks on unmount[39m[32m 26[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould handle rapid input changes efficiently[39m[32m 29[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mIntegration Scenarios[2m > [22mshould support complete workflow from strategy building to simulation[39m[32m 25[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[31m   [31mÃ—[31m PortfolioConstructor[2m > [22mIntegration Scenarios[2m > [22mshould maintain data consistency across different views[39m[32m 24[2mms[22m[39m
[31m     â†’ ResizeObserver is not defined[39m
[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should implement exponential backoff for retries
[22m[39m[EXPECTED FAILURE] Retry mechanism not implemented
Retry attempts: [33m1[39m
Expected: 3 retries with exponential backoff

[90mstdout[2m | tests/unit/modeling-wizard-persistence.test.tsx[2m > [22m[2mModeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[2m[RED] should have context fields for persistence tracking
[22m[39m[EXPECTED FAILURE] Missing context fields for persistence tracking
Missing fields: [ [32m'intent'[39m ]
Current context keys: [
  [32m'steps'[39m,                [32m'currentStep'[39m,
  [32m'currentStepIndex'[39m,     [32m'totalSteps'[39m,
  [32m'completedSteps'[39m,       [32m'visitedSteps'[39m,
  [32m'validationErrors'[39m,     [32m'isStepValid'[39m,
  [32m'lastSaved'[39m,            [32m'isDirty'[39m,
  [32m'persistenceError'[39m,     [32m'retryCount'[39m,
  [32m'lastPersistAttempt'[39m,   [32m'navigationIntent'[39m,
  [32m'targetStep'[39m,           [32m'submissionError'[39m,
  [32m'submissionRetryCount'[39m, [32m'skipOptionalSteps'[39m,
  [32m'autoSaveInterval'[39m
]

 [31mâ¯[39m [30m[42m client [49m[39m tests/unit/modeling-wizard-persistence.test.tsx [2m([22m[2m12 tests[22m[2m | [22m[31m10 failed[39m[2m)[22m[33m 9587[2mms[22m[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should persist data BEFORE navigating to next step[39m[32m 162[2mms[22m[39m
[31m     â†’ Navigation executed before persistence (wrong order)[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should NOT navigate when persistence fails (QuotaExceededError)[39m[32m 134[2mms[22m[39m
[31m     â†’ expected 'sectorProfiles' to be 'generalInfo' // Object.is equality[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should support retry after persistence failure[39m[32m 144[2mms[22m[39m
[31m     â†’ Retry mechanism not implemented[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should allow navigation even if auto-save persistence fails[39m[33m 739[2mms[22m[39m
[31m     â†’ Intent field not present in context[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should NOT navigate backward when persistence fails[39m[32m 238[2mms[22m[39m
[31m     â†’ Backward navigation executed despite persistence failure[39m
   [32mâœ“[39m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should cleanup gracefully when component unmounts during persistence[32m 112[2mms[22m[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should implement exponential backoff for retries[39m[33m 8018[2mms[22m[39m
[31m     â†’ Exponential backoff not implemented[39m
[31m   [31mÃ—[31m Modeling Wizard - Persistence Before Navigation (RED PHASE)[2m > [22m[RED] should have context fields for persistence tracking[39m[32m 16[2mms[22m[39m
[31m     â†’ Missing persistence tracking fields: intent[39m
   [32mâœ“[39m PR #1: Context Fields & Service Integration[2m > [22mshould initialize persistence tracking fields to null/0[32m 5[2mms[22m[39m
[31m   [31mÃ—[31m PR #1: Context Fields & Service Integration[2m > [22mpersistDataService should save to localStorage successfully[39m[32m 9[2mms[22m[39m
[31m     â†’ persistDataService2 is not a function[39m
[31m   [31mÃ—[31m PR #1: Context Fields & Service Integration[2m > [22mpersistDataService should throw on QuotaExceededError[39m[32m 4[2mms[22m[39m
[31m     â†’ persistDataService2 is not a function[39m
[31m   [31mÃ—[31m PR #1: Context Fields & Service Integration[2m > [22mpersistDataService should throw on SecurityError (privacy mode)[39m[32m 4[2mms[22m[39m
[31m     â†’ persistDataService2 is not a function[39m
 [31mâ¯[39m [30m[42m server [49m[39m tests/unit/api/portfolio-intelligence.test.ts [2m([22m[2m75 tests[22m[2m | [22m[31m38 failed[39m[2m)[22m[33m 1459720[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould create a new strategy with valid data[39m[33m 5015[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould require fundId in query parameters[39m[33m 5022[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould validate fundId as positive integer[39m[33m 5009[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould validate strategy name is required[39m[33m 5021[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould validate sector allocation percentages[39m[33m 5006[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould validate model type enum values[39m[33m 5010[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould handle missing required fields[39m[33m 5014[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPOST /api/portfolio/strategies[2m > [22mshould require authentication[39m[33m 5019[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mGET /api/portfolio/strategies/:fundId[2m > [22mshould retrieve strategies for a fund[32m 38[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mGET /api/portfolio/strategies/:fundId[2m > [22mshould validate fundId parameter[32m 25[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mGET /api/portfolio/strategies/:fundId[2m > [22mshould support query filters[32m 9[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mGET /api/portfolio/strategies/:fundId[2m > [22mshould handle negative fundId[32m 9[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPUT /api/portfolio/strategies/:id[2m > [22mshould update a strategy[32m 18[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPUT /api/portfolio/strategies/:id[2m > [22mshould require strategy ID[32m 14[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mPUT /api/portfolio/strategies/:id[2m > [22mshould validate update data[32m 9[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mDELETE /api/portfolio/strategies/:id[2m > [22mshould delete (deactivate) a strategy[32m 9[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mStrategy Management Routes[2m > [22mDELETE /api/portfolio/strategies/:id[2m > [22mshould require strategy ID[32m 7[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios[2m > [22mshould create a new scenario[39m[33m 5012[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios[2m > [22mshould validate UUID format for strategyModelId[39m[33m 5011[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios[2m > [22mshould validate scenario type enum[39m[33m 5021[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios[2m > [22mshould validate market environment enum[39m[33m 5015[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mGET /api/portfolio/scenarios/:fundId[2m > [22mshould retrieve scenarios for a fund[32m 22[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mGET /api/portfolio/scenarios/:fundId[2m > [22mshould support scenario type filtering[32m 14[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mGET /api/portfolio/scenarios/:fundId[2m > [22mshould support status filtering[32m 10[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/compare[2m > [22mshould compare multiple scenarios[39m[33m 5023[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/compare[2m > [22mshould validate UUID formats[39m[33m 5018[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/compare[2m > [22mshould require at least one comparison scenario[39m[33m 5012[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/compare[2m > [22mshould limit number of comparison scenarios[39m[33m 5018[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/:id/simulate[2m > [22mshould run Monte Carlo simulation on scenario[39m[33m 5015[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/:id/simulate[2m > [22mshould validate simulation type[39m[33m 5009[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/:id/simulate[2m > [22mshould validate number of runs[39m[33m 5023[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mScenario Operations Routes[2m > [22mPOST /api/portfolio/scenarios/:id/simulate[2m > [22mshould require scenario ID[32m 20[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/optimize[2m > [22mshould optimize reserve allocation[39m[33m 5006[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/optimize[2m > [22mshould validate strategy type enum[39m[33m 5023[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/optimize[2m > [22mshould validate percentage constraints[39m[33m 5016[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/optimize[2m > [22mshould validate optimization objective[39m[33m 5017[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mGET /api/portfolio/reserves/strategies/:fundId[2m > [22mshould retrieve reserve strategies for a fund[32m 19[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mGET /api/portfolio/reserves/strategies/:fundId[2m > [22mshould support strategy type filtering[32m 11[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mGET /api/portfolio/reserves/strategies/:fundId[2m > [22mshould support active status filtering[32m 9[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/backtest[2m > [22mshould run reserve strategy backtest[39m[33m 5010[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/backtest[2m > [22mshould validate date formats[39m[33m 5016[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mReserve Optimization Routes[2m > [22mPOST /api/portfolio/reserves/backtest[2m > [22mshould validate benchmark strategy[39m[33m 5008[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts[2m > [22mshould generate performance forecast[39m[33m 5010[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts[2m > [22mshould validate forecast type[39m[33m 5016[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts[2m > [22mshould validate methodology[39m[33m 5009[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts[2m > [22mshould validate forecast horizon[39m[33m 5024[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mGET /api/portfolio/forecasts/:scenarioId[2m > [22mshould retrieve forecasts for a scenario[32m 19[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mGET /api/portfolio/forecasts/:scenarioId[2m > [22mshould support forecast type filtering[32m 12[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mGET /api/portfolio/forecasts/:scenarioId[2m > [22mshould support status filtering[32m 10[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mGET /api/portfolio/forecasts/:scenarioId[2m > [22mshould require scenario ID[32m 8[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts/validate[2m > [22mshould validate forecast against actuals[32m 7[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts/validate[2m > [22mshould validate UUID format for forecastId[32m 12[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance Forecasting Routes[2m > [22mPOST /api/portfolio/forecasts/validate[2m > [22mshould validate date format[32m 7[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/templates[2m > [22mshould retrieve strategy templates[32m 6[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/templates[2m > [22mshould support category filtering[32m 6[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/templates[2m > [22mshould support risk profile filtering[32m 7[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/templates[2m > [22mshould support combined filtering[32m 6[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mPOST /api/portfolio/quick-scenario[2m > [22mshould generate quick scenario[32m 9[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mPOST /api/portfolio/quick-scenario[2m > [22mshould validate market condition[32m 5[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mPOST /api/portfolio/quick-scenario[2m > [22mshould validate risk profile[32m 5[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mPOST /api/portfolio/quick-scenario[2m > [22mshould generate different projections for different risk profiles[32m 9[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/metrics/:scenarioId[2m > [22mshould retrieve real-time metrics for scenario[32m 4[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/metrics/:scenarioId[2m > [22mshould support metric type filtering[32m 7[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/metrics/:scenarioId[2m > [22mshould support time range filtering[32m 12[2mms[22m[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mQuick Actions Routes[2m > [22mGET /api/portfolio/metrics/:scenarioId[2m > [22mshould require scenario ID[32m 4[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mError Handling and Edge Cases[2m > [22mshould handle internal server errors gracefully[39m[33m 5026[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing content-type header[39m[33m 5014[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mError Handling and Edge Cases[2m > [22mshould handle extremely large request bodies[39m[33m 5021[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mError Handling and Edge Cases[2m > [22mshould validate negative numbers where inappropriate[39m[33m 5005[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mError Handling and Edge Cases[2m > [22mshould handle concurrent requests properly[32m 24[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mPerformance and Rate Limiting[2m > [22mshould handle multiple simultaneous strategy creation requests[39m[33m 5012[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [32mâœ“[39m Portfolio Intelligence API Routes[2m > [22mPerformance and Rate Limiting[2m > [22mshould respond within reasonable time limits[32m 23[2mms[22m[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mSecurity and Input Validation[2m > [22mshould sanitize HTML in string inputs[39m[33m 5008[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mSecurity and Input Validation[2m > [22mshould validate against SQL injection patterns[39m[33m 5015[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m   [31mÃ—[31m Portfolio Intelligence API Routes[2m > [22mSecurity and Input Validation[2m > [22mshould validate UUID formats strictly[39m[33m 1273498[2mms[22m[39m
[31m     â†’ Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m

[2m Test Files [22m [1m[31m57 failed[39m[22m[2m | [22m[1m[32m49 passed[39m[22m[2m | [22m[33m3 skipped[39m[90m (109)[39m
[2m      Tests [22m [1m[31m475 failed[39m[22m[2m | [22m[1m[32m1123 passed[39m[22m[2m | [22m[33m85 skipped[39m[90m (1683)[39m
[2m   Start at [22m 10:17:18
[2m   Duration [22m 1511.48s[2m (transform 15.30s, setup 11.65s, collect 30.94s, tests 1500.93s, environment 13.05s, prepare 24.56s)[22m

