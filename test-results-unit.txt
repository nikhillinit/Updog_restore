
> rest-express@1.3.2 test:unit
> cross-env TZ=UTC vitest run


[1m[46m RUN [49m[22m [36mv3.2.4 [39m[90mc:/dev/Updog_restore[39m

[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:17 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:18 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:18 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:20 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "crypto" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/setup/test-infrastructure.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:20 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [31m❯[39m tests/unit/services/time-travel-analytics.test.ts [2m([22m[2m39 tests[22m[2m | [22m[31m35 failed[39m[2m)[22m[33m 472[2mms[22m[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create quarterly snapshot with comprehensive data[39m[32m 100[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create milestone snapshot for investment event[39m[32m 11[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create emergency snapshot with market context[39m[32m 9[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould capture comprehensive portfolio state[39m[32m 7[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould capture fund metrics and performance data[39m[32m 38[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mgetSnapshots[2m > [22mshould retrieve snapshots with filtering options[39m[32m 6[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mgetSnapshots[2m > [22mshould return all snapshots when no filters provided[39m[32m 4[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould create period-over-period comparison[39m[32m 3[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould create before/after event comparison[39m[32m 4[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould calculate value changes accurately[39m[32m 3[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould analyze portfolio changes comprehensively[39m[32m 4[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould generate actionable insights[39m[32m 6[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould perform full state restoration[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould perform partial state restoration[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould capture restoration metadata and timing[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould track affected entities during restoration[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create investment timeline event[39m[32m 7[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create exit timeline event[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create valuation update event[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create market event with external context[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould retrieve timeline events with date filtering[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould filter by event types[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould return all events when no filters provided[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould validate snapshot data integrity[39m[32m 10[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould maintain consistency across comparison calculations[39m[32m 5[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould track restoration success/failure accurately[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould handle large portfolio datasets in snapshots[39m[32m 91[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould efficiently process complex comparisons[39m[32m 4[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould handle concurrent snapshot operations[39m[32m 3[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing snapshot data gracefully[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle comparison of identical snapshots[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle restoration failures gracefully[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould validate timeline event data before creation[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mIntegration Scenarios[2m > [22mshould support complete quarterly analysis workflow[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Time-Travel Analytics Service[2m > [22mIntegration Scenarios[2m > [22mshould support investment scenario modeling workflow[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
   [32m✓[39m Time-Travel Test Helpers[2m > [22mshould generate random snapshot data for stress testing[32m 32[2mms[22m[39m
   [32m✓[39m Time-Travel Test Helpers[2m > [22mshould generate comparison data between snapshots[32m 2[2mms[22m[39m
   [32m✓[39m Time-Travel Test Helpers[2m > [22mshould generate timeline event data[32m 12[2mms[22m[39m
   [32m✓[39m Time-Travel Test Helpers[2m > [22mshould generate restoration log data[32m 2[2mms[22m[39m
 [31m❯[39m tests/unit/services/performance-prediction.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m22 failed[39m[2m)[22m[33m 577[2mms[22m[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould generate predictions for all fund metrics[39m[32m 75[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould handle different model types[39m[32m 11[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould respect prediction horizon[39m[32m 19[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould handle different confidence levels[39m[32m 9[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould fail with insufficient historical data[32m 17[2mms[22m[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould store predictions in database[39m[32m 7[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mLinear Regression Model[2m > [22mshould produce reasonable predictions for trending data[39m[32m 13[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mLinear Regression Model[2m > [22mshould calculate proper confidence intervals[39m[32m 7[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mExponential Smoothing Model[2m > [22mshould handle volatile time series data[39m[32m 9[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mPolynomial Regression Model[2m > [22mshould handle non-linear patterns[39m[32m 15[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mPolynomial Regression Model[2m > [22mshould fall back to linear for ill-conditioned data[39m[32m 16[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mEnsemble Model[2m > [22mshould combine multiple models effectively[39m[32m 24[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mEnsemble Model[2m > [22mshould weight models based on accuracy[39m[32m 10[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould identify upward trends correctly[32m 12[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould identify downward trends[32m 4[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould identify stable trends[32m 5[2mms[22m[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould detect seasonality when present[39m[32m 16[2mms[22m[39m
[31m     → expected false to be true // Object.is equality[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould fail with insufficient data[32m 2[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mAnomaly Detection[2m > [22mdetectAnomalies[2m > [22mshould identify statistical outliers[32m 6[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mAnomaly Detection[2m > [22mdetectAnomalies[2m > [22mshould handle different sensitivity levels[32m 3[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mAnomaly Detection[2m > [22mdetectAnomalies[2m > [22mshould return no anomalies for normal data[32m 1[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould analyze fund cohort performance[32m 8[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould determine fund stage correctly based on age[32m 3[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould handle missing fund[32m 1[2mms[22m[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mCohort Analysis[2m > [22manalyzeCohort[2m > [22mshould calculate J-curve correctly[32m 2[2mms[22m[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mScenario Generation[2m > [22mgenerateScenarios[2m > [22mshould generate multiple what-if scenarios[39m[32m 6[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle large datasets efficiently[39m[32m 5[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle missing data points gracefully[39m[32m 150[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould validate prediction accuracy calculations[39m[32m 54[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle edge cases in time series[39m[32m 20[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould query historical data with correct parameters[39m[32m 5[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould store predictions with correct metadata[39m[32m 5[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
   [32m✓[39m PerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould handle database query errors gracefully[32m 7[2mms[22m[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mModel Validation and Benchmarking[2m > [22mshould maintain prediction quality across different data patterns[39m[32m 7[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[31m   [31m×[31m PerformancePredictionEngine[2m > [22mModel Validation and Benchmarking[2m > [22mshould provide consistent predictions for stable time series[39m[32m 3[2mms[22m[39m
[31m     → Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[2m3:41:22 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:22 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:23 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [31m❯[39m tests/unit/services/variance-tracking.test.ts [2m([22m[2m32 tests[22m[2m | [22m[31m32 failed[39m[2m)[22m[33m 331[2mms[22m[39m
[31m   [31m×[31m BaselineService[2m > [22mcreateBaseline[2m > [22mshould create a baseline with all required fields[39m[32m 103[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22mcreateBaseline[2m > [22mshould throw error when no fund metrics available[39m[32m 10[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22mcreateBaseline[2m > [22mshould set first baseline as default[39m[32m 5[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22mcreateBaseline[2m > [22mshould not set as default when other defaults exist[39m[32m 6[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22mgetBaselines[2m > [22mshould retrieve baselines with filters[39m[32m 5[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22mgetBaselines[2m > [22mshould return all active baselines when no filters provided[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22msetDefaultBaseline[2m > [22mshould update default baseline correctly[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m BaselineService[2m > [22mdeactivateBaseline[2m > [22mshould deactivate baseline[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould generate comprehensive variance report[39m[32m 77[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould throw error when baseline not found[39m[32m 3[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould calculate variance correctly[39m[32m 6[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould identify significant variances[39m[32m 4[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould trigger alerts when thresholds are breached[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould create alert rule with all parameters[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould use default values for optional parameters[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22mcreateAlert[2m > [22mshould create performance alert[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22macknowledgeAlert[2m > [22mshould acknowledge alert with notes[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22mresolveAlert[2m > [22mshould resolve alert with resolution notes[39m[32m 5[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould retrieve active alerts with filters[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m AlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould return all active alerts when no filters provided[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould perform complete analysis workflow[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould use provided baseline ID[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould throw error when no default baseline exists[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould generate alerts when variance thresholds are exceeded[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould provide access to all sub-services[39m[32m 33[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m VarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould coordinate between services in complete analysis[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Edge Cases and Error Handling[2m > [22mshould handle missing portfolio data gracefully[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Edge Cases and Error Handling[2m > [22mshould handle database transaction failures[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Edge Cases and Error Handling[2m > [22mshould handle invalid variance calculations[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Edge Cases and Error Handling[2m > [22mshould handle alert rule evaluation edge cases[39m[32m 2[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Performance and Scalability[2m > [22mshould handle large portfolio datasets efficiently[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[31m   [31m×[31m Performance and Scalability[2m > [22mshould handle multiple concurrent variance calculations[39m[32m 1[2mms[22m[39m
[31m     → default.randomUUID is not a function[39m
[31m     → Cannot read properties of undefined (reading 'abort')[39m
[90mstdout[2m | tests/unit/engines/deterministic-reserve-engine.test.ts[2m > [22m[2mDeterministicReserveEngine - Caching[2m > [22m[2mshould cache identical inputs
[22m[39m[DEBUG] Returning cached reserve calculation {
  cacheKey: [32m'eyJwb3J0Zm9saW9Db3VudCI6MSwiYXZhaWxhYmxlUmVzZXJ2ZXMiOjEwMDAwMDAwLCJ0b3RhbEZ1bmRTaXplIjo1MDAwMDAwMCwic2NlbmFyaW9UeXBlIjoiYmFzZSIsInRpbWVIb3Jpem9uIjo2MH0='[39m
}

 [32m✓[39m tests/unit/engines/deterministic-reserve-engine.test.ts [2m([22m[2m41 tests[22m[2m)[22m[32m 258[2mms[22m[39m
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [31m❯[39m tests/unit/database/variance-tracking-schema.test.ts [2m([22m[2m31 tests[22m[2m | [22m[33m31 skipped[39m[2m)[22m[32m 30[2mms[22m[39m
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould create baseline with all required fields
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould enforce baseline_type enum constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould enforce period_end > period_start constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould enforce unique default baseline per fund
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould validate confidence bounds (0.00 to 1.00)
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould support JSONB fields for complex data
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mfund_baselines table[2m > [22mshould support tags array field
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould create variance report with all required fields
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce valid report_type enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce valid status enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce valid risk_level enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould enforce analysis_end >= analysis_start constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mvariance_reports table[2m > [22mshould validate data_quality_score bounds (0.00 to 1.00)
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould create performance alert with all required fields
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce valid severity enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce valid category enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce valid status enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce occurrence_count >= 1 constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mperformance_alerts table[2m > [22mshould enforce escalation_level >= 0 constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould create alert rule with all required fields
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce valid rule_type enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce valid operator enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce secondary_threshold requirement for between operator
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce valid check_frequency enum
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce suppression_period_minutes >= 1 constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22malert_rules table[2m > [22mshould enforce trigger_count >= 0 constraint
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mDatabase indexes[2m > [22mshould have proper indexes for performance
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mDatabase views[2m > [22mshould query active_baselines view
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mDatabase views[2m > [22mshould query critical_alerts view
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mDatabase views[2m > [22mshould query variance_summary view
   [2m[90m↓[39m[22m Variance Tracking Database Schema[2m > [22mDatabase triggers[2m > [22mshould auto-update updated_at on record modification
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "path" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/server/utils/logger.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/server/utils/logger.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:25 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:26 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:26 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:27 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:27 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[90mstdout[2m | tests/unit/reserves-engine.test.ts[2m > [22m[2mDeterministicReserveEngine[2m > [22m[2mDeterminism Tests[2m > [22m[2mshould produce identical results for identical inputs
[22m[39m[DEBUG] Returning cached reserve calculation {
  cacheKey: [32m'eyJwb3J0Zm9saW9Db3VudCI6MSwiYXZhaWxhYmxlUmVzZXJ2ZXMiOjEwMDAwMDAwLCJ0b3RhbEZ1bmRTaXplIjoxMDAwMDAwMDAsInNjZW5hcmlvVHlwZSI6ImJhc2UiLCJ0aW1lSG9yaXpvbiI6ODR9'[39m
}

[90mstdout[2m | tests/unit/reserves-engine.test.ts[2m > [22m[2mDeterministicReserveEngine[2m > [22m[2mDeterminism Tests[2m > [22m[2mshould use cached results for identical calculations
[22m[39m[DEBUG] Returning cached reserve calculation {
  cacheKey: [32m'eyJwb3J0Zm9saW9Db3VudCI6MSwiYXZhaWxhYmxlUmVzZXJ2ZXMiOjEwMDAwMDAwLCJ0b3RhbEZ1bmRTaXplIjoxMDAwMDAwMDAsInNjZW5hcmlvVHlwZSI6ImJhc2UiLCJ0aW1lSG9yaXpvbiI6ODR9'[39m
}

 [31m❯[39m tests/unit/database/time-travel-schema.test.ts [2m([22m[2m23 tests[22m[2m | [22m[33m23 skipped[39m[2m)[22m[32m 49[2mms[22m[39m
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould create snapshot with all required fields
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould enforce valid snapshot_type enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould enforce valid trigger_event enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould enforce valid status enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould validate data_integrity_score bounds (0.00 to 1.00)
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould support complex JSONB fields
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mfund_state_snapshots table[2m > [22mshould support metadata and tags
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould create snapshot comparison with all required fields
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould enforce valid comparison_type enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould prevent comparison of snapshot with itself
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22msnapshot_comparisons table[2m > [22mshould validate confidence_score bounds (0.00 to 1.00)
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould create timeline event with all required fields
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould enforce valid event_type enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould enforce valid severity enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mtimeline_events table[2m > [22mshould support complex event data structures
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould create restoration log with all required fields
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould enforce valid restoration_type enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould enforce valid status enum
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mstate_restoration_logs table[2m > [22mshould enforce restoration_duration_ms >= 0 constraint
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mDatabase indexes[2m > [22mshould have proper indexes for time-travel performance
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mDatabase constraints and foreign keys[2m > [22mshould enforce foreign key relationships
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mJSON data validation[2m > [22mshould handle malformed JSON gracefully
   [2m[90m↓[39m[22m Time-Travel Analytics Database Schema[2m > [22mJSON data validation[2m > [22mshould handle deeply nested JSON structures
[2m3:41:27 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[90mstdout[2m | tests/unit/reserves-engine.test.ts[2m > [22m[2mDeterministicReserveEngine[2m > [22m[2mRisk Adjustments[2m > [22m[2mshould skip risk adjustments when disabled
[22m[39m[DEBUG] Returning cached reserve calculation {
  cacheKey: [32m'eyJwb3J0Zm9saW9Db3VudCI6MSwiYXZhaWxhYmxlUmVzZXJ2ZXMiOjEwMDAwMDAwLCJ0b3RhbEZ1bmRTaXplIjoxMDAwMDAwMDAsInNjZW5hcmlvVHlwZSI6ImJhc2UiLCJ0aW1lSG9yaXpvbiI6ODR9'[39m
}

 [31m❯[39m tests/unit/engines/liquidity-engine.test.ts [2m([22m[2m35 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[32m 237[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Initialization[2m > [22mshould initialize with fund ID and size[32m 5[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Initialization[2m > [22mshould initialize with different fund sizes[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould analyze cash transactions[32m 28[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate total inflows correctly[32m 4[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate total outflows correctly[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate net cash flow[32m 7[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould group transactions by type[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould group transactions by quarter[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Cash Flow Analysis[2m > [22mshould calculate running balances[32m 13[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould generate liquidity forecast[32m 8[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould project cash for specified months[32m 27[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould include multiple scenarios[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate minimum cash buffer[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate liquidity ratio[32m 3[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate burn rate[32m 8[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Liquidity Forecast[2m > [22mshould calculate runway months[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould run stress test scenarios[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould include delayed distributions scenario[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould include accelerated investment scenario[32m 3[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould include LP funding delay scenario[32m 3[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould include market downturn scenario[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould identify worst case scenario[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould assess overall risk level[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Stress Testing[2m > [22mshould provide risk recommendations[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould optimize capital call schedule[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould calculate optimal call amounts[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould respect notice and payment periods[32m 1[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould calculate utilization rate[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Capital Call Optimization[2m > [22mshould calculate schedule efficiency[32m 10[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Edge Cases[2m > [22mshould handle empty transaction list[32m 4[2mms[22m[39m
[31m   [31m×[31m LiquidityEngine - Edge Cases[2m > [22mshould handle zero cash position[39m[32m 30[2mms[22m[39m
[31m     → expected -9.6 to be greater than or equal to 0[39m
   [32m✓[39m LiquidityEngine - Edge Cases[2m > [22mshould handle very large fund size[32m 3[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Edge Cases[2m > [22mshould handle very small fund size[32m 36[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Edge Cases[2m > [22mshould handle recurring expenses correctly[32m 2[2mms[22m[39m
   [32m✓[39m LiquidityEngine - Edge Cases[2m > [22mshould handle inactive recurring expenses[32m 1[2mms[22m[39m
 [32m✓[39m tests/unit/reserves-engine.test.ts [2m([22m[2m32 tests[22m[2m)[22m[33m 517[2mms[22m[39m
 [31m❯[39m tests/unit/services/monte-carlo-power-law-integration.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m14 failed[39m[2m)[22m[32m 237[2mms[22m[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mPower Law Distribution Integration[2m > [22mshould integrate power law distribution for return multiples[39m[32m 49[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mPower Law Distribution Integration[2m > [22mshould maintain backward compatibility with existing interface[39m[32m 11[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mPower Law Distribution Integration[2m > [22mshould not apply time decay to variance[39m[32m 14[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22m70% Failure Rate Validation[2m > [22mshould show approximately 70% failure rate for seed investments[39m[32m 22[2mms[22m[39m
[31m     → Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22m70% Failure Rate Validation[2m > [22mshould show different failure rates by stage[39m[32m 9[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mExtreme Outliers Validation[2m > [22mshould show extreme outliers (>50x) in approximately 1% of simulations[39m[32m 34[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mExtreme Outliers Validation[2m > [22mshould cap unicorns at reasonable levels[39m[32m 7[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mExtreme Outliers Validation[2m > [22mshould show power law tail behavior[39m[32m 6[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mSeries A Chasm Validation[2m > [22mshould properly reflect Series A Chasm graduation rates[39m[32m 10[2mms[22m[39m
[31m     → Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mSeries A Chasm Validation[2m > [22mshould show increasing unicorn rates in later stages[39m[32m 13[2mms[22m[39m
[31m     → Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mPerformance and Consistency[2m > [22mshould generate large simulations efficiently[39m[32m 7[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mPerformance and Consistency[2m > [22mshould produce reproducible results with same seed[39m[32m 28[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mPerformance and Consistency[2m > [22mshould handle empty portfolio gracefully[39m[32m 6[2mms[22m[39m
[31m     → Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[31m   [31m×[31m Monte Carlo Power Law Integration[2m > [22mRisk Metrics Integration[2m > [22mshould calculate realistic risk metrics with power law returns[39m[32m 7[2mms[22m[39m
[31m     → No suitable baseline found for Monte Carlo simulation[39m
[2m3:41:28 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/engines/reserve-engine.test.ts [2m([22m[2m44 tests[22m[2m)[22m[32m 199[2mms[22m[39m
[2m3:41:30 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:30 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [31m❯[39m tests/unit/components/ui/NumericInput.test.tsx [2m([22m[2m45 tests[22m[2m | [22m[31m45 failed[39m[2m)[22m[33m 1041[2mms[22m[39m
[31m   [31m×[31m NumericInput[2m > [22mBasic Rendering[2m > [22mrenders with label and input[39m[33m 702[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mBasic Rendering[2m > [22mdisplays required asterisk when required=true[39m[32m 2[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mBasic Rendering[2m > [22mshows help text when provided[39m[32m 2[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mBasic Rendering[2m > [22mshows error text and hides help text when error is present[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mBasic Rendering[2m > [22mrenders placeholder when provided[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mBasic Rendering[2m > [22mis disabled when disabled=true[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mdisplays $ prefix in currency mode[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mdisplays % suffix in percentage mode[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22muses custom prefix when provided[39m[32m 3[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22muses custom suffix when provided[39m[32m 2[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mpercentage mode overrides custom suffix[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mcurrency mode uses default $ prefix[39m[32m 2[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mMode-specific Behavior[2m > [22mcurrency mode can use custom prefix[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mNumber Formatting[2m > [22mformats numbers with commas when not focused[39m[32m 2[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mNumber Formatting[2m > [22mremoves commas when focused[39m[32m 281[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mNumber Formatting[2m > [22mre-formats with commas on blur[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mNumber Formatting[2m > [22mhandles decimal values correctly[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mNumber Formatting[2m > [22mpreserves decimal places when formatting[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mNumber Formatting[2m > [22mhandles negative numbers[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mUser Input Validation[2m > [22mallows only numeric characters and decimal point[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mUser Input Validation[2m > [22mhandles empty string as undefined[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mUser Input Validation[2m > [22mallows typing minus sign for negative numbers[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mMin/Max Clamping[2m > [22mclamps value to min on blur[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mMin/Max Clamping[2m > [22mclamps value to max on blur[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mMin/Max Clamping[2m > [22mallows values within min/max range[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mincrements value with ArrowUp[39m[32m 2[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mdecrements value with ArrowDown[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mrespects custom step value[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mhandles ArrowUp/Down with decimal steps[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mclamps when incrementing beyond max[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22mclamps when decrementing below min[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mKeyboard Navigation[2m > [22muses 0 as base when value is undefined and arrow key pressed[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22mgenerates unique IDs for input and label[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22msets aria-required when required=true[39m[32m 0[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22msets aria-invalid when error is present[39m[32m 0[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22mlinks input to help text with aria-describedby[39m[32m 0[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22mlinks input to error text with aria-describedby[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22merror message has role="alert"[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mAccessibility[2m > [22muses inputMode="decimal" for mobile keyboards[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles very large numbers[39m[32m 0[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles very small decimal numbers[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles zero correctly[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles undefined to number transition[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mEdge Cases[2m > [22mhandles number to undefined transition[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
[31m   [31m×[31m NumericInput[2m > [22mCustom Class Names[2m > [22mapplies custom className to container[39m[32m 1[2mms[22m[39m
[31m     → React is not defined[39m
 [32m✓[39m tests/unit/services/power-law-distribution.test.ts [2m([22m[2m39 tests[22m[2m)[22m[33m 12052[2mms[22m[39m
   [33m[2m✓[22m[39m PowerLawDistribution[2m > [22mPortfolio Return Distribution[2m > [22mgeneratePortfolioReturns[2m > [22mshould show power law characteristics [33m 619[2mms[22m[39m
   [33m[2m✓[22m[39m PowerLawDistribution[2m > [22mPortfolio Return Distribution[2m > [22mgeneratePortfolioReturns[2m > [22mshould estimate power law alpha correctly [33m 738[2mms[22m[39m
   [33m[2m✓[22m[39m PowerLawDistribution[2m > [22mPower Law Mathematical Properties[2m > [22mshould show correct variance scaling [33m 634[2mms[22m[39m
   [33m[2m✓[22m[39m Utility Functions[2m > [22mgeneratePowerLawReturns[2m > [22mshould generate returns for Monte Carlo integration [33m 7820[2mms[22m[39m
   [33m[2m✓[22m[39m Utility Functions[2m > [22mgeneratePowerLawReturns[2m > [22mshould be reproducible with same seed [33m 377[2mms[22m[39m
   [33m[2m✓[22m[39m Integration with Monte Carlo Engine[2m > [22mshould produce realistic VC portfolio distributions [33m 848[2mms[22m[39m
 [31m❯[39m tests/unit/services/monte-carlo-power-law-validation.test.ts [2m([22m[2m13 tests[22m[2m | [22m[31m5 failed[39m[2m)[22m[33m 1762[2mms[22m[39m
   [33m[2m✓[22m[39m Monte Carlo Power Law Validation[2m > [22m70% Failure Rate Validation[2m > [22mshould show approximately 70% failure rate for seed investments [33m 372[2mms[22m[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22m70% Failure Rate Validation[2m > [22mshould show different failure rates by stage reflecting Series A Chasm[32m 16[2mms[22m[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22m70% Failure Rate Validation[2m > [22mshould show progressive improvement in later stages[32m 12[2mms[22m[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22mExtreme Outliers Validation (>50x)[2m > [22mshould show extreme outliers in approximately 1% of simulations[32m 12[2mms[22m[39m
[31m   [31m×[31m Monte Carlo Power Law Validation[2m > [22mExtreme Outliers Validation (>50x)[2m > [22mshould cap unicorns at reasonable levels (≤200x)[39m[32m 142[2mms[22m[39m
[31m     → expected 0.0055 to be less than 0.005[39m
[31m   [31m×[31m Monte Carlo Power Law Validation[2m > [22mExtreme Outliers Validation (>50x)[2m > [22mshould show power law tail characteristics[39m[33m 636[2mms[22m[39m
[31m     → expected NaN to be greater than 2[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22mSeries A Chasm Validation[2m > [22mshould show decreasing failure rates from seed to later stages[32m 22[2mms[22m[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22mSeries A Chasm Validation[2m > [22mshould show realistic graduation rates between stages[32m 12[2mms[22m[39m
[31m   [31m×[31m Monte Carlo Power Law Validation[2m > [22mSeries A Chasm Validation[2m > [22mshould reflect venture capital J-curve in early vs late stages[39m[32m 10[2mms[22m[39m
[31m     → expected 139.2535364016066 to be greater than 587.9226393879052[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22mNo Time Decay Validation[2m > [22mshould not apply time decay to return multiples[32m 34[2mms[22m[39m
   [32m✓[39m Monte Carlo Power Law Validation[2m > [22mNo Time Decay Validation[2m > [22mshould show time horizon only affects IRR calculation, not multiples[32m 39[2mms[22m[39m
[31m   [31m×[31m Monte Carlo Power Law Validation[2m > [22mIntegration with Monte Carlo Parameters[2m > [22mshould handle typical VC portfolio composition[39m[32m 168[2mms[22m[39m
[31m     → expected +0 to be close to 0.05, received difference is 0.05, but expected 0.05[39m
[31m   [31m×[31m Monte Carlo Power Law Validation[2m > [22mIntegration with Monte Carlo Parameters[2m > [22mshould produce realistic VC fund-level statistics[39m[32m 281[2mms[22m[39m
[31m     → expected 0.009 to be greater than 0.2[39m
 [31m❯[39m tests/unit/monte-carlo-2025-validation-core.test.ts [2m([22m[2m14 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 234[2mms[22m[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mInvestment Strategy Defaults for 2024-2025 Market[2m > [22mshould create realistic investment strategy with Series A Chasm parameters[32m 12[2mms[22m[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mInvestment Strategy Defaults for 2024-2025 Market[2m > [22mshould reject invalid graduation + exit rate combinations[32m 1[2mms[22m[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mInvestment Strategy Defaults for 2024-2025 Market[2m > [22mshould validate Series C+ as terminal stage constraint[32m 3[2mms[22m[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould create power law distribution with realistic 2024-2025 parameters[32m 2[2mms[22m[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould generate returns that reflect 70% failure rate[39m[32m 27[2mms[22m[39m
[31m     → expected NaN to be greater than 0.65[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould generate approximately 1% unicorns (>50x returns)[39m[32m 9[2mms[22m[39m
[31m     → expected NaN to be greater than 0.005[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould show power law characteristics in return distribution[39m[32m 12[2mms[22m[39m
[31m     → actual value must be number or bigint, received "undefined"[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould show Series A Chasm effect in stage-specific failure rates[39m[32m 44[2mms[22m[39m
[31m     → expected 0 to be less than 0[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould handle Series C+ stage properly[39m[32m 7[2mms[22m[39m
[31m     → expected NaN to be greater than 2[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mExtended Timelines and Market Conditions[2m > [22mshould validate extended funding cycle timelines are captured[32m 8[2mms[22m[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mExtended Timelines and Market Conditions[2m > [22mshould handle higher reserve allocation for current market conditions[39m[32m 13[2mms[22m[39m
[31m     → expected false to be true // Object.is equality[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mError Handling and Edge Cases[2m > [22mshould handle malformed inputs gracefully[32m 1[2mms[22m[39m
[31m   [31m×[31m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mError Handling and Edge Cases[2m > [22mshould handle invalid stage names in power law distribution[39m[32m 53[2mms[22m[39m
[31m     → expected [Function] to not throw an error but 'Error: Invalid investment stage: inva…' was thrown[39m
   [32m✓[39m Monte Carlo 2024-2025 Market Validation Core Logic[2m > [22mError Handling and Edge Cases[2m > [22mshould maintain reproducibility with fixed seeds[32m 3[2mms[22m[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:42 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:44 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/redis-factory.test.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [31m❯[39m tests/unit/pages/portfolio-constructor.test.tsx [2m([22m[2m44 tests[22m[2m | [22m[31m44 failed[39m[2m)[22m[33m 507[2mms[22m[39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould render the main layout with header and navigation tabs[39m[33m 310[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould display key metrics overview cards[39m[32m 4[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould show loading state when funds are loading[39m[32m 6[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display fund configuration form[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display check size configuration[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould update fund size when input changes[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould update reserve percentage using slider[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display allocation charts[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould show calculated metrics[39m[32m 13[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould validate form inputs[39m[32m 8[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario selection buttons[39m[32m 4[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould allow switching between scenarios[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario configuration controls[39m[32m 4[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould update scenario parameters with sliders[39m[32m 7[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario results[39m[32m 6[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould update market environment selection[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display projected fund metrics[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display risk analysis section[39m[32m 5[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould show key risk factors[39m[32m 5[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display metrics in proper format[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould display capital deployment schedule chart[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould show deployment metrics[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould display timeline information correctly[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould save strategy when save button is clicked[39m[32m 6[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould run simulation when run button is clicked[39m[32m 7[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould update calculated metrics when inputs change[39m[32m 5[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould handle form validation errors[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould maintain state when switching tabs[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould format currency values correctly[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould format percentage values correctly[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould display proper metric values[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have proper ARIA labels[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have proper heading hierarchy[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have keyboard navigation support[39m[32m 6[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould handle different viewport sizes gracefully[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing fund data gracefully[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle extreme input values[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle simulation errors gracefully[39m[32m 3[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle concurrent operations[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould render within reasonable time[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould not cause memory leaks on unmount[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould handle rapid input changes efficiently[39m[32m 1[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mIntegration Scenarios[2m > [22mshould support complete workflow from strategy building to simulation[39m[32m 2[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
[31m   [31m×[31m PortfolioConstructor[2m > [22mIntegration Scenarios[2m > [22mshould maintain data consistency across different views[39m[32m 22[2mms[22m[39m
[31m     → Could not determine window of node. Node was [object Object][39m
 [31m❯[39m tests/unit/xirr-golden-set.test.ts [2m([22m[2m18 tests[22m[2m | [22m[31m11 failed[39m[2m)[22m[32m 141[2mms[22m[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 1: Simple 2-flow, 20.11% return (Excel validated)[39m[32m 35[2mms[22m[39m
[31m     → expected 0.00006536899891820824 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 2: Multi-round with partial distributions (Excel validated)[39m[32m 7[2mms[22m[39m
[31m     → expected 0.17847275499836018 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 3: Monthly flows, irregular spacing[39m[32m 8[2mms[22m[39m
[31m     → expected 0.0018677569282734008 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 4: Quarterly flows, large exit spike[39m[32m 5[2mms[22m[39m
[31m     → expected 0.07915059636807031 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 5: Negative IRR (loss scenario)[39m[32m 8[2mms[22m[39m
[31m     → expected 0.003828318782535464 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 6: Near-zero IRR (tiny gain)[39m[32m 7[2mms[22m[39m
[31m     → expected 4.0391567300676785e-7 to be less than 1e-7[39m
   [32m✓[39m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 7: Exact zero return[32m 1[2mms[22m[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Very High Returns[2m > [22mCase 8: 10x return in 6 months (extreme)[39m[32m 3[2mms[22m[39m
[31m     → expected 1.5940168404178934 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Very High Returns[2m > [22mCase 9: Very high multi-year return[39m[32m 6[2mms[22m[39m
[31m     → expected 14.861411142538325 to be less than 1e-7[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mPathological Cases - Early Distribution + Follow-on[2m > [22mCase 10: Early dist then follow-on calls (complex)[39m[32m 7[2mms[22m[39m
[31m     → expected 0.2421878137487528 to be less than 1e-7[39m
   [32m✓[39m XIRR Golden Set - Excel Validated[2m > [22mInvalid Inputs - Should Return null[2m > [22mCase 11: All-positive flows (invalid)[32m 2[2mms[22m[39m
   [32m✓[39m XIRR Golden Set - Excel Validated[2m > [22mInvalid Inputs - Should Return null[2m > [22mCase 12: All-negative flows (invalid)[32m 1[2mms[22m[39m
   [32m✓[39m XIRR Golden Set - Excel Validated[2m > [22mTimezone & Date Normalization[2m > [22mCase 13: Mixed same-day flows (order invariant)[32m 3[2mms[22m[39m
[31m   [31m×[31m XIRR Golden Set - Excel Validated[2m > [22mTimezone & Date Normalization[2m > [22mCase 14: UTC normalization sanity check[39m[32m 4[2mms[22m[39m
[31m     → expected 0.00006536899891820824 to be less than 1e-7[39m
   [32m✓[39m XIRR Golden Set - Excel Validated[2m > [22mPerformance Benchmarks[2m > [22mShould compute standard case in < 10ms[32m 2[2mms[22m[39m
   [32m✓[39m XIRR Golden Set - Excel Validated[2m > [22mPerformance Benchmarks[2m > [22mShould handle 100 flows in < 50ms[32m 3[2mms[22m[39m
   [32m✓[39m XIRR Method Fallbacks[2m > [22mNewton should succeed for well-behaved case[32m 2[2mms[22m[39m
[31m   [31m×[31m XIRR Method Fallbacks[2m > [22mShould fall back to Brent for Newton failure[39m[32m 15[2mms[22m[39m
[31m     → expected false to be true // Object.is equality[39m
 [32m✓[39m tests/unit/reserves-v11.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 74[2mms[22m[39m
 [32m✓[39m tests/unit/units.test.ts [2m([22m[2m50 tests[22m[2m)[22m[33m 488[2mms[22m[39m
 [32m✓[39m tests/unit/engines/pacing-engine.test.ts [2m([22m[2m27 tests[22m[2m)[22m[33m 302[2mms[22m[39m
 [31m❯[39m tests/unit/engines/cohort-engine.test.ts [2m([22m[2m37 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 361[2mms[22m[39m
   [32m✓[39m CohortEngine - Input Validation[2m > [22mshould validate and process correct input[32m 52[2mms[22m[39m
   [32m✓[39m CohortEngine - Input Validation[2m > [22mshould reject invalid cohort input[32m 10[2mms[22m[39m
   [32m✓[39m CohortEngine - Input Validation[2m > [22mshould handle various vintage years[32m 20[2mms[22m[39m
   [32m✓[39m CohortEngine - Vintage Year Analysis[2m > [22mshould apply vintage year adjustments[32m 46[2mms[22m[39m
   [32m✓[39m CohortEngine - Vintage Year Analysis[2m > [22mshould reflect COVID impact on 2020 vintage[32m 8[2mms[22m[39m
   [32m✓[39m CohortEngine - Vintage Year Analysis[2m > [22mshould reflect recovery boom in 2021[32m 8[2mms[22m[39m
   [32m✓[39m CohortEngine - Vintage Year Analysis[2m > [22mshould apply maturity factor to performance[32m 1[2mms[22m[39m
   [32m✓[39m CohortEngine - Performance Metrics[2m > [22mshould calculate IRR[32m 5[2mms[22m[39m
   [32m✓[39m CohortEngine - Performance Metrics[2m > [22mshould calculate Multiple (TVPI)[32m 2[2mms[22m[39m
   [32m✓[39m CohortEngine - Performance Metrics[2m > [22mshould calculate DPI[32m 11[2mms[22m[39m
   [32m✓[39m CohortEngine - Performance Metrics[2m > [22mshould ensure DPI <= Multiple[32m 32[2mms[22m[39m
   [32m✓[39m CohortEngine - Performance Metrics[2m > [22mshould round metrics to appropriate precision[32m 2[2mms[22m[39m
   [32m✓[39m CohortEngine - Company Generation[2m > [22mshould generate correct number of companies[32m 3[2mms[22m[39m
   [32m✓[39m CohortEngine - Company Generation[2m > [22mshould assign unique IDs to companies[32m 13[2mms[22m[39m
   [32m✓[39m CohortEngine - Company Generation[2m > [22mshould generate companies with valid data[32m 15[2mms[22m[39m
   [32m✓[39m CohortEngine - Company Generation[2m > [22mshould distribute companies across stages[32m 2[2mms[22m[39m
   [32m✓[39m CohortEngine - Company Generation[2m > [22mshould generate realistic company valuations[32m 4[2mms[22m[39m
   [32m✓[39m compareCohorts[2m > [22mshould compare multiple cohorts[32m 5[2mms[22m[39m
   [32m✓[39m compareCohorts[2m > [22mshould identify best performing cohort[32m 2[2mms[22m[39m
   [32m✓[39m compareCohorts[2m > [22mshould calculate average IRR across cohorts[32m 15[2mms[22m[39m
[31m   [31m×[31m compareCohorts[2m > [22mshould calculate average Multiple across cohorts[39m[32m 31[2mms[22m[39m
[31m     → expected 1.83 to be close to 1.825, received difference is 0.0050000000000001155, but expected 0.005[39m
   [32m✓[39m compareCohorts[2m > [22mshould calculate total companies across cohorts[32m 4[2mms[22m[39m
   [32m✓[39m compareCohorts[2m > [22mshould reject empty cohort array[32m 1[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould generate complete summary[32m 2[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould calculate correct total companies[32m 1[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould calculate average valuation[32m 10[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould include stage distribution[32m 2[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould include metadata with algorithm mode[32m 9[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould include metadata with years active[32m 1[2mms[22m[39m
   [32m✓[39m generateCohortSummary[2m > [22mshould calculate maturity level[32m 2[2mms[22m[39m
   [32m✓[39m CohortEngine - Output Structure[2m > [22mshould return valid cohort output structure[32m 3[2mms[22m[39m
   [32m✓[39m CohortEngine - Output Structure[2m > [22mshould validate company structure[32m 10[2mms[22m[39m
   [32m✓[39m CohortEngine - Edge Cases[2m > [22mshould handle very small cohorts[32m 2[2mms[22m[39m
   [32m✓[39m CohortEngine - Edge Cases[2m > [22mshould handle large cohorts[32m 1[2mms[22m[39m
   [32m✓[39m CohortEngine - Edge Cases[2m > [22mshould handle recent vintage years[32m 1[2mms[22m[39m
   [32m✓[39m CohortEngine - Edge Cases[2m > [22mshould handle old vintage years[32m 1[2mms[22m[39m
   [32m✓[39m CohortEngine - Edge Cases[2m > [22mshould maintain consistency for same inputs[32m 1[2mms[22m[39m
[2m3:41:45 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/server/db/redis-factory.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/redis-factory.test.ts [2m([22m[2m26 tests[22m[2m)[22m[33m 356[2mms[22m[39m
 [31m❯[39m tests/unit/components/ai-enhanced-components.test.tsx [2m([22m[2m19 tests[22m[2m | [22m[31m19 failed[39m[2m)[22m[32m 38[2mms[22m[39m
[31m   [31m×[31m AIInsightCard[2m > [22mrenders without crashing[39m[32m 11[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m AIInsightCard[2m > [22mgenerates insights from Monte Carlo results[39m[32m 2[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m AIInsightCard[2m > [22mshows empty state when no results provided[39m[32m 2[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m AIInsightCard[2m > [22mrenders custom insights[39m[32m 3[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ProgressiveDisclosureContainer[2m > [22mrenders with default executive view[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ProgressiveDisclosureContainer[2m > [22mallows switching between view levels[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ProgressiveDisclosureContainer[2m > [22mfilters sections based on complexity[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ContextualTooltip[2m > [22mrenders basic tooltip content[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ContextualTooltip[2m > [22mrenders inline variant correctly[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ContextualTooltip[2m > [22mrenders convenience components[39m[32m 2[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m ContextualTooltip[2m > [22mhandles unknown concepts gracefully[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m IntelligentSkeleton[2m > [22mrenders dashboard skeleton[39m[32m 2[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m IntelligentSkeleton[2m > [22mrenders chart skeleton with correct type[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m IntelligentSkeleton[2m > [22mrenders table skeleton with custom dimensions[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m IntelligentSkeleton[2m > [22mcan disable animations[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m Integration Tests[2m > [22mcomponents work together in typical usage[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m Integration Tests[2m > [22mhandles loading states correctly[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m Data Processing[2m > [22mhandles edge cases in Monte Carlo data[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[31m   [31m×[31m Data Processing[2m > [22mgenerates appropriate insights for different failure rates[39m[32m 1[2mms[22m[39m
[31m     → Cannot read properties of undefined (reading 'appendChild')[39m
[2m3:41:53 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:53 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:53 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:53 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:53 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:54 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:54 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:54 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:54 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/unit-schemas.test.ts [2m([22m[2m35 tests[22m[2m)[22m[32m 76[2mms[22m[39m
 [32m✓[39m tests/unit/legacy/async-iteration.test.ts [2m([22m[2m27 tests[22m[2m)[22m[32m 161[2mms[22m[39m
 [31m❯[39m tests/unit/fund-setup-utils.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m12 failed[39m[2m)[22m[32m 111[2mms[22m[39m
   [32m✓[39m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 1 to fund-basics[32m 5[2mms[22m[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 2 to capital-structure[39m[32m 28[2mms[22m[39m
[31m     → expected 'investment-rounds' to be 'capital-structure' // Object.is equality[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 3 to investment-strategy[39m[32m 9[2mms[22m[39m
[31m     → expected 'capital-structure' to be 'investment-strategy' // Object.is equality[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 4 to distributions[39m[32m 6[2mms[22m[39m
[31m     → expected 'investment-strategy' to be 'distributions' // Object.is equality[39m
   [32m✓[39m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mdefaults to step 1 when no step param[32m 1[2mms[22m[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 5 to cashflow-management[39m[32m 3[2mms[22m[39m
[31m     → expected 'distributions' to be 'cashflow-management' // Object.is equality[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mreturns not-found for invalid steps[39m[32m 7[2mms[22m[39m
[31m     → expected 'cashflow-management' to be 'not-found' // Object.is equality[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles complex URLs correctly[39m[32m 7[2mms[22m[39m
[31m     → expected 'capital-structure' to be 'investment-strategy' // Object.is equality[39m
   [32m✓[39m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles malformed URLs gracefully[32m 2[2mms[22m[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles whitespace correctly[39m[32m 4[2mms[22m[39m
[31m     → expected 'investment-rounds' to be 'capital-structure' // Object.is equality[39m
   [32m✓[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns 1 for null (missing param)[32m 1[2mms[22m[39m
   [32m✓[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns null for empty strings[32m 1[2mms[22m[39m
   [32m✓[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns the step for valid values[32m 2[2mms[22m[39m
   [32m✓[39m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mtrims whitespace[32m 1[2mms[22m[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns null for invalid values[39m[32m 4[2mms[22m[39m
[31m     → expected '6' to be null // Object.is equality[39m
   [32m✓[39m fund-setup-utils[2m > [22misValidStep[2m > [22mreturns true for valid steps[32m 1[2mms[22m[39m
[31m   [31m×[31m fund-setup-utils[2m > [22misValidStep[2m > [22mreturns false for invalid steps[39m[32m 3[2mms[22m[39m
[31m     → expected true to be false // Object.is equality[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mgetStepNumber[2m > [22mreturns correct step number for valid keys[39m[32m 2[2mms[22m[39m
[31m     → expected '3' to be '2' // Object.is equality[39m
[31m   [31m×[31m fund-setup-utils[2m > [22mtype safety[2m > [22mVALID_STEPS contains exactly 1, 2, 3, 4, 5[39m[32m 10[2mms[22m[39m
[31m     → expected [ '1', '2', '3', '4', '5', '6' ] to deeply equal [ '1', '2', '3', '4', '5' ][39m
[31m   [31m×[31m fund-setup-utils[2m > [22mtype safety[2m > [22mNUM_TO_KEY maps all valid steps[39m[32m 5[2mms[22m[39m
[31m     → expected [ '1', '2', '3', '4', '5', '6' ] to deeply equal [ '1', '2', '3', '4', '5' ][39m
 [32m✓[39m tests/unit/fees.test.ts [2m([22m[2m14 tests[22m[2m)[22m[32m 51[2mms[22m[39m
 [32m✓[39m tests/unit/circuit-breaker.test.ts [2m([22m[2m9 tests[22m[2m)[22m[32m 125[2mms[22m[39m
[2m3:41:57 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:57 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/stores/fund-store-stability.test.ts [2m([22m[2m8 tests[22m[2m)[22m[32m 40[2mms[22m[39m
 [32m✓[39m tests/unit/analytics-xirr.test.ts [2m([22m[2m11 tests[22m[2m)[22m[32m 27[2mms[22m[39m
[90mstdout[2m | tests/unit/fund-calc-fee-horizon.test.ts[2m > [22m[2mManagement Fee Horizon Fix (PR #112)[2m > [22m[2mshould charge fees for full 10-year horizon even with early exits
[22m[39mTotal periods simulated: 11
Total management fees: $20.00M
Expected fees: $20.00M

 [32m✓[39m tests/unit/fund-calc-fee-horizon.test.ts [2m([22m[2m4 tests[22m[2m)[22m[33m 451[2mms[22m[39m
[2m3:41:58 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:41:59 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/analytics-waterfall.test.ts [2m([22m[2m7 tests[22m[2m)[22m[32m 55[2mms[22m[39m
[2m3:42:00 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:00 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:00 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:00 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:00 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:00 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:01 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:01 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:02 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/bug-fixes/conservation.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 103[2mms[22m[39m
 [32m✓[39m tests/unit/legacy/fund-setup.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[32m 19[2mms[22m[39m
 [32m✓[39m tests/unit/nan-equality.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 22[2mms[22m[39m
 [32m✓[39m tests/unit/bug-fixes/prng.test.ts [2m([22m[2m5 tests[22m[2m)[22m[32m 49[2mms[22m[39m
[2m3:42:03 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/schema-helpers.spec.ts [2m([22m[2m18 tests[22m[2m)[22m[32m 165[2mms[22m[39m
 [32m✓[39m tests/unit/strategy-signature.test.ts [2m([22m[2m3 tests[22m[2m)[22m[33m 401[2mms[22m[39m
   [33m[2m✓[22m[39m signatureForStrategy[2m > [22mgenerates stable signatures for identical data [33m 390[2mms[22m[39m
 [32m✓[39m tests/unit/investment-strategy-step.test.tsx [2m([22m[2m4 tests[22m[2m)[22m[32m 17[2mms[22m[39m
 [32m✓[39m tests/unit/stores/useFundStore.test.ts [2m([22m[2m4 tests[22m[2m)[22m[32m 38[2mms[22m[39m
 [32m✓[39m tests/unit/fund-setup-basic.test.tsx [2m([22m[2m5 tests[22m[2m)[22m[33m 871[2mms[22m[39m
   [33m[2m✓[22m[39m Strategy Signature - Production[2m > [22mgenerates deterministic signatures [33m 389[2mms[22m[39m
   [33m[2m✓[22m[39m Strategy Signature - Production[2m > [22mhandles edge cases gracefully [33m 467[2mms[22m[39m
[2m3:42:04 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "node:crypto" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/server/middleware/requestId.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
[2m3:42:05 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [31m❯[39m tests/unit/request-id.test.ts [2m([22m[2m7 tests[22m[2m | [22m[31m7 failed[39m[2m)[22m[32m 42[2mms[22m[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould use incoming X-Request-ID when provided[39m[32m 19[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould generate new request ID when not provided[39m[32m 3[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould generate new ID for empty string header[39m[32m 4[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould generate new ID for whitespace-only header[39m[32m 3[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould always set response header[39m[32m 3[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould add child logger when global logger exists[39m[32m 4[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[31m   [31m×[31m Request ID Middleware[2m > [22mshould track start time for duration calculation[39m[32m 2[2mms[22m[39m
[31m     → randomUUID is not a function[39m
[2m3:42:05 PM[22m [33m[1m[vite][22m[39m [33mwarning: Module "fs" has been externalized for browser compatibility, imported by "C:/dev/Updog_restore/tests/unit/setup.ts". See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.[39m
  Plugin: [35mvite:resolve[39m
 [32m✓[39m tests/unit/stores/useFundStore.idempotency.test.ts [2m([22m[2m1 test[22m[2m)[22m[32m 7[2mms[22m[39m

[31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Suites 13 [49m[22m[31m⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m tests/unit/error-handler.test.ts[2m [ tests/unit/error-handler.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/error-handler.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/error-handler.test.ts[39m:3:20
[33m  1  |  import { describe, it, expect, beforeEach, vi } from "vitest";
  2  |  import express from "express";
  3  |  import request from "supertest";
     |                       ^
  4  |  import { requestId } from "../../server/middleware/requestId";
  5  |  describe("Error Handler Request-ID", () => {[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/health-cache.test.ts[2m [ tests/unit/health-cache.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/health-cache.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/health-cache.test.ts[39m:2:20
[33m  1  |  import { describe, it, expect, beforeEach, vi, afterEach } from "vitest";
  2  |  import request from "supertest";
     |                       ^
  3  |  import express from "express";
  4  |  describe("Health Endpoint Cache TTL", () => {[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/health-guards.test.ts[2m [ tests/unit/health-guards.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/health-guards.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/health-guards.test.ts[39m:2:20
[33m  1  |  import { describe, it, expect, beforeEach } from "vitest";
  2  |  import request from "supertest";
     |                       ^
  3  |  import express from "express";
  4  |  describe("Health Endpoint Guards", () => {[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/portfolio-intelligence.test.ts[2m [ tests/unit/api/portfolio-intelligence.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/api/portfolio-intelligence.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/api/portfolio-intelligence.test.ts[39m:9:20
[33m  1  |  import { describe, it, expect, beforeEach, afterEach, vi } from "vitest";
  2  |  import request from "supertest";
     |                       ^
  3  |  import express from "express";
  4  |  import router from "../../../server/routes/portfolio-intelligence";[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/reserves-api.test.ts[2m [ tests/unit/api/reserves-api.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/api/reserves-api.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/api/reserves-api.test.ts[39m:11:0
[33m  24 |    }
  25 |  }));
  26 |  const __vi_import_0__ = await import("supertest");
     |                                       ^
  27 |  const __vi_import_1__ = await import("express");
  28 |  const __vi_import_2__ = await import("zod");[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/time-travel-api.test.ts[2m [ tests/unit/api/time-travel-api.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/api/time-travel-api.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/api/time-travel-api.test.ts[39m:8:0
[33m  24 |    recordBusinessMetric: vi.fn()
  25 |  }));
  26 |  const __vi_import_0__ = await import("supertest");
     |                                       ^
  27 |  const __vi_import_1__ = await import("express");
  28 |  const __vi_import_2__ = await import("../../fixtures/time-travel-fixtures");[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/api/variance-tracking-api.test.ts[2m [ tests/unit/api/variance-tracking-api.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "supertest" from "tests/unit/api/variance-tracking-api.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/api/variance-tracking-api.test.ts[39m:8:0
[33m  14 |    }
  15 |  }));
  16 |  const __vi_import_0__ = await import("supertest");
     |                                       ^
  17 |  const __vi_import_1__ = await import("express");
  18 |  const __vi_import_2__ = await import("../../fixtures/variance-tracking-fixtures");[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/bug-fixes/phase3-critical-bugs.test.ts[2m [ tests/unit/bug-fixes/phase3-critical-bugs.test.ts ][22m
[31m[1mError[22m: Cannot find module '../tests/helpers/database-mock'
Require stack:
- c:\dev\Updog_restore\server\db.ts[39m
[36m [2m❯[22m server/db.ts:[2m23:28[22m[39m
    [90m 21| [39m[35mif[39m (isTest) {
    [90m 22| [39m  [90m// Import the database mock for testing[39m
    [90m 23| [39m  [35mconst[39m { databaseMock } [33m=[39m [34mrequire[39m([32m'../tests/helpers/database-mock'[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 24| [39m  db [33m=[39m databaseMock[33m;[39m
    [90m 25| [39m  pool [33m=[39m [35mnull[39m[33m;[39m
[90m [2m❯[22m server/services/monte-carlo-engine.ts:[2m1:1[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/database/time-travel-schema.test.ts[2m > [22mTime-Travel Analytics Database Schema
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/database/time-travel-schema.test.ts:[2m20:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/database/time-travel-schema.test.ts[2m > [22mTime-Travel Analytics Database Schema
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/database/time-travel-schema.test.ts:[2m26:19[22m[39m
    [90m 24| [39m  [34mafterAll[39m([35masync[39m () [33m=>[39m {
    [90m 25| [39m    [35mawait[39m testDb[33m.[39m[34mcleanup[39m()[33m;[39m
    [90m 26| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m 27| [39m  })[33m;[39m
    [90m 28| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/database/variance-tracking-schema.test.ts[2m > [22mVariance Tracking Database Schema
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/database/variance-tracking-schema.test.ts:[2m20:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/database/variance-tracking-schema.test.ts[2m > [22mVariance Tracking Database Schema
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/database/variance-tracking-schema.test.ts:[2m26:19[22m[39m
    [90m 24| [39m  [34mafterAll[39m([35masync[39m () [33m=>[39m {
    [90m 25| [39m    [35mawait[39m testDb[33m.[39m[34mcleanup[39m()[33m;[39m
    [90m 26| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m 27| [39m  })[33m;[39m
    [90m 28| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/engines/monte-carlo.test.ts[2m [ tests/unit/engines/monte-carlo.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "@/server/services/monte-carlo-engine" from "tests/unit/engines/monte-carlo.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/engines/monte-carlo.test.ts[39m:7:0
[33m  28 |    }
  29 |  }));
  30 |  const __vi_import_0__ = await import("@/server/services/monte-carlo-engine");
     |                                       ^
  31 |  import { describe, it, expect, beforeEach, vi } from "vitest";
  32 |  [39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/reserves/ConstrainedReserveEngine.test.ts[2m [ tests/unit/reserves/ConstrainedReserveEngine.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "fast-check" from "tests/unit/reserves/ConstrainedReserveEngine.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mC:/dev/Updog_restore/tests/unit/reserves/ConstrainedReserveEngine.test.ts[39m:2:15
[33m  1  |  import { describe, it, expect } from "vitest";
  2  |  import fc from "fast-check";
     |                  ^
  3  |  import { ConstrainedReserveEngine } from "../../../client/src/core/reserves/ConstrainedReserveEngine.js";
  4  |  describe("ConstrainedReserveEngine", () => {[39m
[90m [2m❯[22m TransformPluginContext._formatError tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform tools_local/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-engine.test.ts[2m [ tests/unit/services/monte-carlo-engine.test.ts ][22m
[31m[1mTypeError[22m: default.join is not a function[39m
[36m [2m❯[22m server/utils/logger.ts:[2m19:22[22m[39m
    [90m 17| [39m
    [90m 18| [39m[90m// Ensure logs directory exists[39m
    [90m 19| [39m[35mconst[39m logsDir [33m=[39m path[33m.[39m[34mjoin[39m(process[33m.[39m[34mcwd[39m()[33m,[39m [32m'logs'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 20| [39m[35mif[39m ([33m![39mfs[33m.[39m[34mexistsSync[39m(logsDir)) {
    [90m 21| [39m  fs[33m.[39m[34mmkdirSync[39m(logsDir[33m,[39m { recursive[33m:[39m [35mtrue[39m })[33m;[39m
[90m [2m❯[22m server/services/monte-carlo-engine.ts:[2m6:31[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/337]⎯[22m[39m


[31m⎯⎯⎯⎯⎯⎯[39m[1m[41m Failed Tests 255 [49m[22m[31m⎯⎯⎯⎯⎯⎯[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 2 to capital-structure
[31m[1mAssertionError[22m: expected 'investment-rounds' to be 'capital-structure' // Object.is equality[39m

Expected: [32m"capital-structure"[39m
Received: [31m"investment-rounds"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m19:64[22m[39m
    [90m 17| [39m
    [90m 18| [39m    [34mit[39m([32m'maps step 2 to capital-structure'[39m[33m,[39m () [33m=>[39m {
    [90m 19| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=2')).toBe('c…
    [90m   | [39m                                                               [31m^[39m
    [90m 20| [39m      expect(resolveStepKeyFromLocation('?step=2')).toBe('capital-stru…
    [90m 21| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 3 to investment-strategy
[31m[1mAssertionError[22m: expected 'capital-structure' to be 'investment-strategy' // Object.is equality[39m

Expected: [32m"investment-strategy"[39m
Received: [31m"capital-structure"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m24:64[22m[39m
    [90m 22| [39m
    [90m 23| [39m    [34mit[39m([32m'maps step 3 to investment-strategy'[39m[33m,[39m () [33m=>[39m {
    [90m 24| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=3')).toBe('i…
    [90m   | [39m                                                               [31m^[39m
    [90m 25| [39m      expect(resolveStepKeyFromLocation('?step=3')).toBe('investment-s…
    [90m 26| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 4 to distributions
[31m[1mAssertionError[22m: expected 'investment-strategy' to be 'distributions' // Object.is equality[39m

Expected: [32m"distributions"[39m
Received: [31m"investment-strategy"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m29:64[22m[39m
    [90m 27| [39m
    [90m 28| [39m    [34mit[39m([32m'maps step 4 to distributions'[39m[33m,[39m () [33m=>[39m {
    [90m 29| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=4')).toBe('d…
    [90m   | [39m                                                               [31m^[39m
    [90m 30| [39m      expect(resolveStepKeyFromLocation('?step=4')).toBe('distribution…
    [90m 31| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mmaps step 5 to cashflow-management
[31m[1mAssertionError[22m: expected 'distributions' to be 'cashflow-management' // Object.is equality[39m

Expected: [32m"cashflow-management"[39m
Received: [31m"distributions"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m40:64[22m[39m
    [90m 38| [39m
    [90m 39| [39m    [34mit[39m([32m'maps step 5 to cashflow-management'[39m[33m,[39m () [33m=>[39m {
    [90m 40| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=5')).toBe('c…
    [90m   | [39m                                                               [31m^[39m
    [90m 41| [39m      expect(resolveStepKeyFromLocation('?step=5')).toBe('cashflow-man…
    [90m 42| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mreturns not-found for invalid steps
[31m[1mAssertionError[22m: expected 'cashflow-management' to be 'not-found' // Object.is equality[39m

Expected: [32m"not-found"[39m
Received: [31m"cashflow-management"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m46:64[22m[39m
    [90m 44| [39m    [34mit[39m([32m'returns not-found for invalid steps'[39m[33m,[39m () [33m=>[39m {
    [90m 45| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=0')).toBe('n…
    [90m 46| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=6')).toBe('n…
    [90m   | [39m                                                               [31m^[39m
    [90m 47| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=99')).toBe('…
    [90m 48| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=abc')).toBe(…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles complex URLs correctly
[31m[1mAssertionError[22m: expected 'capital-structure' to be 'investment-strategy' // Object.is equality[39m

Expected: [32m"investment-strategy"[39m
Received: [31m"capital-structure"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m52:76[22m[39m
    [90m 50| [39m
    [90m 51| [39m    [34mit[39m([32m'handles complex URLs correctly'[39m[33m,[39m () [33m=>[39m {
    [90m 52| [39m      expect(resolveStepKeyFromLocation('/fund-setup?step=3&other=para…
    [90m   | [39m                                                                           [31m^[39m
    [90m 53| [39m      expect(resolveStepKeyFromLocation('/fund-setup?other=param&step=…
    [90m 54| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mresolveStepKeyFromLocation[2m > [22mhandles whitespace correctly
[31m[1mAssertionError[22m: expected 'investment-rounds' to be 'capital-structure' // Object.is equality[39m

Expected: [32m"capital-structure"[39m
Received: [31m"investment-rounds"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m62:59[22m[39m
    [90m 60| [39m
    [90m 61| [39m    [34mit[39m([32m'handles whitespace correctly'[39m[33m,[39m () [33m=>[39m {
    [90m 62| [39m      expect(resolveStepKeyFromLocation('?step=%202%20')).toBe('capita…
    [90m   | [39m                                                          [31m^[39m
    [90m 63| [39m      expect(resolveStepKeyFromLocation('?step=  3  ')).toBe('investme…
    [90m 64| [39m      expect(resolveStepKeyFromLocation('?step=%20')).toBe('not-found'…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mnormalizeStepParam[2m > [22mreturns null for invalid values
[31m[1mAssertionError[22m: expected '6' to be null // Object.is equality[39m

[32m- Expected:[39m 
null

[31m+ Received:[39m 
"6"

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m93:39[22m[39m
    [90m 91| [39m    [34mit[39m([32m'returns null for invalid values'[39m[33m,[39m () [33m=>[39m {
    [90m 92| [39m      [34mexpect[39m([34mnormalizeStepParam[39m([32m'0'[39m))[33m.[39m[34mtoBe[39m([35mnull[39m)[33m;[39m
    [90m 93| [39m      [34mexpect[39m([34mnormalizeStepParam[39m([32m'6'[39m))[33m.[39m[34mtoBe[39m([35mnull[39m)[33m;[39m
    [90m   | [39m                                      [31m^[39m
    [90m 94| [39m      [34mexpect[39m([34mnormalizeStepParam[39m([32m'abc'[39m))[33m.[39m[34mtoBe[39m([35mnull[39m)[33m;[39m
    [90m 95| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22misValidStep[2m > [22mreturns false for invalid steps
[31m[1mAssertionError[22m: expected true to be false // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m109:32[22m[39m
    [90m107| [39m    [34mit[39m([32m'returns false for invalid steps'[39m[33m,[39m () [33m=>[39m {
    [90m108| [39m      [34mexpect[39m([34misValidStep[39m([32m'0'[39m))[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m109| [39m      [34mexpect[39m([34misValidStep[39m([32m'6'[39m))[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m110| [39m      [34mexpect[39m([34misValidStep[39m([32m'99'[39m))[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m111| [39m      [34mexpect[39m([34misValidStep[39m([32m'abc'[39m))[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mgetStepNumber[2m > [22mreturns correct step number for valid keys
[31m[1mAssertionError[22m: expected '3' to be '2' // Object.is equality[39m

Expected: [32m"2"[39m
Received: [31m"3"[39m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m122:50[22m[39m
    [90m120| [39m    [34mit[39m([32m'returns correct step number for valid keys'[39m[33m,[39m () [33m=>[39m {
    [90m121| [39m      [34mexpect[39m([34mgetStepNumber[39m([32m'fund-basics'[39m))[33m.[39m[34mtoBe[39m([32m'1'[39m)[33m;[39m
    [90m122| [39m      [34mexpect[39m([34mgetStepNumber[39m([32m'capital-structure'[39m))[33m.[39m[34mtoBe[39m([32m'2'[39m)[33m;[39m
    [90m   | [39m                                                 [31m^[39m
    [90m123| [39m      [34mexpect[39m([34mgetStepNumber[39m([32m'investment-strategy'[39m))[33m.[39m[34mtoBe[39m([32m'3'[39m)[33m;[39m
    [90m124| [39m      [34mexpect[39m([34mgetStepNumber[39m([32m'distributions'[39m))[33m.[39m[34mtoBe[39m([32m'4'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mtype safety[2m > [22mVALID_STEPS contains exactly 1, 2, 3, 4, 5
[31m[1mAssertionError[22m: expected [ '1', '2', '3', '4', '5', '6' ] to deeply equal [ '1', '2', '3', '4', '5' ][39m

[32m- Expected[39m
[31m+ Received[39m

[33m@@ -2,6 +2,7 @@[39m
[2m    "1",[22m
[2m    "2",[22m
[2m    "3",[22m
[2m    "4",[22m
[2m    "5",[22m
[31m+   "6",[39m
[2m  ][22m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m131:27[22m[39m
    [90m129| [39m  [34mdescribe[39m([32m'type safety'[39m[33m,[39m () [33m=>[39m {
    [90m130| [39m    [34mit[39m([32m'VALID_STEPS contains exactly 1, 2, 3, 4, 5'[39m[33m,[39m () [33m=>[39m {
    [90m131| [39m      [34mexpect[39m([33mVALID_STEPS[39m)[33m.[39m[34mtoEqual[39m([[32m'1'[39m[33m,[39m [32m'2'[39m[33m,[39m [32m'3'[39m[33m,[39m [32m'4'[39m[33m,[39m [32m'5'[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m132| [39m    })[33m;[39m
    [90m133| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/fund-setup-utils.test.ts[2m > [22mfund-setup-utils[2m > [22mtype safety[2m > [22mNUM_TO_KEY maps all valid steps
[31m[1mAssertionError[22m: expected [ '1', '2', '3', '4', '5', '6' ] to deeply equal [ '1', '2', '3', '4', '5' ][39m

[32m- Expected[39m
[31m+ Received[39m

[33m@@ -2,6 +2,7 @@[39m
[2m    "1",[22m
[2m    "2",[22m
[2m    "3",[22m
[2m    "4",[22m
[2m    "5",[22m
[31m+   "6",[39m
[2m  ][22m

[36m [2m❯[22m tests/unit/fund-setup-utils.test.ts:[2m135:46[22m[39m
    [90m133| [39m
    [90m134| [39m    [34mit[39m([32m'NUM_TO_KEY maps all valid steps'[39m[33m,[39m () [33m=>[39m {
    [90m135| [39m      expect(Object.keys(NUM_TO_KEY).sort()).toEqual(['1', '2', '3', '…
    [90m   | [39m                                             [31m^[39m
    [90m136| [39m      [34mexpect[39m([33mNUM_TO_KEY[39m[[32m'1'[39m])[33m.[39m[34mtoBe[39m([32m'fund-basics'[39m)[33m;[39m
    [90m137| [39m      [34mexpect[39m([33mNUM_TO_KEY[39m[[32m'2'[39m])[33m.[39m[34mtoBe[39m([32m'capital-structure'[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould generate returns that reflect 70% failure rate
[31m[1mAssertionError[22m: expected NaN to be greater than 0.65[39m
[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m187:27[22m[39m
    [90m185| [39m
    [90m186| [39m      // Should be approximately 70% ± 5% tolerance for statistical va…
    [90m187| [39m      [34mexpect[39m(failureRate)[33m.[39m[34mtoBeGreaterThan[39m([34m0.65[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m188| [39m      [34mexpect[39m(failureRate)[33m.[39m[34mtoBeLessThan[39m([34m0.75[39m)[33m;[39m
    [90m189| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould generate approximately 1% unicorns (>50x returns)
[31m[1mAssertionError[22m: expected NaN to be greater than 0.005[39m
[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m212:27[22m[39m
    [90m210| [39m
    [90m211| [39m      [90m// Should be approximately 1% ± 0.5% tolerance[39m
    [90m212| [39m      [34mexpect[39m(unicornRate)[33m.[39m[34mtoBeGreaterThan[39m([34m0.005[39m)[33m;[39m [90m// 0.5%[39m
    [90m   | [39m                          [31m^[39m
    [90m213| [39m      [34mexpect[39m(unicornRate)[33m.[39m[34mtoBeLessThan[39m([34m0.02[39m)[33m;[39m     [90m// 2%[39m
    [90m214| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould show power law characteristics in return distribution
[31m[1mTypeError[22m: actual value must be number or bigint, received "undefined"[39m
[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m232:19[22m[39m
    [90m230| [39m
    [90m231| [39m      [90m// 90th percentile should be much higher than median[39m
    [90m232| [39m      [34mexpect[39m(p90)[33m.[39m[34mtoBeGreaterThan[39m(p50 [33m*[39m [34m3[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m233| [39m
    [90m234| [39m      [90m// 99th percentile should be much higher than 90th[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[30/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould show Series A Chasm effect in stage-specific failure rates
[31m[1mAssertionError[22m: expected 0 to be less than 0[39m
[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m258:34[22m[39m
    [90m256| [39m
    [90m257| [39m      // Series A should have lower failure rate than seed (survival b…
    [90m258| [39m      [34mexpect[39m(seriesAFailureRate)[33m.[39m[34mtoBeLessThan[39m(seedFailureRate)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m259| [39m      [34mexpect[39m(seedFailureRate)[33m.[39m[34mtoBeCloseTo[39m([34m0.70[39m[33m,[39m [34m1[39m)[33m;[39m [90m// ±10%[39m
    [90m260| [39m      [34mexpect[39m(seriesAFailureRate)[33m.[39m[34mtoBeLessThan[39m([34m0.60[39m)[33m;[39m [90m// Should be <60%[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[31/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mPower Law Distribution for 2024-2025 Market[2m > [22mshould handle Series C+ stage properly
[31m[1mAssertionError[22m: expected NaN to be greater than 2[39m
[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m276:33[22m[39m
    [90m274| [39m      // Series C+ should have lowest failure rate and higher mean ret…
    [90m275| [39m      expect(seriesCFailureRate).toBeLessThan(0.40); // <40% failure r…
    [90m276| [39m      expect(seriesCMeanReturn).toBeGreaterThan(2.0); // >2x mean retu…
    [90m   | [39m                                [31m^[39m
    [90m277| [39m    })[33m;[39m
    [90m278| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[32/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mExtended Timelines and Market Conditions[2m > [22mshould handle higher reserve allocation for current market conditions
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m350:44[22m[39m
    [90m348| [39m      expect(reserveAllocation!.percentage).toBe(35); // Higher than h…
    [90m349| [39m      [34mexpect[39m(strategy[33m.[39mtotalAllocation)[33m.[39m[34mtoBe[39m([34m100[39m)[33m;[39m
    [90m350| [39m      [34mexpect[39m(strategy[33m.[39mvalidation[33m.[39mallValid)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m351| [39m    })[33m;[39m
    [90m352| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[33/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/monte-carlo-2025-validation-core.test.ts[2m > [22mMonte Carlo 2024-2025 Market Validation Core Logic[2m > [22mError Handling and Edge Cases[2m > [22mshould handle invalid stage names in power law distribution
[31m[1mAssertionError[22m: expected [Function] to not throw an error but 'Error: Invalid investment stage: inva…' was thrown[39m

[32m- Expected:[39m 
undefined

[31m+ Received:[39m 
"Error: Invalid investment stage: invalid-stage"

[36m [2m❯[22m tests/unit/monte-carlo-2025-validation-core.test.ts:[2m376:14[22m[39m
    [90m374| [39m        [35mconst[39m result [33m=[39m powerLaw[33m.[39m[34msampleReturn[39m([32m'invalid-stage'[39m [35mas[39m any)[33m;[39m
    [90m375| [39m        [34mexpect[39m(result[33m.[39mmultiple)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m376| [39m      })[33m.[39mnot[33m.[39m[34mtoThrow[39m()[33m;[39m
    [90m   | [39m             [31m^[39m
    [90m377| [39m    })[33m;[39m
    [90m378| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[34/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould use incoming X-Request-ID when provided
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m31:5[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[35/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould generate new request ID when not provided
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m43:5[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[36/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould generate new ID for empty string header
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m56:5[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[37/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould generate new ID for whitespace-only header
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m68:5[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[38/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould always set response header
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m90:7[22m[39m
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m84:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould add child logger when global logger exists
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m114:5[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[40/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/request-id.test.ts[2m > [22mRequest ID Middleware[2m > [22mshould track start time for duration calculation
[31m[1mTypeError[22m: randomUUID is not a function[39m
[36m [2m❯[22m server/middleware/requestId.ts:[2m18:30[22m[39m
    [90m 16| [39m  [35mreturn[39m (req[33m:[39m [33mRequest[39m[33m,[39m res[33m:[39m [33mResponse[39m[33m,[39m next[33m:[39m [33mNextFunction[39m) [33m=>[39m {
    [90m 17| [39m    // ALWAYS generate server-side ID (security: prevent log injection…
    [90m 18| [39m    [35mconst[39m serverRid [33m=[39m [32m`req_[39m[36m${[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 19| [39m
    [90m 20| [39m    // Optionally preserve client-provided ID for debugging (separate …
[90m [2m❯[22m tests/unit/request-id.test.ts:[2m131:5[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[41/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 1: Simple 2-flow, 20.11% return (Excel validated)
[31m[1mAssertionError[22m: expected 0.00006536899891820824 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m35:51[22m[39m
    [90m 33| [39m      [34mexpect[39m(result[33m.[39mirr)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 34| [39m      [90m// Excel: =XIRR(...) = 0.148698355 (14.87%)[39m
    [90m 35| [39m      expect(Math.abs(result.irr! - 0.148698355)).toBeLessThan(EXCEL_T…
    [90m   | [39m                                                  [31m^[39m
    [90m 36| [39m    })[33m;[39m
    [90m 37| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[42/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 2: Multi-round with partial distributions (Excel validated)
[31m[1mAssertionError[22m: expected 0.17847275499836018 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m51:48[22m[39m
    [90m 49| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m 50| [39m      [90m// Excel: =XIRR(...) = 0.298764 (29.88%)[39m
    [90m 51| [39m      expect(Math.abs(result.irr! - 0.298764)).toBeLessThan(EXCEL_TOLE…
    [90m   | [39m                                               [31m^[39m
    [90m 52| [39m    })[33m;[39m
    [90m 53| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[43/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 3: Monthly flows, irregular spacing
[31m[1mAssertionError[22m: expected 0.0018677569282734008 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m68:48[22m[39m
    [90m 66| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m 67| [39m      [90m// Excel: =XIRR(...) = 0.252103 (25.21%)[39m
    [90m 68| [39m      expect(Math.abs(result.irr! - 0.252103)).toBeLessThan(EXCEL_TOLE…
    [90m   | [39m                                               [31m^[39m
    [90m 69| [39m    })[33m;[39m
    [90m 70| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[44/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mStandard Cases[2m > [22mCase 4: Quarterly flows, large exit spike
[31m[1mAssertionError[22m: expected 0.07915059636807031 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m85:48[22m[39m
    [90m 83| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m 84| [39m      [90m// Excel: =XIRR(...) = 1.723456 (172.35%)[39m
    [90m 85| [39m      expect(Math.abs(result.irr! - 1.723456)).toBeLessThan(EXCEL_TOLE…
    [90m   | [39m                                               [31m^[39m
    [90m 86| [39m    })[33m;[39m
    [90m 87| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[45/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 5: Negative IRR (loss scenario)
[31m[1mAssertionError[22m: expected 0.003828318782535464 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m100:50[22m[39m
    [90m 98| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m 99| [39m      [90m// Excel: =XIRR(...) = -0.10091 (-10.09%)[39m
    [90m100| [39m      expect(Math.abs(result.irr! - (-0.10091))).toBeLessThan(EXCEL_TO…
    [90m   | [39m                                                 [31m^[39m
    [90m101| [39m    })[33m;[39m
    [90m102| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[46/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Negative & Near-Zero IRR[2m > [22mCase 6: Near-zero IRR (tiny gain)
[31m[1mAssertionError[22m: expected 4.0391567300676785e-7 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m113:48[22m[39m
    [90m111| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m112| [39m      [90m// Excel: =XIRR(...) = 0.000998 (0.10%)[39m
    [90m113| [39m      expect(Math.abs(result.irr! - 0.000998)).toBeLessThan(EXCEL_TOLE…
    [90m   | [39m                                               [31m^[39m
    [90m114| [39m    })[33m;[39m
    [90m115| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[47/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Very High Returns[2m > [22mCase 8: 10x return in 6 months (extreme)
[31m[1mAssertionError[22m: expected 1.5940168404178934 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m140:44[22m[39m
    [90m138| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m139| [39m      [90m// Excel: =XIRR(...) = 99.0000 (9,900%)[39m
    [90m140| [39m      expect(Math.abs(result.irr! - 99.0)).toBeLessThan(EXCEL_TOLERANC…
    [90m   | [39m                                           [31m^[39m
    [90m141| [39m    })[33m;[39m
    [90m142| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[48/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mEdge Cases - Very High Returns[2m > [22mCase 9: Very high multi-year return
[31m[1mAssertionError[22m: expected 14.861411142538325 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m153:49[22m[39m
    [90m151| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m152| [39m      [90m// Excel: =XIRR(...) = 17.544347 (1,754%)[39m
    [90m153| [39m      expect(Math.abs(result.irr! - 17.544347)).toBeLessThan(EXCEL_TOL…
    [90m   | [39m                                                [31m^[39m
    [90m154| [39m    })[33m;[39m
    [90m155| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[49/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mPathological Cases - Early Distribution + Follow-on[2m > [22mCase 10: Early dist then follow-on calls (complex)
[31m[1mAssertionError[22m: expected 0.2421878137487528 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m171:48[22m[39m
    [90m169| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m170| [39m      [90m// Excel: =XIRR(...) = 0.287654 (28.77%)[39m
    [90m171| [39m      expect(Math.abs(result.irr! - 0.287654)).toBeLessThan(EXCEL_TOLE…
    [90m   | [39m                                               [31m^[39m
    [90m172| [39m    })[33m;[39m
    [90m173| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[50/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Golden Set - Excel Validated[2m > [22mTimezone & Date Normalization[2m > [22mCase 14: UTC normalization sanity check
[31m[1mAssertionError[22m: expected 0.00006536899891820824 to be less than 1e-7[39m
[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m235:51[22m[39m
    [90m233| [39m      [90m// Should match Case 1 (same dates, normalized to UTC)[39m
    [90m234| [39m      [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m235| [39m      expect(Math.abs(result.irr! - 0.148698355)).toBeLessThan(EXCEL_T…
    [90m   | [39m                                                  [31m^[39m
    [90m236| [39m    })[33m;[39m
    [90m237| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[51/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/xirr-golden-set.test.ts[2m > [22mXIRR Method Fallbacks[2m > [22mShould fall back to Brent for Newton failure
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m❯[22m tests/unit/xirr-golden-set.test.ts:[2m292:30[22m[39m
    [90m290| [39m    [35mconst[39m result [33m=[39m [34mxirrNewtonBisection[39m(flows)[33m;[39m
    [90m291| [39m
    [90m292| [39m    [34mexpect[39m(result[33m.[39mconverged)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m293| [39m    [34mexpect[39m([[32m'newton'[39m[33m,[39m [32m'brent'[39m[33m,[39m [32m'bisection'[39m])[33m.[39m[34mtoContain[39m(result[33m.[39mmethod)[33m;[39m
    [90m294| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[52/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mAIInsightCard[2m > [22mrenders without crashing
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m50:5[22m[39m
    [90m 48| [39m[34mdescribe[39m([32m'AIInsightCard'[39m[33m,[39m () [33m=>[39m {
    [90m 49| [39m  [34mit[39m([32m'renders without crashing'[39m[33m,[39m () [33m=>[39m {
    [90m 50| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m 51| [39m      [33m<[39m[33mAIInsightCard[39m
    [90m 52| [39m        [33mresults[39m[33m=[39m[33m{[39mmockMonteCarloResults[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[53/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mAIInsightCard[2m > [22mgenerates insights from Monte Carlo results
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m63:5[22m[39m
    [90m 61| [39m
    [90m 62| [39m  [34mit[39m([32m'generates insights from Monte Carlo results'[39m[33m,[39m () [33m=>[39m {
    [90m 63| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m 64| [39m      [33m<[39m[33mAIInsightCard[39m
    [90m 65| [39m        [33mresults[39m[33m=[39m[33m{[39mmockMonteCarloResults[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[54/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mAIInsightCard[2m > [22mshows empty state when no results provided
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m81:5[22m[39m
    [90m 79| [39m
    [90m 80| [39m  [34mit[39m([32m'shows empty state when no results provided'[39m[33m,[39m () [33m=>[39m {
    [90m 81| [39m    [34mrender[39m([33m<[39m[33mAIInsightCard[39m [33mresults[39m[33m=[39m[33m{[39m[][33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m 82| [39m
    [90m 83| [39m    expect(screen.getByText(/Run Monte Carlo simulation/i)).toBeInTheD…

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[55/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mAIInsightCard[2m > [22mrenders custom insights
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m96:5[22m[39m
    [90m 94| [39m    }][33m;[39m
    [90m 95| [39m
    [90m 96| [39m    [34mrender[39m([33m<[39m[33mAIInsightCard[39m [33minsights[39m[33m=[39m[33m{[39mcustomInsights[33m}[39m [33m/[39m[33m>[39m)[33m;[39m
    [90m   | [39m    [31m^[39m
    [90m 97| [39m
    [90m 98| [39m    [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([32m"Test Insight"[39m))[33m.[39m[34mtoBeInTheDocument[39m()[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[56/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mProgressiveDisclosureContainer[2m > [22mrenders with default executive view
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m120:5[22m[39m
    [90m118| [39m
    [90m119| [39m  [34mit[39m([32m'renders with default executive view'[39m[33m,[39m () [33m=>[39m {
    [90m120| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m121| [39m      [33m<[39m[33mProgressiveDisclosureContainer[39m
    [90m122| [39m        [33msections[39m[33m=[39m[33m{[39mmockSections[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[57/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mProgressiveDisclosureContainer[2m > [22mallows switching between view levels
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m132:5[22m[39m
    [90m130| [39m
    [90m131| [39m  [34mit[39m([32m'allows switching between view levels'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m132| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m133| [39m      [33m<[39m[33mProgressiveDisclosureContainer[39m
    [90m134| [39m        [33msections[39m[33m=[39m[33m{[39mmockSections[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[58/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mProgressiveDisclosureContainer[2m > [22mfilters sections based on complexity
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m173:5[22m[39m
    [90m171| [39m    ][33m;[39m
    [90m172| [39m
    [90m173| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m174| [39m      [33m<[39m[33mProgressiveDisclosureContainer[39m
    [90m175| [39m        [33msections[39m[33m=[39m[33m{[39mcomplexSections[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[59/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mContextualTooltip[2m > [22mrenders basic tooltip content
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m188:5[22m[39m
    [90m186| [39m[34mdescribe[39m([32m'ContextualTooltip'[39m[33m,[39m () [33m=>[39m {
    [90m187| [39m  [34mit[39m([32m'renders basic tooltip content'[39m[33m,[39m () [33m=>[39m {
    [90m188| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m189| [39m      [33m<[39m[33mContextualTooltip[39m [33mconcept[39m[33m=[39m[32m"power-law"[39m[33m>[39m
    [90m190| [39m        Power Law

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[60/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mContextualTooltip[2m > [22mrenders inline variant correctly
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m198:5[22m[39m
    [90m196| [39m
    [90m197| [39m  [34mit[39m([32m'renders inline variant correctly'[39m[33m,[39m () [33m=>[39m {
    [90m198| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m199| [39m      [33m<[39m[33mContextualTooltip[39m [33mconcept[39m[33m=[39m[32m"irr"[39m [33mvariant[39m[33m=[39m[32m"inline"[39m[33m>[39m
    [90m200| [39m        IRR

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[61/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mContextualTooltip[2m > [22mrenders convenience components
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m209:5[22m[39m
    [90m207| [39m
    [90m208| [39m  [34mit[39m([32m'renders convenience components'[39m[33m,[39m () [33m=>[39m {
    [90m209| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m210| [39m      [33m<[39m[33mdiv[39m[33m>[39m
    [90m211| [39m        [33m<[39m[33mPowerLawTooltip[39m[33m>[39mPower Law Test[33m<[39m[33m/[39m[33mPowerLawTooltip[39m[33m>[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[62/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mContextualTooltip[2m > [22mhandles unknown concepts gracefully
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m221:5[22m[39m
    [90m219| [39m
    [90m220| [39m  [34mit[39m([32m'handles unknown concepts gracefully'[39m[33m,[39m () [33m=>[39m {
    [90m221| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m222| [39m      [33m<[39m[33mContextualTooltip[39m [33mconcept[39m[33m=[39m[32m"unknown-concept"[39m[33m>[39m
    [90m223| [39m        Unknown

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[63/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mIntelligentSkeleton[2m > [22mrenders dashboard skeleton
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m233:5[22m[39m
    [90m231| [39m[34mdescribe[39m([32m'IntelligentSkeleton'[39m[33m,[39m () [33m=>[39m {
    [90m232| [39m  [34mit[39m([32m'renders dashboard skeleton'[39m[33m,[39m () [33m=>[39m {
    [90m233| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m234| [39m      [33m<[39m[33mIntelligentSkeleton[39m
    [90m235| [39m        [33mvariant[39m[33m=[39m[33m{[39m{ type[33m:[39m [32m'dashboard'[39m }[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[64/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mIntelligentSkeleton[2m > [22mrenders chart skeleton with correct type
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m248:5[22m[39m
    [90m246| [39m
    [90m247| [39m  [34mit[39m([32m'renders chart skeleton with correct type'[39m[33m,[39m () [33m=>[39m {
    [90m248| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m249| [39m      [33m<[39m[33mIntelligentSkeleton[39m
    [90m250| [39m        [33mvariant[39m[33m=[39m[33m{[39m{ type[33m:[39m [32m'chart'[39m }[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[65/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mIntelligentSkeleton[2m > [22mrenders table skeleton with custom dimensions
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m262:5[22m[39m
    [90m260| [39m
    [90m261| [39m  [34mit[39m([32m'renders table skeleton with custom dimensions'[39m[33m,[39m () [33m=>[39m {
    [90m262| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m263| [39m      [33m<[39m[33mIntelligentSkeleton[39m
    [90m264| [39m        [33mvariant[39m[33m=[39m[33m{[39m{

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[66/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mIntelligentSkeleton[2m > [22mcan disable animations
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m279:5[22m[39m
    [90m277| [39m
    [90m278| [39m  [34mit[39m([32m'can disable animations'[39m[33m,[39m () [33m=>[39m {
    [90m279| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m280| [39m      [33m<[39m[33mIntelligentSkeleton[39m
    [90m281| [39m        [33mvariant[39m[33m=[39m[33m{[39m{ type[33m:[39m [32m'dashboard'[39m }[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[67/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mIntegration Tests[2m > [22mcomponents work together in typical usage
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m293:5[22m[39m
    [90m291| [39m[34mdescribe[39m([32m'Integration Tests'[39m[33m,[39m () [33m=>[39m {
    [90m292| [39m  [34mit[39m([32m'components work together in typical usage'[39m[33m,[39m () [33m=>[39m {
    [90m293| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m294| [39m      [33m<[39m[33mdiv[39m[33m>[39m
    [90m295| [39m        [33m<[39m[33mProgressiveDisclosureContainer[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[68/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mIntegration Tests[2m > [22mhandles loading states correctly
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m328:5[22m[39m
    [90m326| [39m
    [90m327| [39m  [34mit[39m([32m'handles loading states correctly'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m328| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m329| [39m      [33m<[39m[33mdiv[39m[33m>[39m
    [90m330| [39m        [33m<[39m[33mIntelligentSkeleton[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[69/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mData Processing[2m > [22mhandles edge cases in Monte Carlo data
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m360:5[22m[39m
    [90m358| [39m    ][33m;[39m
    [90m359| [39m
    [90m360| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m361| [39m      [33m<[39m[33mAIInsightCard[39m
    [90m362| [39m        [33mresults[39m[33m=[39m[33m{[39medgeCaseData[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[70/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ai-enhanced-components.test.tsx[2m > [22mData Processing[2m > [22mgenerates appropriate insights for different failure rates
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'appendChild')[39m
[90m [2m❯[22m Proxy.render tools_local/node_modules/@testing-library/react/dist/pure.js:[2m260:29[22m[39m
[36m [2m❯[22m tests/unit/components/ai-enhanced-components.test.tsx:[2m381:5[22m[39m
    [90m379| [39m    }))[33m;[39m
    [90m380| [39m
    [90m381| [39m    [34mrender[39m(
    [90m   | [39m    [31m^[39m
    [90m382| [39m      [33m<[39m[33mAIInsightCard[39m
    [90m383| [39m        [33mresults[39m[33m=[39m[33m{[39mhighFailureData[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[71/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/engines/cohort-engine.test.ts[2m > [22mcompareCohorts[2m > [22mshould calculate average Multiple across cohorts
[31m[1mAssertionError[22m: expected 1.83 to be close to 1.825, received difference is 0.0050000000000001155, but expected 0.005[39m
[36m [2m❯[22m tests/unit/engines/cohort-engine.test.ts:[2m241:47[22m[39m
    [90m239| [39m    const manualAvgMultiple = comparison.cohorts.reduce((sum, c) => su…
    [90m240| [39m
    [90m241| [39m    expect(comparison.comparison.avgMultiple).toBeCloseTo(manualAvgMul…
    [90m   | [39m                                              [31m^[39m
    [90m242| [39m  })[33m;[39m
    [90m243| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[72/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/engines/liquidity-engine.test.ts[2m > [22mLiquidityEngine - Edge Cases[2m > [22mshould handle zero cash position
[31m[1mAssertionError[22m: expected -9.6 to be greater than or equal to 0[39m
[36m [2m❯[22m tests/unit/engines/liquidity-engine.test.ts:[2m539:35[22m[39m
    [90m537| [39m
    [90m538| [39m    [34mexpect[39m(forecast[33m.[39mopeningCash)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
    [90m539| [39m    [34mexpect[39m(forecast[33m.[39mrunwayMonths)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m540| [39m  })[33m;[39m
    [90m541| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[73/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould render the main layout with header and navigation tabs
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould display key metrics overview cards
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mInitial Rendering and Layout[2m > [22mshould show loading state when funds are loading
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display fund configuration form
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display check size configuration
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould update fund size when input changes
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould update reserve percentage using slider
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould display allocation charts
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould show calculated metrics
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mStrategy Builder Tab[2m > [22mshould validate form inputs
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario selection buttons
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould allow switching between scenarios
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario configuration controls
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould update scenario parameters with sliders
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould display scenario results
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mScenario Modeling Tab[2m > [22mshould update market environment selection
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display projected fund metrics
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display risk analysis section
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould show key risk factors
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mProjections Tab[2m > [22mshould display metrics in proper format
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould display capital deployment schedule chart
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould show deployment metrics
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mTimeline Tab[2m > [22mshould display timeline information correctly
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould save strategy when save button is clicked
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould run simulation when run button is clicked
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould update calculated metrics when inputs change
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould handle form validation errors
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mUser Interactions and Workflows[2m > [22mshould maintain state when switching tabs
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould format currency values correctly
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould format percentage values correctly
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mData Display and Formatting[2m > [22mshould display proper metric values
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have proper ARIA labels
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have proper heading hierarchy
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould have keyboard navigation support
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mResponsive Design and Accessibility[2m > [22mshould handle different viewport sizes gracefully
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing fund data gracefully
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle extreme input values
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle simulation errors gracefully
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mError Handling and Edge Cases[2m > [22mshould handle concurrent operations
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould render within reasonable time
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould not cause memory leaks on unmount
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mPerformance and Optimization[2m > [22mshould handle rapid input changes efficiently
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mIntegration Scenarios[2m > [22mshould support complete workflow from strategy building to simulation
[41m[1m FAIL [22m[49m tests/unit/pages/portfolio-constructor.test.tsx[2m > [22mPortfolioConstructor[2m > [22mIntegration Scenarios[2m > [22mshould maintain data consistency across different views
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/pages/portfolio-constructor.test.tsx:[2m93:22[22m[39m
    [90m 91| [39m    })[33m;[39m
    [90m 92| [39m
    [90m 93| [39m    user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 94| [39m    vi[33m.[39m[34mclearAllMocks[39m()[33m;[39m
    [90m 95| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[74/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mPower Law Distribution Integration[2m > [22mshould integrate power law distribution for return multiples
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m112:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[75/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mPower Law Distribution Integration[2m > [22mshould maintain backward compatibility with existing interface
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m131:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[76/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mPower Law Distribution Integration[2m > [22mshould not apply time decay to variance
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m162:29[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[77/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22m70% Failure Rate Validation[2m > [22mshould show approximately 70% failure rate for seed investments
[31m[1mError[22m: Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m179:22[22m[39m
    [90m177| [39m    it('should show approximately 70% failure rate for seed investment…
    [90m178| [39m      [90m// Mock portfolio with only seed companies[39m
    [90m179| [39m      [35mconst[39m { db } [33m=[39m [34mrequire[39m([32m'../../../server/db'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m180| [39m      db[33m.[39mquery[33m.[39mportfolioCompanies[33m.[39mfindMany[33m.[39m[34mmockResolvedValueOnce[39m([
    [90m181| [39m        { id[33m:[39m [34m1[39m[33m,[39m fundId[33m:[39m [34m1[39m[33m,[39m stage[33m:[39m [32m'seed'[39m[33m,[39m sector[33m:[39m [32m'fintech'[39m }[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[78/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22m70% Failure Rate Validation[2m > [22mshould show different failure rates by stage
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m225:28[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[79/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mExtreme Outliers Validation[2m > [22mshould show extreme outliers (>50x) in approximately 1% of simulations
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m254:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[80/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mExtreme Outliers Validation[2m > [22mshould cap unicorns at reasonable levels
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m275:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[81/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mExtreme Outliers Validation[2m > [22mshould show power law tail behavior
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m291:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[82/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mSeries A Chasm Validation[2m > [22mshould properly reflect Series A Chasm graduation rates
[31m[1mError[22m: Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m320:22[22m[39m
    [90m318| [39m
    [90m319| [39m      [90m// Mock mixed portfolio reflecting typical progression[39m
    [90m320| [39m      [35mconst[39m { db } [33m=[39m [34mrequire[39m([32m'../../../server/db'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m321| [39m      db[33m.[39mquery[33m.[39mportfolioCompanies[33m.[39mfindMany[33m.[39m[34mmockResolvedValueOnce[39m([
    [90m322| [39m        [90m// More seed companies (typical early portfolio)[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[83/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mSeries A Chasm Validation[2m > [22mshould show increasing unicorn rates in later stages
[31m[1mError[22m: Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m373:22[22m[39m
    [90m371| [39m
    [90m372| [39m      [90m// Test seed-only portfolio[39m
    [90m373| [39m      [35mconst[39m { db } [33m=[39m [34mrequire[39m([32m'../../../server/db'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m374| [39m      db[33m.[39mquery[33m.[39mportfolioCompanies[33m.[39mfindMany[33m.[39m[34mmockResolvedValueOnce[39m([
    [90m375| [39m        { id[33m:[39m [34m1[39m[33m,[39m fundId[33m:[39m [34m1[39m[33m,[39m stage[33m:[39m [32m'seed'[39m[33m,[39m sector[33m:[39m [32m'fintech'[39m }[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[84/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mPerformance and Consistency[2m > [22mshould generate large simulations efficiently
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m407:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[85/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mPerformance and Consistency[2m > [22mshould produce reproducible results with same seed
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m423:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[86/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mPerformance and Consistency[2m > [22mshould handle empty portfolio gracefully
[31m[1mError[22m: Cannot find module '../../../server/db'
Require stack:
- c:\dev\Updog_restore\tests\unit\services\monte-carlo-power-law-integration.test.ts[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m433:22[22m[39m
    [90m431| [39m
    [90m432| [39m    [34mit[39m([32m'should handle empty portfolio gracefully'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m433| [39m      [35mconst[39m { db } [33m=[39m [34mrequire[39m([32m'../../../server/db'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m434| [39m      db[33m.[39mquery[33m.[39mportfolioCompanies[33m.[39mfindMany[33m.[39m[34mmockResolvedValueOnce[39m([])[33m;[39m
    [90m435| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[87/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-integration.test.ts[2m > [22mMonte Carlo Power Law Integration[2m > [22mRisk Metrics Integration[2m > [22mshould calculate realistic risk metrics with power law returns
[31m[1mError[22m: No suitable baseline found for Monte Carlo simulation[39m
[36m [2m❯[22m MonteCarloSimulationService.getBaselineData server/services/monte-carlo-simulation.ts:[2m241:13[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([33m![39mbaseline) {
    [90m241| [39m      throw new Error('No suitable baseline found for Monte Carlo simu…
    [90m   | [39m            [31m^[39m
    [90m242| [39m    }
    [90m243| [39m
[90m [2m❯[22m MonteCarloSimulationService.generateForecast server/services/monte-carlo-simulation.ts:[2m169:22[22m[39m
[90m [2m❯[22m tests/unit/services/monte-carlo-power-law-integration.test.ts:[2m462:24[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[88/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-validation.test.ts[2m > [22mMonte Carlo Power Law Validation[2m > [22mExtreme Outliers Validation (>50x)[2m > [22mshould cap unicorns at reasonable levels (≤200x)
[31m[1mAssertionError[22m: expected 0.0055 to be less than 0.005[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-validation.test.ts:[2m122:29[22m[39m
    [90m120| [39m      [35mconst[39m above100x [33m=[39m multiples[33m.[39m[34mfilter[39m(m [33m=>[39m m [33m>[39m [34m100[39m)[33m.[39mlength[33m;[39m
    [90m121| [39m      [35mconst[39m above100xRate [33m=[39m above100x [33m/[39m sampleSize[33m;[39m
    [90m122| [39m      [34mexpect[39m(above100xRate)[33m.[39m[34mtoBeLessThan[39m([34m0.005[39m)[33m;[39m [90m// < 0.5%[39m
    [90m   | [39m                            [31m^[39m
    [90m123| [39m    })[33m;[39m
    [90m124| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[89/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-validation.test.ts[2m > [22mMonte Carlo Power Law Validation[2m > [22mExtreme Outliers Validation (>50x)[2m > [22mshould show power law tail characteristics
[31m[1mAssertionError[22m: expected NaN to be greater than 2[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-validation.test.ts:[2m144:27[22m[39m
    [90m142| [39m      [90m// 99th percentile should be dramatically higher than 90th[39m
    [90m143| [39m      const ratio99to90 = portfolioDistribution.percentiles.p99 / port…
    [90m144| [39m      [34mexpect[39m(ratio99to90)[33m.[39m[34mtoBeGreaterThan[39m([34m2[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m145| [39m    })[33m;[39m
    [90m146| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[90/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-validation.test.ts[2m > [22mMonte Carlo Power Law Validation[2m > [22mSeries A Chasm Validation[2m > [22mshould reflect venture capital J-curve in early vs late stages
[31m[1mAssertionError[22m: expected 139.2535364016066 to be greater than 587.9226393879052[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-validation.test.ts:[2m247:29[22m[39m
    [90m245| [39m      const lateVariance = lateMultiples.reduce((sum, m) => sum + Math…
    [90m246| [39m
    [90m247| [39m      [34mexpect[39m(earlyVariance)[33m.[39m[34mtoBeGreaterThan[39m(lateVariance)[33m;[39m
    [90m   | [39m                            [31m^[39m
    [90m248| [39m    })[33m;[39m
    [90m249| [39m  })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[91/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-validation.test.ts[2m > [22mMonte Carlo Power Law Validation[2m > [22mIntegration with Monte Carlo Parameters[2m > [22mshould handle typical VC portfolio composition
[31m[1mAssertionError[22m: expected +0 to be close to 0.05, received difference is 0.05, but expected 0.05[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-validation.test.ts:[2m334:48[22m[39m
    [90m332| [39m      [34mexpect[39m(stageCounts[[32m'series-a'[39m] [33m/[39m total)[33m.[39m[34mtoBeCloseTo[39m([34m0.25[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(stageCounts[[32m'series-b'[39m] [33m/[39m total)[33m.[39m[34mtoBeCloseTo[39m([34m0.10[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(stageCounts[[32m'series-c+'[39m] [33m/[39m total)[33m.[39m[34mtoBeCloseTo[39m([34m0.05[39m[33m,[39m [34m1[39m)[33m;[39m
    [90m   | [39m                                               [31m^[39m
    [90m335| [39m
    [90m336| [39m      [90m// Validate all returns have required fields[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[92/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/monte-carlo-power-law-validation.test.ts[2m > [22mMonte Carlo Power Law Validation[2m > [22mIntegration with Monte Carlo Parameters[2m > [22mshould produce realistic VC fund-level statistics
[31m[1mAssertionError[22m: expected 0.009 to be greater than 0.2[39m
[36m [2m❯[22m tests/unit/services/monte-carlo-power-law-validation.test.ts:[2m382:36[22m[39m
    [90m380| [39m      const portfolioFailures = portfolioReturns.filter(r => r <= 1.0)…
    [90m381| [39m      [35mconst[39m portfolioFailureRate [33m=[39m portfolioFailures [33m/[39m scenarios[33m;[39m
    [90m382| [39m      expect(portfolioFailureRate).toBeGreaterThan(0.20); // Some port…
    [90m   | [39m                                   [31m^[39m
    [90m383| [39m      expect(portfolioFailureRate).toBeLessThan(0.60);    // But not m…
    [90m384| [39m    })[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[93/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould generate predictions for all fund metrics
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m125:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[94/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould handle different model types
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m175:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[95/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould respect prediction horizon
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m189:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[96/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould handle different confidence levels
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m202:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[97/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mgeneratePredictions[2m > [22mshould store predictions in database
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m223:9[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[98/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mLinear Regression Model[2m > [22mshould produce reasonable predictions for trending data
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m232:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[99/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mLinear Regression Model[2m > [22mshould calculate proper confidence intervals
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m249:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[100/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mExponential Smoothing Model[2m > [22mshould handle volatile time series data
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m271:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[101/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mPolynomial Regression Model[2m > [22mshould handle non-linear patterns
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m292:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[102/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mPolynomial Regression Model[2m > [22mshould fall back to linear for ill-conditioned data
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m317:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[103/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mEnsemble Model[2m > [22mshould combine multiple models effectively
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m326:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[104/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPrediction Generation[2m > [22mEnsemble Model[2m > [22mshould weight models based on accuracy
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m338:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[105/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mTrend Analysis[2m > [22manalyzeTrends[2m > [22mshould detect seasonality when present
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m416:51[22m[39m
    [90m414| [39m        [35mconst[39m trendAnalysis [33m=[39m [35mawait[39m engine[33m.[39m[34manalyzeTrends[39m([34m1[39m[33m,[39m [34m24[39m)[33m;[39m
    [90m415| [39m
    [90m416| [39m        [34mexpect[39m(trendAnalysis[33m.[39mseasonalityDetected)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                                                  [31m^[39m
    [90m417| [39m        [35mif[39m (trendAnalysis[33m.[39mcyclePeriod) {
    [90m418| [39m          [34mexpect[39m(trendAnalysis[33m.[39mcyclePeriod)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m3[39m)[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[106/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mScenario Generation[2m > [22mgenerateScenarios[2m > [22mshould generate multiple what-if scenarios
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m PerformancePredictionEngine.generateScenarios server/services/performance-prediction.ts:[2m309:27[22m[39m
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m591:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[107/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle large datasets efficiently
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m633:23[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[108/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle missing data points gracefully
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m651:23[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[109/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould validate prediction accuracy calculations
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m658:23[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[110/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mPerformance and Error Handling[2m > [22mshould handle edge cases in time series
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m688:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[111/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould query historical data with correct parameters
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m705:7[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[112/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mData Integration and Storage[2m > [22mshould store predictions with correct metadata
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m714:23[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[113/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mModel Validation and Benchmarking[2m > [22mshould maintain prediction quality across different data patterns
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m746:25[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[114/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/performance-prediction.test.ts[2m > [22mPerformancePredictionEngine[2m > [22mModel Validation and Benchmarking[2m > [22mshould provide consistent predictions for stable time series
[31m[1mError[22m: Performance prediction failed: [vitest] No "performanceForecasts" export is defined on the "@shared/schema" mock. Did you forget to return it from "vi.mock"?
If you need to partially mock a module, you can use "importOriginal" helper inside:
[39m
[36m [2m❯[22m PerformancePredictionEngine.generatePredictions server/services/performance-prediction.ts:[2m157:13[22m[39m
    [90m155| [39m
    [90m156| [39m    } [35mcatch[39m (error) {
    [90m157| [39m      throw new Error(`Performance prediction failed: ${error.message}…
    [90m   | [39m            [31m^[39m
    [90m158| [39m    }
    [90m159| [39m  }
[90m [2m❯[22m tests/unit/services/performance-prediction.test.ts:[2m760:23[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[115/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create quarterly snapshot with comprehensive data
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create milestone snapshot for investment event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create emergency snapshot with market context
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould capture comprehensive portfolio state
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould capture fund metrics and performance data
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mgetSnapshots[2m > [22mshould retrieve snapshots with filtering options
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mgetSnapshots[2m > [22mshould return all snapshots when no filters provided
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould create period-over-period comparison
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould create before/after event comparison
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould calculate value changes accurately
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould analyze portfolio changes comprehensively
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould generate actionable insights
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould perform full state restoration
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould perform partial state restoration
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould capture restoration metadata and timing
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould track affected entities during restoration
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create investment timeline event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create exit timeline event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create valuation update event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create market event with external context
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould retrieve timeline events with date filtering
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould filter by event types
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould return all events when no filters provided
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould validate snapshot data integrity
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould maintain consistency across comparison calculations
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould track restoration success/failure accurately
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould handle large portfolio datasets in snapshots
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould efficiently process complex comparisons
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould handle concurrent snapshot operations
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing snapshot data gracefully
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle comparison of identical snapshots
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle restoration failures gracefully
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould validate timeline event data before creation
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mIntegration Scenarios[2m > [22mshould support complete quarterly analysis workflow
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mIntegration Scenarios[2m > [22mshould support investment scenario modeling workflow
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/time-travel-analytics.test.ts:[2m240:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[116/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create quarterly snapshot with comprehensive data
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create milestone snapshot for investment event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould create emergency snapshot with market context
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould capture comprehensive portfolio state
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mcreateSnapshot[2m > [22mshould capture fund metrics and performance data
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mgetSnapshots[2m > [22mshould retrieve snapshots with filtering options
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Management[2m > [22mgetSnapshots[2m > [22mshould return all snapshots when no filters provided
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould create period-over-period comparison
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould create before/after event comparison
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould calculate value changes accurately
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould analyze portfolio changes comprehensively
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mSnapshot Comparison[2m > [22mcompareSnapshots[2m > [22mshould generate actionable insights
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould perform full state restoration
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould perform partial state restoration
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould capture restoration metadata and timing
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mState Restoration[2m > [22mrestoreToSnapshot[2m > [22mshould track affected entities during restoration
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create investment timeline event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create exit timeline event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create valuation update event
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mcreateTimelineEvent[2m > [22mshould create market event with external context
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould retrieve timeline events with date filtering
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould filter by event types
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mTimeline Events[2m > [22mgetTimeline[2m > [22mshould return all events when no filters provided
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/time-travel-analytics.test.ts:[2m246:19[22m[39m
    [90m244| [39m
    [90m245| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m246| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m247| [39m  })[33m;[39m
    [90m248| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[117/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould validate snapshot data integrity
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould maintain consistency across comparison calculations
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mData Integrity and Validation[2m > [22mshould track restoration success/failure accurately
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould handle large portfolio datasets in snapshots
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould efficiently process complex comparisons
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mPerformance and Scalability[2m > [22mshould handle concurrent snapshot operations
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle missing snapshot data gracefully
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle comparison of identical snapshots
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould handle restoration failures gracefully
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mError Handling and Edge Cases[2m > [22mshould validate timeline event data before creation
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mIntegration Scenarios[2m > [22mshould support complete quarterly analysis workflow
[41m[1m FAIL [22m[49m tests/unit/services/time-travel-analytics.test.ts[2m > [22mTime-Travel Analytics Service[2m > [22mIntegration Scenarios[2m > [22mshould support investment scenario modeling workflow
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/time-travel-analytics.test.ts:[2m246:19[22m[39m
    [90m244| [39m
    [90m245| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m246| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m247| [39m  })[33m;[39m
    [90m248| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[118/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould create a baseline with all required fields
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould throw error when no fund metrics available
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould set first baseline as default
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould not set as default when other defaults exist
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mgetBaselines[2m > [22mshould retrieve baselines with filters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mgetBaselines[2m > [22mshould return all active baselines when no filters provided
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22msetDefaultBaseline[2m > [22mshould update default baseline correctly
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mdeactivateBaseline[2m > [22mshould deactivate baseline
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m80:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[119/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould create a baseline with all required fields
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould throw error when no fund metrics available
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould set first baseline as default
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mcreateBaseline[2m > [22mshould not set as default when other defaults exist
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mgetBaselines[2m > [22mshould retrieve baselines with filters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mgetBaselines[2m > [22mshould return all active baselines when no filters provided
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22msetDefaultBaseline[2m > [22mshould update default baseline correctly
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mBaselineService[2m > [22mdeactivateBaseline[2m > [22mshould deactivate baseline
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m86:19[22m[39m
    [90m 84| [39m
    [90m 85| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m 86| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m 87| [39m  })[33m;[39m
    [90m 88| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[120/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould generate comprehensive variance report
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould throw error when baseline not found
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould calculate variance correctly
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould identify significant variances
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould trigger alerts when thresholds are breached
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m285:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[121/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould generate comprehensive variance report
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould throw error when baseline not found
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould calculate variance correctly
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould identify significant variances
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceCalculationService[2m > [22mgenerateVarianceReport[2m > [22mshould trigger alerts when thresholds are breached
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m291:19[22m[39m
    [90m289| [39m
    [90m290| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m291| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m292| [39m  })[33m;[39m
    [90m293| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[122/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould create alert rule with all parameters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould use default values for optional parameters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mcreateAlert[2m > [22mshould create performance alert
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22macknowledgeAlert[2m > [22mshould acknowledge alert with notes
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mresolveAlert[2m > [22mshould resolve alert with resolution notes
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould retrieve active alerts with filters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould return all active alerts when no filters provided
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m464:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[123/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould create alert rule with all parameters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mcreateAlertRule[2m > [22mshould use default values for optional parameters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mcreateAlert[2m > [22mshould create performance alert
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22macknowledgeAlert[2m > [22mshould acknowledge alert with notes
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mresolveAlert[2m > [22mshould resolve alert with resolution notes
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould retrieve active alerts with filters
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mAlertManagementService[2m > [22mgetActiveAlerts[2m > [22mshould return all active alerts when no filters provided
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m470:19[22m[39m
    [90m468| [39m
    [90m469| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m470| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m471| [39m  })[33m;[39m
    [90m472| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[124/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould perform complete analysis workflow
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould use provided baseline ID
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould throw error when no default baseline exists
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould generate alerts when variance thresholds are exceeded
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould provide access to all sub-services
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould coordinate between services in complete analysis
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m625:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[125/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould perform complete analysis workflow
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould use provided baseline ID
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould throw error when no default baseline exists
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mperformCompleteVarianceAnalysis[2m > [22mshould generate alerts when variance thresholds are exceeded
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould provide access to all sub-services
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mVarianceTrackingService (Integration)[2m > [22mservice integration[2m > [22mshould coordinate between services in complete analysis
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m631:19[22m[39m
    [90m629| [39m
    [90m630| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m631| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m632| [39m  })[33m;[39m
    [90m633| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[126/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle missing portfolio data gracefully
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle database transaction failures
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle invalid variance calculations
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle alert rule evaluation edge cases
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m869:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[127/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle missing portfolio data gracefully
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle database transaction failures
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle invalid variance calculations
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mEdge Cases and Error Handling[2m > [22mshould handle alert rule evaluation edge cases
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m875:19[22m[39m
    [90m873| [39m
    [90m874| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m875| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m876| [39m  })[33m;[39m
    [90m877| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[128/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mPerformance and Scalability[2m > [22mshould handle large portfolio datasets efficiently
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mPerformance and Scalability[2m > [22mshould handle multiple concurrent variance calculations
[31m[1mTypeError[22m: default.randomUUID is not a function[39m
[36m [2m❯[22m new TestSandbox tests/setup/test-infrastructure.ts:[2m74:37[22m[39m
    [90m 72| [39m
    [90m 73| [39m  [34mconstructor[39m() {
    [90m 74| [39m    [35mthis[39m[33m.[39mnamespace [33m=[39m [32m`test_[39m[36m${[39mcrypto[33m.[39m[34mrandomUUID[39m()[36m}[39m[32m`[39m[33m;[39m
    [90m   | [39m                                    [31m^[39m
    [90m 75| [39m    [35mthis[39m[33m.[39mabortController [33m=[39m [35mnew[39m [33mAbortController[39m()[33m;[39m
    [90m 76| [39m  }
[90m [2m❯[22m Module.createSandbox tests/setup/test-infrastructure.ts:[2m189:36[22m[39m
[90m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m969:15[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[129/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mPerformance and Scalability[2m > [22mshould handle large portfolio datasets efficiently
[41m[1m FAIL [22m[49m tests/unit/services/variance-tracking.test.ts[2m > [22mPerformance and Scalability[2m > [22mshould handle multiple concurrent variance calculations
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'abort')[39m
[36m [2m❯[22m tests/unit/services/variance-tracking.test.ts:[2m974:19[22m[39m
    [90m972| [39m
    [90m973| [39m  [34mafterEach[39m([35masync[39m () [33m=>[39m {
    [90m974| [39m    [35mawait[39m sandbox[33m.[39m[34mabort[39m()[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m975| [39m  })[33m;[39m
    [90m976| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[130/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mBasic Rendering[2m > [22mrenders with label and input
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m10:9[22m[39m
    [90m  8| [39m    [34mit[39m([32m'renders with label and input'[39m[33m,[39m () [33m=>[39m {
    [90m  9| [39m      [34mrender[39m(
    [90m 10| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 11| [39m          [33mlabel[39m[33m=[39m[32m"Test Input"[39m
    [90m 12| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[131/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mBasic Rendering[2m > [22mdisplays required asterisk when required=true
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m23:9[22m[39m
    [90m 21| [39m    [34mit[39m([32m'displays required asterisk when required=true'[39m[33m,[39m () [33m=>[39m {
    [90m 22| [39m      [34mrender[39m(
    [90m 23| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 24| [39m          [33mlabel[39m[33m=[39m[32m"Required Field"[39m
    [90m 25| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[132/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mBasic Rendering[2m > [22mshows help text when provided
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m36:9[22m[39m
    [90m 34| [39m    [34mit[39m([32m'shows help text when provided'[39m[33m,[39m () [33m=>[39m {
    [90m 35| [39m      [34mrender[39m(
    [90m 36| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 37| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m 38| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[133/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mBasic Rendering[2m > [22mshows error text and hides help text when error is present
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m49:9[22m[39m
    [90m 47| [39m    it('shows error text and hides help text when error is present', (…
    [90m 48| [39m      [34mrender[39m(
    [90m 49| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 50| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m 51| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[134/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mBasic Rendering[2m > [22mrenders placeholder when provided
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m64:9[22m[39m
    [90m 62| [39m    [34mit[39m([32m'renders placeholder when provided'[39m[33m,[39m () [33m=>[39m {
    [90m 63| [39m      [34mrender[39m(
    [90m 64| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 65| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m 66| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[135/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mBasic Rendering[2m > [22mis disabled when disabled=true
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m77:9[22m[39m
    [90m 75| [39m    [34mit[39m([32m'is disabled when disabled=true'[39m[33m,[39m () [33m=>[39m {
    [90m 76| [39m      [34mrender[39m(
    [90m 77| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 78| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m 79| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[136/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22mdisplays $ prefix in currency mode
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m92:9[22m[39m
    [90m 90| [39m    [34mit[39m([32m'displays $ prefix in currency mode'[39m[33m,[39m () [33m=>[39m {
    [90m 91| [39m      [34mrender[39m(
    [90m 92| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m 93| [39m          [33mlabel[39m[33m=[39m[32m"Amount"[39m
    [90m 94| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m1000[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[137/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22mdisplays % suffix in percentage mode
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m106:9[22m[39m
    [90m104| [39m    [34mit[39m([32m'displays % suffix in percentage mode'[39m[33m,[39m () [33m=>[39m {
    [90m105| [39m      [34mrender[39m(
    [90m106| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m107| [39m          [33mlabel[39m[33m=[39m[32m"Rate"[39m
    [90m108| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m25[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[138/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22muses custom prefix when provided
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m119:9[22m[39m
    [90m117| [39m    [34mit[39m([32m'uses custom prefix when provided'[39m[33m,[39m () [33m=>[39m {
    [90m118| [39m      [34mrender[39m(
    [90m119| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m120| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m121| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[139/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22muses custom suffix when provided
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m132:9[22m[39m
    [90m130| [39m    [34mit[39m([32m'uses custom suffix when provided'[39m[33m,[39m () [33m=>[39m {
    [90m131| [39m      [34mrender[39m(
    [90m132| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m133| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m134| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[140/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22mpercentage mode overrides custom suffix
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m145:9[22m[39m
    [90m143| [39m    [34mit[39m([32m'percentage mode overrides custom suffix'[39m[33m,[39m () [33m=>[39m {
    [90m144| [39m      [34mrender[39m(
    [90m145| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m146| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m147| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m50[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[141/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22mcurrency mode uses default $ prefix
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m160:9[22m[39m
    [90m158| [39m    [34mit[39m([32m'currency mode uses default $ prefix'[39m[33m,[39m () [33m=>[39m {
    [90m159| [39m      [34mrender[39m(
    [90m160| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m161| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m162| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[142/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMode-specific Behavior[2m > [22mcurrency mode can use custom prefix
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m173:9[22m[39m
    [90m171| [39m    [34mit[39m([32m'currency mode can use custom prefix'[39m[33m,[39m () [33m=>[39m {
    [90m172| [39m      [34mrender[39m(
    [90m173| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m174| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m175| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[143/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mNumber Formatting[2m > [22mformats numbers with commas when not focused
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m190:9[22m[39m
    [90m188| [39m    [34mit[39m([32m'formats numbers with commas when not focused'[39m[33m,[39m () [33m=>[39m {
    [90m189| [39m      [34mrender[39m(
    [90m190| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m191| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m192| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m1000000[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[144/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mNumber Formatting[2m > [22mremoves commas when focused
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m201:30[22m[39m
    [90m199| [39m
    [90m200| [39m    [34mit[39m([32m'removes commas when focused'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m201| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m202| [39m      [34mrender[39m(
    [90m203| [39m        [33m<[39m[33mNumericInput[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[145/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mNumber Formatting[2m > [22mre-formats with commas on blur
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m218:30[22m[39m
    [90m216| [39m
    [90m217| [39m    [34mit[39m([32m're-formats with commas on blur'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m218| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m219| [39m      [34mrender[39m(
    [90m220| [39m        [33m<[39m[33mNumericInput[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[146/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mNumber Formatting[2m > [22mhandles decimal values correctly
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m236:30[22m[39m
    [90m234| [39m
    [90m235| [39m    [34mit[39m([32m'handles decimal values correctly'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m236| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m237| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m238| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[147/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mNumber Formatting[2m > [22mpreserves decimal places when formatting
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m255:9[22m[39m
    [90m253| [39m    [34mit[39m([32m'preserves decimal places when formatting'[39m[33m,[39m () [33m=>[39m {
    [90m254| [39m      [34mrender[39m(
    [90m255| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m256| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m257| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m1234.5678[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[148/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mNumber Formatting[2m > [22mhandles negative numbers
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m266:30[22m[39m
    [90m264| [39m
    [90m265| [39m    [34mit[39m([32m'handles negative numbers'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m266| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m267| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m268| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[149/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mUser Input Validation[2m > [22mallows only numeric characters and decimal point
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m286:30[22m[39m
    [90m284| [39m  [34mdescribe[39m([32m'User Input Validation'[39m[33m,[39m () [33m=>[39m {
    [90m285| [39m    it('allows only numeric characters and decimal point', async () =>…
    [90m286| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m287| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m288| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[150/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mUser Input Validation[2m > [22mhandles empty string as undefined
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m305:30[22m[39m
    [90m303| [39m
    [90m304| [39m    [34mit[39m([32m'handles empty string as undefined'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m305| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m306| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m307| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[151/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mUser Input Validation[2m > [22mallows typing minus sign for negative numbers
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m322:30[22m[39m
    [90m320| [39m
    [90m321| [39m    [34mit[39m([32m'allows typing minus sign for negative numbers'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m322| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m323| [39m      [34mrender[39m(
    [90m324| [39m        [33m<[39m[33mNumericInput[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[152/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMin/Max Clamping[2m > [22mclamps value to min on blur
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m342:30[22m[39m
    [90m340| [39m  [34mdescribe[39m([32m'Min/Max Clamping'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m    [34mit[39m([32m'clamps value to min on blur'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m342| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m343| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m344| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[153/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMin/Max Clamping[2m > [22mclamps value to max on blur
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m365:30[22m[39m
    [90m363| [39m
    [90m364| [39m    [34mit[39m([32m'clamps value to max on blur'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m365| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m366| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m367| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[154/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mMin/Max Clamping[2m > [22mallows values within min/max range
[31m[1mError[22m: Could not determine window of node. Node was [object Object][39m
[90m [2m❯[22m getWindow tools_local/node_modules/@testing-library/user-event/dist/esm/utils/misc/getWindow.js:[2m8:11[22m[39m
[90m [2m❯[22m Object.setupMain [as setup] tools_local/node_modules/@testing-library/user-event/dist/esm/setup/setup.js:[2m53:16[22m[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m387:30[22m[39m
    [90m385| [39m
    [90m386| [39m    [34mit[39m([32m'allows values within min/max range'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m387| [39m      [35mconst[39m user [33m=[39m userEvent[33m.[39m[34msetup[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m388| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m389| [39m      [34mrender[39m(

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[155/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22mincrements value with ArrowUp
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m413:9[22m[39m
    [90m411| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m412| [39m      [34mrender[39m(
    [90m413| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m414| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m415| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m10[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[156/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22mdecrements value with ArrowDown
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m430:9[22m[39m
    [90m428| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m429| [39m      [34mrender[39m(
    [90m430| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m431| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m432| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m10[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[157/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22mrespects custom step value
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m447:9[22m[39m
    [90m445| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m446| [39m      [34mrender[39m(
    [90m447| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m448| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m449| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m10[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[158/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22mhandles ArrowUp/Down with decimal steps
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m464:9[22m[39m
    [90m462| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m463| [39m      [34mrender[39m(
    [90m464| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m465| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m466| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m0.5[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[159/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22mclamps when incrementing beyond max
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m482:9[22m[39m
    [90m480| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m481| [39m      [34mrender[39m(
    [90m482| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m483| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m484| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m99[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[160/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22mclamps when decrementing below min
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m500:9[22m[39m
    [90m498| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m499| [39m      [34mrender[39m(
    [90m500| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m501| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m502| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m5[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[161/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mKeyboard Navigation[2m > [22muses 0 as base when value is undefined and arrow key pressed
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m518:9[22m[39m
    [90m516| [39m      [35mconst[39m onChange [33m=[39m vi[33m.[39m[34mfn[39m()[33m;[39m
    [90m517| [39m      [34mrender[39m(
    [90m518| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m519| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m520| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[162/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22mgenerates unique IDs for input and label
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m536:9[22m[39m
    [90m534| [39m    [34mit[39m([32m'generates unique IDs for input and label'[39m[33m,[39m () [33m=>[39m {
    [90m535| [39m      [34mrender[39m(
    [90m536| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m537| [39m          [33mlabel[39m[33m=[39m[32m"Test Input"[39m
    [90m538| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[163/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22msets aria-required when required=true
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m552:9[22m[39m
    [90m550| [39m    [34mit[39m([32m'sets aria-required when required=true'[39m[33m,[39m () [33m=>[39m {
    [90m551| [39m      [34mrender[39m(
    [90m552| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m553| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m554| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[164/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22msets aria-invalid when error is present
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m565:9[22m[39m
    [90m563| [39m    [34mit[39m([32m'sets aria-invalid when error is present'[39m[33m,[39m () [33m=>[39m {
    [90m564| [39m      [34mrender[39m(
    [90m565| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m566| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m567| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[165/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22mlinks input to help text with aria-describedby
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m578:9[22m[39m
    [90m576| [39m    [34mit[39m([32m'links input to help text with aria-describedby'[39m[33m,[39m () [33m=>[39m {
    [90m577| [39m      [34mrender[39m(
    [90m578| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m579| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m580| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[166/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22mlinks input to error text with aria-describedby
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m594:9[22m[39m
    [90m592| [39m    [34mit[39m([32m'links input to error text with aria-describedby'[39m[33m,[39m () [33m=>[39m {
    [90m593| [39m      [34mrender[39m(
    [90m594| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m595| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m596| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[167/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22merror message has role="alert"
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m610:9[22m[39m
    [90m608| [39m    [34mit[39m([32m'error message has role="alert"'[39m[33m,[39m () [33m=>[39m {
    [90m609| [39m      [34mrender[39m(
    [90m610| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m611| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m612| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[168/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mAccessibility[2m > [22muses inputMode="decimal" for mobile keyboards
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m623:9[22m[39m
    [90m621| [39m    [34mit[39m([32m'uses inputMode="decimal" for mobile keyboards'[39m[33m,[39m () [33m=>[39m {
    [90m622| [39m      [34mrender[39m(
    [90m623| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m624| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m625| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[169/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mEdge Cases[2m > [22mhandles very large numbers
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m637:9[22m[39m
    [90m635| [39m    [34mit[39m([32m'handles very large numbers'[39m[33m,[39m () [33m=>[39m {
    [90m636| [39m      [34mrender[39m(
    [90m637| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m638| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m639| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m999999999999[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[170/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mEdge Cases[2m > [22mhandles very small decimal numbers
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m649:9[22m[39m
    [90m647| [39m    [34mit[39m([32m'handles very small decimal numbers'[39m[33m,[39m () [33m=>[39m {
    [90m648| [39m      [34mrender[39m(
    [90m649| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m650| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m651| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m0.000001[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[171/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mEdge Cases[2m > [22mhandles zero correctly
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m661:9[22m[39m
    [90m659| [39m    [34mit[39m([32m'handles zero correctly'[39m[33m,[39m () [33m=>[39m {
    [90m660| [39m      [34mrender[39m(
    [90m661| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m662| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m663| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m0[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[172/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mEdge Cases[2m > [22mhandles undefined to number transition
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m673:9[22m[39m
    [90m671| [39m    [34mit[39m([32m'handles undefined to number transition'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m672| [39m      [35mconst[39m { rerender } [33m=[39m [34mrender[39m(
    [90m673| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m674| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m675| [39m          [33mvalue[39m[33m=[39m[33m{[39mundefined[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[173/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mEdge Cases[2m > [22mhandles number to undefined transition
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m695:9[22m[39m
    [90m693| [39m    [34mit[39m([32m'handles number to undefined transition'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m694| [39m      [35mconst[39m { rerender } [33m=[39m [34mrender[39m(
    [90m695| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m696| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m697| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[174/337]⎯[22m[39m

[41m[1m FAIL [22m[49m tests/unit/components/ui/NumericInput.test.tsx[2m > [22mNumericInput[2m > [22mCustom Class Names[2m > [22mapplies custom className to container
[31m[1mReferenceError[22m: React is not defined[39m
[36m [2m❯[22m tests/unit/components/ui/NumericInput.test.tsx:[2m719:9[22m[39m
    [90m717| [39m    [34mit[39m([32m'applies custom className to container'[39m[33m,[39m () [33m=>[39m {
    [90m718| [39m      [35mconst[39m { container } [33m=[39m [34mrender[39m(
    [90m719| [39m        [33m<[39m[33mNumericInput[39m
    [90m   | [39m        [31m^[39m
    [90m720| [39m          [33mlabel[39m[33m=[39m[32m"Test"[39m
    [90m721| [39m          [33mvalue[39m[33m=[39m[33m{[39m[34m100[39m[33m}[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[175/337]⎯[22m[39m


[2m Test Files [22m [1m[31m27 failed[39m[22m[2m | [22m[1m[32m26 passed[39m[22m[90m (53)[39m
[2m      Tests [22m [1m[31m255 failed[39m[22m[2m | [22m[1m[32m560 passed[39m[22m[2m | [22m[33m54 skipped[39m[90m (869)[39m
[2m   Start at [22m 15:41:12
[2m   Duration [22m 52.56s[2m (transform 65.14s, setup 59.15s, collect 89.61s, tests 23.10s, environment 211.24s, prepare 19.06s)[22m

