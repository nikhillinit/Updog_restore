#!/usr/bin/env sh

echo "ğŸ” Pre-push validation..."

# AGENTS.md daily review (automated, only shows if activity detected)
node scripts/agents-daily-review.mjs 2>/dev/null || true

# TypeScript baseline check
echo "ğŸ“‹ Checking TypeScript baseline..."
npm run baseline:check || {
  echo ""
  echo "âŒ NEW TypeScript errors detected"
  echo ""
  echo "If you FIXED errors:"
  echo "   npm run baseline:save && git add .tsc-baseline.json && git commit --amend --no-edit"
  echo ""
  echo "If you INTRODUCED errors:"
  echo "   Fix them or see: npm run baseline:progress"
  exit 1
}

# Build verification
echo "ğŸ—ï¸  Building..."
npm run build || exit 1

# Test verification
echo "ğŸ§ª Running tests..."
npm run test || exit 1

echo "âœ… Pre-push passed"
